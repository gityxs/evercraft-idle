(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function of(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ru={exports:{}},ya={},Lu={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ts=Symbol.for("react.element"),uf=Symbol.for("react.portal"),cf=Symbol.for("react.fragment"),df=Symbol.for("react.strict_mode"),ff=Symbol.for("react.profiler"),mf=Symbol.for("react.provider"),pf=Symbol.for("react.context"),hf=Symbol.for("react.forward_ref"),gf=Symbol.for("react.suspense"),xf=Symbol.for("react.memo"),vf=Symbol.for("react.lazy"),po=Symbol.iterator;function yf(e){return e===null||typeof e!="object"?null:(e=po&&e[po]||e["@@iterator"],typeof e=="function"?e:null)}var Ou={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Du=Object.assign,Uu={};function rr(e,t,n){this.props=e,this.context=t,this.refs=Uu,this.updater=n||Ou}rr.prototype.isReactComponent={};rr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};rr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fu(){}Fu.prototype=rr.prototype;function ml(e,t,n){this.props=e,this.context=t,this.refs=Uu,this.updater=n||Ou}var pl=ml.prototype=new Fu;pl.constructor=ml;Du(pl,rr.prototype);pl.isPureReactComponent=!0;var ho=Array.isArray,Bu=Object.prototype.hasOwnProperty,hl={current:null},Gu={key:!0,ref:!0,__self:!0,__source:!0};function zu(e,t,n){var r,s={},a=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Bu.call(t,r)&&!Gu.hasOwnProperty(r)&&(s[r]=t[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var u=Array(o),c=0;c<o;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:ts,type:e,key:a,ref:l,props:s,_owner:hl.current}}function Nf(e,t){return{$$typeof:ts,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gl(e){return typeof e=="object"&&e!==null&&e.$$typeof===ts}function Sf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var go=/\/+/g;function Ua(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sf(""+e.key):t.toString(36)}function ws(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ts:case uf:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+Ua(l,0):r,ho(s)?(n="",e!=null&&(n=e.replace(go,"$&/")+"/"),ws(s,t,n,"",function(c){return c})):s!=null&&(gl(s)&&(s=Nf(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(go,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",ho(e))for(var o=0;o<e.length;o++){a=e[o];var u=r+Ua(a,o);l+=ws(a,t,n,u,s)}else if(u=yf(e),typeof u=="function")for(e=u.call(e),o=0;!(a=e.next()).done;)a=a.value,u=r+Ua(a,o++),l+=ws(a,t,n,u,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function is(e,t,n){if(e==null)return e;var r=[],s=0;return ws(e,r,"","",function(a){return t.call(n,a,s++)}),r}function bf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ke={current:null},Es={transition:null},wf={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:Es,ReactCurrentOwner:hl};function $u(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:is,forEach:function(e,t,n){is(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return is(e,function(){t++}),t},toArray:function(e){return is(e,function(t){return t})||[]},only:function(e){if(!gl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=rr;oe.Fragment=cf;oe.Profiler=ff;oe.PureComponent=ml;oe.StrictMode=df;oe.Suspense=gf;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wf;oe.act=$u;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Du({},e.props),s=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=hl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(u in t)Bu.call(t,u)&&!Gu.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&o!==void 0?o[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){o=Array(u);for(var c=0;c<u;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:ts,type:e.type,key:s,ref:a,props:r,_owner:l}};oe.createContext=function(e){return e={$$typeof:pf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mf,_context:e},e.Consumer=e};oe.createElement=zu;oe.createFactory=function(e){var t=zu.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:hf,render:e}};oe.isValidElement=gl;oe.lazy=function(e){return{$$typeof:vf,_payload:{_status:-1,_result:e},_init:bf}};oe.memo=function(e,t){return{$$typeof:xf,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Es.transition;Es.transition={};try{e()}finally{Es.transition=t}};oe.unstable_act=$u;oe.useCallback=function(e,t){return Ke.current.useCallback(e,t)};oe.useContext=function(e){return Ke.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return Ke.current.useDeferredValue(e)};oe.useEffect=function(e,t){return Ke.current.useEffect(e,t)};oe.useId=function(){return Ke.current.useId()};oe.useImperativeHandle=function(e,t,n){return Ke.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return Ke.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return Ke.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return Ke.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return Ke.current.useReducer(e,t,n)};oe.useRef=function(e){return Ke.current.useRef(e)};oe.useState=function(e){return Ke.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return Ke.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return Ke.current.useTransition()};oe.version="18.3.1";Lu.exports=oe;var re=Lu.exports;const vr=of(re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef=re,kf=Symbol.for("react.element"),Cf=Symbol.for("react.fragment"),Mf=Object.prototype.hasOwnProperty,Tf=Ef.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jf={key:!0,ref:!0,__self:!0,__source:!0};function Hu(e,t,n){var r,s={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Mf.call(t,r)&&!jf.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:kf,type:e,key:a,ref:l,props:s,_owner:Tf.current}}ya.Fragment=Cf;ya.jsx=Hu;ya.jsxs=Hu;Ru.exports=ya;var i=Ru.exports,xi={},Yu={exports:{}},ot={},Vu={exports:{}},qu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,B){var F=R.length;R.push(B);e:for(;0<F;){var A=F-1>>>1,ie=R[A];if(0<s(ie,B))R[A]=B,R[F]=ie,F=A;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var B=R[0],F=R.pop();if(F!==B){R[0]=F;e:for(var A=0,ie=R.length,_e=ie>>>1;A<_e;){var _=2*(A+1)-1,P=R[_],V=_+1,O=R[V];if(0>s(P,F))V<ie&&0>s(O,P)?(R[A]=O,R[V]=F,A=V):(R[A]=P,R[_]=F,A=_);else if(V<ie&&0>s(O,F))R[A]=O,R[V]=F,A=V;else break e}}return B}function s(R,B){var F=R.sortIndex-B.sortIndex;return F!==0?F:R.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var u=[],c=[],m=1,f=null,p=3,N=!1,v=!1,h=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var B=n(c);B!==null;){if(B.callback===null)r(c);else if(B.startTime<=R)r(c),B.sortIndex=B.expirationTime,t(u,B);else break;B=n(c)}}function S(R){if(h=!1,x(R),!v)if(n(u)!==null)v=!0,q(E);else{var B=n(c);B!==null&&ce(S,B.startTime-R)}}function E(R,B){v=!1,h&&(h=!1,g(k),k=-1),N=!0;var F=p;try{for(x(B),f=n(u);f!==null&&(!(f.expirationTime>B)||R&&!te());){var A=f.callback;if(typeof A=="function"){f.callback=null,p=f.priorityLevel;var ie=A(f.expirationTime<=B);B=e.unstable_now(),typeof ie=="function"?f.callback=ie:f===n(u)&&r(u),x(B)}else r(u);f=n(u)}if(f!==null)var _e=!0;else{var _=n(c);_!==null&&ce(S,_.startTime-B),_e=!1}return _e}finally{f=null,p=F,N=!1}}var C=!1,T=null,k=-1,K=5,I=-1;function te(){return!(e.unstable_now()-I<K)}function Z(){if(T!==null){var R=e.unstable_now();I=R;var B=!0;try{B=T(!0,R)}finally{B?w():(C=!1,T=null)}}else C=!1}var w;if(typeof d=="function")w=function(){d(Z)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ee=U.port2;U.port1.onmessage=Z,w=function(){ee.postMessage(null)}}else w=function(){M(Z,0)};function q(R){T=R,C||(C=!0,w())}function ce(R,B){k=M(function(){R(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){v||N||(v=!0,q(E))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var F=p;p=B;try{return R()}finally{p=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var F=p;p=R;try{return B()}finally{p=F}},e.unstable_scheduleCallback=function(R,B,F){var A=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?A+F:A):F=A,R){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=F+ie,R={id:m++,callback:B,priorityLevel:R,startTime:F,expirationTime:ie,sortIndex:-1},F>A?(R.sortIndex=F,t(c,R),n(u)===null&&R===n(c)&&(h?(g(k),k=-1):h=!0,ce(S,F-A))):(R.sortIndex=ie,t(u,R),v||N||(v=!0,q(E))),R},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(R){var B=p;return function(){var F=p;p=B;try{return R.apply(this,arguments)}finally{p=F}}}})(qu);Vu.exports=qu;var If=Vu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _f=re,lt=If;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wu=new Set,Ur={};function Cn(e,t){Kn(e,t),Kn(e+"Capture",t)}function Kn(e,t){for(Ur[e]=t,e=0;e<t.length;e++)Wu.add(t[e])}var Ot=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vi=Object.prototype.hasOwnProperty,Af=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xo={},vo={};function Pf(e){return vi.call(vo,e)?!0:vi.call(xo,e)?!1:Af.test(e)?vo[e]=!0:(xo[e]=!0,!1)}function Rf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Lf(e,t,n,r){if(t===null||typeof t>"u"||Rf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ze(e,t,n,r,s,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ge[e]=new Ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ge[t]=new Ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ge[e]=new Ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ge[e]=new Ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ge[e]=new Ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ge[e]=new Ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ge[e]=new Ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ge[e]=new Ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ge[e]=new Ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var xl=/[\-:]([a-z])/g;function vl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xl,vl);Ge[t]=new Ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xl,vl);Ge[t]=new Ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xl,vl);Ge[t]=new Ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ge[e]=new Ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new Ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ge[e]=new Ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function yl(e,t,n,r){var s=Ge.hasOwnProperty(t)?Ge[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Lf(t,n,s,r)&&(n=null),r||s===null?Pf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Bt=_f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ls=Symbol.for("react.element"),jn=Symbol.for("react.portal"),In=Symbol.for("react.fragment"),Nl=Symbol.for("react.strict_mode"),yi=Symbol.for("react.profiler"),Ku=Symbol.for("react.provider"),Zu=Symbol.for("react.context"),Sl=Symbol.for("react.forward_ref"),Ni=Symbol.for("react.suspense"),Si=Symbol.for("react.suspense_list"),bl=Symbol.for("react.memo"),$t=Symbol.for("react.lazy"),Qu=Symbol.for("react.offscreen"),yo=Symbol.iterator;function ir(e){return e===null||typeof e!="object"?null:(e=yo&&e[yo]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,Fa;function yr(e){if(Fa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Fa=t&&t[1]||""}return`
`+Fa+e}var Ba=!1;function Ga(e,t){if(!e||Ba)return"";Ba=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),a=r.stack.split(`
`),l=s.length-1,o=a.length-1;1<=l&&0<=o&&s[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(s[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||s[l]!==a[o]){var u=`
`+s[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=o);break}}}finally{Ba=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?yr(e):""}function Of(e){switch(e.tag){case 5:return yr(e.type);case 16:return yr("Lazy");case 13:return yr("Suspense");case 19:return yr("SuspenseList");case 0:case 2:case 15:return e=Ga(e.type,!1),e;case 11:return e=Ga(e.type.render,!1),e;case 1:return e=Ga(e.type,!0),e;default:return""}}function bi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case In:return"Fragment";case jn:return"Portal";case yi:return"Profiler";case Nl:return"StrictMode";case Ni:return"Suspense";case Si:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Zu:return(e.displayName||"Context")+".Consumer";case Ku:return(e._context.displayName||"Context")+".Provider";case Sl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case bl:return t=e.displayName||null,t!==null?t:bi(e.type)||"Memo";case $t:t=e._payload,e=e._init;try{return bi(e(t))}catch{}}return null}function Df(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bi(t);case 8:return t===Nl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uf(e){var t=Xu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function os(e){e._valueTracker||(e._valueTracker=Uf(e))}function Ju(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function $s(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wi(e,t){var n=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function No(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ec(e,t){t=t.checked,t!=null&&yl(e,"checked",t,!1)}function Ei(e,t){ec(e,t);var n=sn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ki(e,t.type,n):t.hasOwnProperty("defaultValue")&&ki(e,t.type,sn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function So(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ki(e,t,n){(t!=="number"||$s(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Nr=Array.isArray;function zn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ci(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function bo(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(Nr(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sn(n)}}function tc(e,t){var n=sn(t.value),r=sn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function wo(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var us,rc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(us=us||document.createElement("div"),us.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Er={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ff=["Webkit","ms","Moz","O"];Object.keys(Er).forEach(function(e){Ff.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Er[t]=Er[e]})});function sc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Er.hasOwnProperty(e)&&Er[e]?(""+t).trim():t+"px"}function ac(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Bf=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ti(e,t){if(t){if(Bf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function ji(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ii=null;function wl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _i=null,$n=null,Hn=null;function Eo(e){if(e=ss(e)){if(typeof _i!="function")throw Error(L(280));var t=e.stateNode;t&&(t=Ea(t),_i(e.stateNode,e.type,t))}}function ic(e){$n?Hn?Hn.push(e):Hn=[e]:$n=e}function lc(){if($n){var e=$n,t=Hn;if(Hn=$n=null,Eo(e),t)for(e=0;e<t.length;e++)Eo(t[e])}}function oc(e,t){return e(t)}function uc(){}var za=!1;function cc(e,t,n){if(za)return e(t,n);za=!0;try{return oc(e,t,n)}finally{za=!1,($n!==null||Hn!==null)&&(uc(),lc())}}function Br(e,t){var n=e.stateNode;if(n===null)return null;var r=Ea(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var Ai=!1;if(Ot)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){Ai=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{Ai=!1}function Gf(e,t,n,r,s,a,l,o,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(m){this.onError(m)}}var kr=!1,Hs=null,Ys=!1,Pi=null,zf={onError:function(e){kr=!0,Hs=e}};function $f(e,t,n,r,s,a,l,o,u){kr=!1,Hs=null,Gf.apply(zf,arguments)}function Hf(e,t,n,r,s,a,l,o,u){if($f.apply(this,arguments),kr){if(kr){var c=Hs;kr=!1,Hs=null}else throw Error(L(198));Ys||(Ys=!0,Pi=c)}}function Mn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ko(e){if(Mn(e)!==e)throw Error(L(188))}function Yf(e){var t=e.alternate;if(!t){if(t=Mn(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return ko(s),e;if(a===r)return ko(s),t;a=a.sibling}throw Error(L(188))}if(n.return!==r.return)n=s,r=a;else{for(var l=!1,o=s.child;o;){if(o===n){l=!0,n=s,r=a;break}if(o===r){l=!0,r=s,n=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===n){l=!0,n=a,r=s;break}if(o===r){l=!0,r=a,n=s;break}o=o.sibling}if(!l)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function fc(e){return e=Yf(e),e!==null?mc(e):null}function mc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mc(e);if(t!==null)return t;e=e.sibling}return null}var pc=lt.unstable_scheduleCallback,Co=lt.unstable_cancelCallback,Vf=lt.unstable_shouldYield,qf=lt.unstable_requestPaint,je=lt.unstable_now,Wf=lt.unstable_getCurrentPriorityLevel,El=lt.unstable_ImmediatePriority,hc=lt.unstable_UserBlockingPriority,Vs=lt.unstable_NormalPriority,Kf=lt.unstable_LowPriority,gc=lt.unstable_IdlePriority,Na=null,Tt=null;function Zf(e){if(Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(Na,e,void 0,(e.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:Jf,Qf=Math.log,Xf=Math.LN2;function Jf(e){return e>>>=0,e===0?32:31-(Qf(e)/Xf|0)|0}var cs=64,ds=4194304;function Sr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var o=l&~s;o!==0?r=Sr(o):(a&=l,a!==0&&(r=Sr(a)))}else l=n&~s,l!==0?r=Sr(l):a!==0&&(r=Sr(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-St(t),s=1<<n,r|=e[n],t&=~s;return r}function em(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-St(a),o=1<<l,u=s[l];u===-1?(!(o&n)||o&r)&&(s[l]=em(o,t)):u<=t&&(e.expiredLanes|=o),a&=~o}}function Ri(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xc(){var e=cs;return cs<<=1,!(cs&4194240)&&(cs=64),e}function $a(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ns(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-St(t),e[t]=n}function nm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-St(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function kl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-St(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var pe=0;function vc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yc,Cl,Nc,Sc,bc,Li=!1,fs=[],Zt=null,Qt=null,Xt=null,Gr=new Map,zr=new Map,Yt=[],rm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mo(e,t){switch(e){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":Xt=null;break;case"pointerover":case"pointerout":Gr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zr.delete(t.pointerId)}}function or(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=ss(t),t!==null&&Cl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function sm(e,t,n,r,s){switch(t){case"focusin":return Zt=or(Zt,e,t,n,r,s),!0;case"dragenter":return Qt=or(Qt,e,t,n,r,s),!0;case"mouseover":return Xt=or(Xt,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Gr.set(a,or(Gr.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,zr.set(a,or(zr.get(a)||null,e,t,n,r,s)),!0}return!1}function wc(e){var t=pn(e.target);if(t!==null){var n=Mn(t);if(n!==null){if(t=n.tag,t===13){if(t=dc(n),t!==null){e.blockedOn=t,bc(e.priority,function(){Nc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ks(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Oi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ii=r,n.target.dispatchEvent(r),Ii=null}else return t=ss(n),t!==null&&Cl(t),e.blockedOn=n,!1;t.shift()}return!0}function To(e,t,n){ks(e)&&n.delete(t)}function am(){Li=!1,Zt!==null&&ks(Zt)&&(Zt=null),Qt!==null&&ks(Qt)&&(Qt=null),Xt!==null&&ks(Xt)&&(Xt=null),Gr.forEach(To),zr.forEach(To)}function ur(e,t){e.blockedOn===t&&(e.blockedOn=null,Li||(Li=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,am)))}function $r(e){function t(s){return ur(s,e)}if(0<fs.length){ur(fs[0],e);for(var n=1;n<fs.length;n++){var r=fs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Zt!==null&&ur(Zt,e),Qt!==null&&ur(Qt,e),Xt!==null&&ur(Xt,e),Gr.forEach(t),zr.forEach(t),n=0;n<Yt.length;n++)r=Yt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yt.length&&(n=Yt[0],n.blockedOn===null);)wc(n),n.blockedOn===null&&Yt.shift()}var Yn=Bt.ReactCurrentBatchConfig,Ws=!0;function im(e,t,n,r){var s=pe,a=Yn.transition;Yn.transition=null;try{pe=1,Ml(e,t,n,r)}finally{pe=s,Yn.transition=a}}function lm(e,t,n,r){var s=pe,a=Yn.transition;Yn.transition=null;try{pe=4,Ml(e,t,n,r)}finally{pe=s,Yn.transition=a}}function Ml(e,t,n,r){if(Ws){var s=Oi(e,t,n,r);if(s===null)Ja(e,t,r,Ks,n),Mo(e,r);else if(sm(s,e,t,n,r))r.stopPropagation();else if(Mo(e,r),t&4&&-1<rm.indexOf(e)){for(;s!==null;){var a=ss(s);if(a!==null&&yc(a),a=Oi(e,t,n,r),a===null&&Ja(e,t,r,Ks,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Ja(e,t,r,null,n)}}var Ks=null;function Oi(e,t,n,r){if(Ks=null,e=wl(r),e=pn(e),e!==null)if(t=Mn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ks=e,null}function Ec(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wf()){case El:return 1;case hc:return 4;case Vs:case Kf:return 16;case gc:return 536870912;default:return 16}default:return 16}}var qt=null,Tl=null,Cs=null;function kc(){if(Cs)return Cs;var e,t=Tl,n=t.length,r,s="value"in qt?qt.value:qt.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[a-r];r++);return Cs=s.slice(e,1<r?1-r:void 0)}function Ms(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ms(){return!0}function jo(){return!1}function ut(e){function t(n,r,s,a,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ms:jo,this.isPropagationStopped=jo,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ms)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ms)},persist:function(){},isPersistent:ms}),t}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jl=ut(sr),rs=Ce({},sr,{view:0,detail:0}),om=ut(rs),Ha,Ya,cr,Sa=Ce({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Il,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cr&&(cr&&e.type==="mousemove"?(Ha=e.screenX-cr.screenX,Ya=e.screenY-cr.screenY):Ya=Ha=0,cr=e),Ha)},movementY:function(e){return"movementY"in e?e.movementY:Ya}}),Io=ut(Sa),um=Ce({},Sa,{dataTransfer:0}),cm=ut(um),dm=Ce({},rs,{relatedTarget:0}),Va=ut(dm),fm=Ce({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),mm=ut(fm),pm=Ce({},sr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hm=ut(pm),gm=Ce({},sr,{data:0}),_o=ut(gm),xm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ym={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ym[e])?!!t[e]:!1}function Il(){return Nm}var Sm=Ce({},rs,{key:function(e){if(e.key){var t=xm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ms(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Il,charCode:function(e){return e.type==="keypress"?Ms(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ms(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bm=ut(Sm),wm=Ce({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ao=ut(wm),Em=Ce({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Il}),km=ut(Em),Cm=Ce({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mm=ut(Cm),Tm=Ce({},Sa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jm=ut(Tm),Im=[9,13,27,32],_l=Ot&&"CompositionEvent"in window,Cr=null;Ot&&"documentMode"in document&&(Cr=document.documentMode);var _m=Ot&&"TextEvent"in window&&!Cr,Cc=Ot&&(!_l||Cr&&8<Cr&&11>=Cr),Po=" ",Ro=!1;function Mc(e,t){switch(e){case"keyup":return Im.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _n=!1;function Am(e,t){switch(e){case"compositionend":return Tc(t);case"keypress":return t.which!==32?null:(Ro=!0,Po);case"textInput":return e=t.data,e===Po&&Ro?null:e;default:return null}}function Pm(e,t){if(_n)return e==="compositionend"||!_l&&Mc(e,t)?(e=kc(),Cs=Tl=qt=null,_n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cc&&t.locale!=="ko"?null:t.data;default:return null}}var Rm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rm[e.type]:t==="textarea"}function jc(e,t,n,r){ic(r),t=Zs(t,"onChange"),0<t.length&&(n=new jl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mr=null,Hr=null;function Lm(e){Bc(e,0)}function ba(e){var t=Rn(e);if(Ju(t))return e}function Om(e,t){if(e==="change")return t}var Ic=!1;if(Ot){var qa;if(Ot){var Wa="oninput"in document;if(!Wa){var Oo=document.createElement("div");Oo.setAttribute("oninput","return;"),Wa=typeof Oo.oninput=="function"}qa=Wa}else qa=!1;Ic=qa&&(!document.documentMode||9<document.documentMode)}function Do(){Mr&&(Mr.detachEvent("onpropertychange",_c),Hr=Mr=null)}function _c(e){if(e.propertyName==="value"&&ba(Hr)){var t=[];jc(t,Hr,e,wl(e)),cc(Lm,t)}}function Dm(e,t,n){e==="focusin"?(Do(),Mr=t,Hr=n,Mr.attachEvent("onpropertychange",_c)):e==="focusout"&&Do()}function Um(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ba(Hr)}function Fm(e,t){if(e==="click")return ba(t)}function Bm(e,t){if(e==="input"||e==="change")return ba(t)}function Gm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wt=typeof Object.is=="function"?Object.is:Gm;function Yr(e,t){if(wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vi.call(t,s)||!wt(e[s],t[s]))return!1}return!0}function Uo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fo(e,t){var n=Uo(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uo(n)}}function Ac(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ac(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pc(){for(var e=window,t=$s();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$s(e.document)}return t}function Al(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zm(e){var t=Pc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ac(n.ownerDocument.documentElement,n)){if(r!==null&&Al(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=Fo(n,a);var l=Fo(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $m=Ot&&"documentMode"in document&&11>=document.documentMode,An=null,Di=null,Tr=null,Ui=!1;function Bo(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ui||An==null||An!==$s(r)||(r=An,"selectionStart"in r&&Al(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Tr&&Yr(Tr,r)||(Tr=r,r=Zs(Di,"onSelect"),0<r.length&&(t=new jl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=An)))}function ps(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pn={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},Ka={},Rc={};Ot&&(Rc=document.createElement("div").style,"AnimationEvent"in window||(delete Pn.animationend.animation,delete Pn.animationiteration.animation,delete Pn.animationstart.animation),"TransitionEvent"in window||delete Pn.transitionend.transition);function wa(e){if(Ka[e])return Ka[e];if(!Pn[e])return e;var t=Pn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rc)return Ka[e]=t[n];return e}var Lc=wa("animationend"),Oc=wa("animationiteration"),Dc=wa("animationstart"),Uc=wa("transitionend"),Fc=new Map,Go="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(e,t){Fc.set(e,t),Cn(t,[e])}for(var Za=0;Za<Go.length;Za++){var Qa=Go[Za],Hm=Qa.toLowerCase(),Ym=Qa[0].toUpperCase()+Qa.slice(1);ln(Hm,"on"+Ym)}ln(Lc,"onAnimationEnd");ln(Oc,"onAnimationIteration");ln(Dc,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(Uc,"onTransitionEnd");Kn("onMouseEnter",["mouseout","mouseover"]);Kn("onMouseLeave",["mouseout","mouseover"]);Kn("onPointerEnter",["pointerout","pointerover"]);Kn("onPointerLeave",["pointerout","pointerover"]);Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vm=new Set("cancel close invalid load scroll toggle".split(" ").concat(br));function zo(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Hf(r,t,void 0,e),e.currentTarget=null}function Bc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var l=r.length-1;0<=l;l--){var o=r[l],u=o.instance,c=o.currentTarget;if(o=o.listener,u!==a&&s.isPropagationStopped())break e;zo(s,o,c),a=u}else for(l=0;l<r.length;l++){if(o=r[l],u=o.instance,c=o.currentTarget,o=o.listener,u!==a&&s.isPropagationStopped())break e;zo(s,o,c),a=u}}}if(Ys)throw e=Pi,Ys=!1,Pi=null,e}function ve(e,t){var n=t[$i];n===void 0&&(n=t[$i]=new Set);var r=e+"__bubble";n.has(r)||(Gc(t,e,2,!1),n.add(r))}function Xa(e,t,n){var r=0;t&&(r|=4),Gc(n,e,r,t)}var hs="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[hs]){e[hs]=!0,Wu.forEach(function(n){n!=="selectionchange"&&(Vm.has(n)||Xa(n,!1,e),Xa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hs]||(t[hs]=!0,Xa("selectionchange",!1,t))}}function Gc(e,t,n,r){switch(Ec(t)){case 1:var s=im;break;case 4:s=lm;break;default:s=Ml}n=s.bind(null,t,n,e),s=void 0,!Ai||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ja(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;l=l.return}for(;o!==null;){if(l=pn(o),l===null)return;if(u=l.tag,u===5||u===6){r=a=l;continue e}o=o.parentNode}}r=r.return}cc(function(){var c=a,m=wl(n),f=[];e:{var p=Fc.get(e);if(p!==void 0){var N=jl,v=e;switch(e){case"keypress":if(Ms(n)===0)break e;case"keydown":case"keyup":N=bm;break;case"focusin":v="focus",N=Va;break;case"focusout":v="blur",N=Va;break;case"beforeblur":case"afterblur":N=Va;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=cm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=km;break;case Lc:case Oc:case Dc:N=mm;break;case Uc:N=Mm;break;case"scroll":N=om;break;case"wheel":N=jm;break;case"copy":case"cut":case"paste":N=hm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Ao}var h=(t&4)!==0,M=!h&&e==="scroll",g=h?p!==null?p+"Capture":null:p;h=[];for(var d=c,x;d!==null;){x=d;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,g!==null&&(S=Br(d,g),S!=null&&h.push(qr(d,S,x)))),M)break;d=d.return}0<h.length&&(p=new N(p,v,null,n,m),f.push({event:p,listeners:h}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",p&&n!==Ii&&(v=n.relatedTarget||n.fromElement)&&(pn(v)||v[Dt]))break e;if((N||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,N?(v=n.relatedTarget||n.toElement,N=c,v=v?pn(v):null,v!==null&&(M=Mn(v),v!==M||v.tag!==5&&v.tag!==6)&&(v=null)):(N=null,v=c),N!==v)){if(h=Io,S="onMouseLeave",g="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(h=Ao,S="onPointerLeave",g="onPointerEnter",d="pointer"),M=N==null?p:Rn(N),x=v==null?p:Rn(v),p=new h(S,d+"leave",N,n,m),p.target=M,p.relatedTarget=x,S=null,pn(m)===c&&(h=new h(g,d+"enter",v,n,m),h.target=x,h.relatedTarget=M,S=h),M=S,N&&v)t:{for(h=N,g=v,d=0,x=h;x;x=Tn(x))d++;for(x=0,S=g;S;S=Tn(S))x++;for(;0<d-x;)h=Tn(h),d--;for(;0<x-d;)g=Tn(g),x--;for(;d--;){if(h===g||g!==null&&h===g.alternate)break t;h=Tn(h),g=Tn(g)}h=null}else h=null;N!==null&&$o(f,p,N,h,!1),v!==null&&M!==null&&$o(f,M,v,h,!0)}}e:{if(p=c?Rn(c):window,N=p.nodeName&&p.nodeName.toLowerCase(),N==="select"||N==="input"&&p.type==="file")var E=Om;else if(Lo(p))if(Ic)E=Bm;else{E=Um;var C=Dm}else(N=p.nodeName)&&N.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=Fm);if(E&&(E=E(e,c))){jc(f,E,n,m);break e}C&&C(e,p,c),e==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&ki(p,"number",p.value)}switch(C=c?Rn(c):window,e){case"focusin":(Lo(C)||C.contentEditable==="true")&&(An=C,Di=c,Tr=null);break;case"focusout":Tr=Di=An=null;break;case"mousedown":Ui=!0;break;case"contextmenu":case"mouseup":case"dragend":Ui=!1,Bo(f,n,m);break;case"selectionchange":if($m)break;case"keydown":case"keyup":Bo(f,n,m)}var T;if(_l)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else _n?Mc(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Cc&&n.locale!=="ko"&&(_n||k!=="onCompositionStart"?k==="onCompositionEnd"&&_n&&(T=kc()):(qt=m,Tl="value"in qt?qt.value:qt.textContent,_n=!0)),C=Zs(c,k),0<C.length&&(k=new _o(k,e,null,n,m),f.push({event:k,listeners:C}),T?k.data=T:(T=Tc(n),T!==null&&(k.data=T)))),(T=_m?Am(e,n):Pm(e,n))&&(c=Zs(c,"onBeforeInput"),0<c.length&&(m=new _o("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:c}),m.data=T))}Bc(f,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Zs(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Br(e,n),a!=null&&r.unshift(qr(e,a,s)),a=Br(e,t),a!=null&&r.push(qr(e,a,s))),e=e.return}return r}function Tn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $o(e,t,n,r,s){for(var a=t._reactName,l=[];n!==null&&n!==r;){var o=n,u=o.alternate,c=o.stateNode;if(u!==null&&u===r)break;o.tag===5&&c!==null&&(o=c,s?(u=Br(n,a),u!=null&&l.unshift(qr(n,u,o))):s||(u=Br(n,a),u!=null&&l.push(qr(n,u,o)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var qm=/\r\n?/g,Wm=/\u0000|\uFFFD/g;function Ho(e){return(typeof e=="string"?e:""+e).replace(qm,`
`).replace(Wm,"")}function gs(e,t,n){if(t=Ho(t),Ho(e)!==t&&n)throw Error(L(425))}function Qs(){}var Fi=null,Bi=null;function Gi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zi=typeof setTimeout=="function"?setTimeout:void 0,Km=typeof clearTimeout=="function"?clearTimeout:void 0,Yo=typeof Promise=="function"?Promise:void 0,Zm=typeof queueMicrotask=="function"?queueMicrotask:typeof Yo<"u"?function(e){return Yo.resolve(null).then(e).catch(Qm)}:zi;function Qm(e){setTimeout(function(){throw e})}function ei(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),$r(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$r(t)}function Jt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vo(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ar=Math.random().toString(36).slice(2),Mt="__reactFiber$"+ar,Wr="__reactProps$"+ar,Dt="__reactContainer$"+ar,$i="__reactEvents$"+ar,Xm="__reactListeners$"+ar,Jm="__reactHandles$"+ar;function pn(e){var t=e[Mt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Dt]||n[Mt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Vo(e);e!==null;){if(n=e[Mt])return n;e=Vo(e)}return t}e=n,n=e.parentNode}return null}function ss(e){return e=e[Mt]||e[Dt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function Ea(e){return e[Wr]||null}var Hi=[],Ln=-1;function on(e){return{current:e}}function ye(e){0>Ln||(e.current=Hi[Ln],Hi[Ln]=null,Ln--)}function ge(e,t){Ln++,Hi[Ln]=e.current,e.current=t}var an={},Ye=on(an),tt=on(!1),Sn=an;function Zn(e,t){var n=e.type.contextTypes;if(!n)return an;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function nt(e){return e=e.childContextTypes,e!=null}function Xs(){ye(tt),ye(Ye)}function qo(e,t,n){if(Ye.current!==an)throw Error(L(168));ge(Ye,t),ge(tt,n)}function zc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(L(108,Df(e)||"Unknown",s));return Ce({},n,r)}function Js(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||an,Sn=Ye.current,ge(Ye,e),ge(tt,tt.current),!0}function Wo(e,t,n){var r=e.stateNode;if(!r)throw Error(L(169));n?(e=zc(e,t,Sn),r.__reactInternalMemoizedMergedChildContext=e,ye(tt),ye(Ye),ge(Ye,e)):ye(tt),ge(tt,n)}var At=null,ka=!1,ti=!1;function $c(e){At===null?At=[e]:At.push(e)}function ep(e){ka=!0,$c(e)}function un(){if(!ti&&At!==null){ti=!0;var e=0,t=pe;try{var n=At;for(pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}At=null,ka=!1}catch(s){throw At!==null&&(At=At.slice(e+1)),pc(El,un),s}finally{pe=t,ti=!1}}return null}var On=[],Dn=0,ea=null,ta=0,ct=[],dt=0,bn=null,Pt=1,Rt="";function fn(e,t){On[Dn++]=ta,On[Dn++]=ea,ea=e,ta=t}function Hc(e,t,n){ct[dt++]=Pt,ct[dt++]=Rt,ct[dt++]=bn,bn=e;var r=Pt;e=Rt;var s=32-St(r)-1;r&=~(1<<s),n+=1;var a=32-St(t)+s;if(30<a){var l=s-s%5;a=(r&(1<<l)-1).toString(32),r>>=l,s-=l,Pt=1<<32-St(t)+s|n<<s|r,Rt=a+e}else Pt=1<<a|n<<s|r,Rt=e}function Pl(e){e.return!==null&&(fn(e,1),Hc(e,1,0))}function Rl(e){for(;e===ea;)ea=On[--Dn],On[Dn]=null,ta=On[--Dn],On[Dn]=null;for(;e===bn;)bn=ct[--dt],ct[dt]=null,Rt=ct[--dt],ct[dt]=null,Pt=ct[--dt],ct[dt]=null}var it=null,at=null,be=!1,Nt=null;function Yc(e,t){var n=ft(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ko(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,it=e,at=Jt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,it=e,at=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bn!==null?{id:Pt,overflow:Rt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ft(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,it=e,at=null,!0):!1;default:return!1}}function Yi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vi(e){if(be){var t=at;if(t){var n=t;if(!Ko(e,t)){if(Yi(e))throw Error(L(418));t=Jt(n.nextSibling);var r=it;t&&Ko(e,t)?Yc(r,n):(e.flags=e.flags&-4097|2,be=!1,it=e)}}else{if(Yi(e))throw Error(L(418));e.flags=e.flags&-4097|2,be=!1,it=e}}}function Zo(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;it=e}function xs(e){if(e!==it)return!1;if(!be)return Zo(e),be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gi(e.type,e.memoizedProps)),t&&(t=at)){if(Yi(e))throw Vc(),Error(L(418));for(;t;)Yc(e,t),t=Jt(t.nextSibling)}if(Zo(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){at=Jt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}at=null}}else at=it?Jt(e.stateNode.nextSibling):null;return!0}function Vc(){for(var e=at;e;)e=Jt(e.nextSibling)}function Qn(){at=it=null,be=!1}function Ll(e){Nt===null?Nt=[e]:Nt.push(e)}var tp=Bt.ReactCurrentBatchConfig;function dr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=s.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qo(e){var t=e._init;return t(e._payload)}function qc(e){function t(g,d){if(e){var x=g.deletions;x===null?(g.deletions=[d],g.flags|=16):x.push(d)}}function n(g,d){if(!e)return null;for(;d!==null;)t(g,d),d=d.sibling;return null}function r(g,d){for(g=new Map;d!==null;)d.key!==null?g.set(d.key,d):g.set(d.index,d),d=d.sibling;return g}function s(g,d){return g=rn(g,d),g.index=0,g.sibling=null,g}function a(g,d,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<d?(g.flags|=2,d):x):(g.flags|=2,d)):(g.flags|=1048576,d)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,d,x,S){return d===null||d.tag!==6?(d=oi(x,g.mode,S),d.return=g,d):(d=s(d,x),d.return=g,d)}function u(g,d,x,S){var E=x.type;return E===In?m(g,d,x.props.children,S,x.key):d!==null&&(d.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===$t&&Qo(E)===d.type)?(S=s(d,x.props),S.ref=dr(g,d,x),S.return=g,S):(S=Rs(x.type,x.key,x.props,null,g.mode,S),S.ref=dr(g,d,x),S.return=g,S)}function c(g,d,x,S){return d===null||d.tag!==4||d.stateNode.containerInfo!==x.containerInfo||d.stateNode.implementation!==x.implementation?(d=ui(x,g.mode,S),d.return=g,d):(d=s(d,x.children||[]),d.return=g,d)}function m(g,d,x,S,E){return d===null||d.tag!==7?(d=vn(x,g.mode,S,E),d.return=g,d):(d=s(d,x),d.return=g,d)}function f(g,d,x){if(typeof d=="string"&&d!==""||typeof d=="number")return d=oi(""+d,g.mode,x),d.return=g,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case ls:return x=Rs(d.type,d.key,d.props,null,g.mode,x),x.ref=dr(g,null,d),x.return=g,x;case jn:return d=ui(d,g.mode,x),d.return=g,d;case $t:var S=d._init;return f(g,S(d._payload),x)}if(Nr(d)||ir(d))return d=vn(d,g.mode,x,null),d.return=g,d;vs(g,d)}return null}function p(g,d,x,S){var E=d!==null?d.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:o(g,d,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ls:return x.key===E?u(g,d,x,S):null;case jn:return x.key===E?c(g,d,x,S):null;case $t:return E=x._init,p(g,d,E(x._payload),S)}if(Nr(x)||ir(x))return E!==null?null:m(g,d,x,S,null);vs(g,x)}return null}function N(g,d,x,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(x)||null,o(d,g,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ls:return g=g.get(S.key===null?x:S.key)||null,u(d,g,S,E);case jn:return g=g.get(S.key===null?x:S.key)||null,c(d,g,S,E);case $t:var C=S._init;return N(g,d,x,C(S._payload),E)}if(Nr(S)||ir(S))return g=g.get(x)||null,m(d,g,S,E,null);vs(d,S)}return null}function v(g,d,x,S){for(var E=null,C=null,T=d,k=d=0,K=null;T!==null&&k<x.length;k++){T.index>k?(K=T,T=null):K=T.sibling;var I=p(g,T,x[k],S);if(I===null){T===null&&(T=K);break}e&&T&&I.alternate===null&&t(g,T),d=a(I,d,k),C===null?E=I:C.sibling=I,C=I,T=K}if(k===x.length)return n(g,T),be&&fn(g,k),E;if(T===null){for(;k<x.length;k++)T=f(g,x[k],S),T!==null&&(d=a(T,d,k),C===null?E=T:C.sibling=T,C=T);return be&&fn(g,k),E}for(T=r(g,T);k<x.length;k++)K=N(T,g,k,x[k],S),K!==null&&(e&&K.alternate!==null&&T.delete(K.key===null?k:K.key),d=a(K,d,k),C===null?E=K:C.sibling=K,C=K);return e&&T.forEach(function(te){return t(g,te)}),be&&fn(g,k),E}function h(g,d,x,S){var E=ir(x);if(typeof E!="function")throw Error(L(150));if(x=E.call(x),x==null)throw Error(L(151));for(var C=E=null,T=d,k=d=0,K=null,I=x.next();T!==null&&!I.done;k++,I=x.next()){T.index>k?(K=T,T=null):K=T.sibling;var te=p(g,T,I.value,S);if(te===null){T===null&&(T=K);break}e&&T&&te.alternate===null&&t(g,T),d=a(te,d,k),C===null?E=te:C.sibling=te,C=te,T=K}if(I.done)return n(g,T),be&&fn(g,k),E;if(T===null){for(;!I.done;k++,I=x.next())I=f(g,I.value,S),I!==null&&(d=a(I,d,k),C===null?E=I:C.sibling=I,C=I);return be&&fn(g,k),E}for(T=r(g,T);!I.done;k++,I=x.next())I=N(T,g,k,I.value,S),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?k:I.key),d=a(I,d,k),C===null?E=I:C.sibling=I,C=I);return e&&T.forEach(function(Z){return t(g,Z)}),be&&fn(g,k),E}function M(g,d,x,S){if(typeof x=="object"&&x!==null&&x.type===In&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ls:e:{for(var E=x.key,C=d;C!==null;){if(C.key===E){if(E=x.type,E===In){if(C.tag===7){n(g,C.sibling),d=s(C,x.props.children),d.return=g,g=d;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===$t&&Qo(E)===C.type){n(g,C.sibling),d=s(C,x.props),d.ref=dr(g,C,x),d.return=g,g=d;break e}n(g,C);break}else t(g,C);C=C.sibling}x.type===In?(d=vn(x.props.children,g.mode,S,x.key),d.return=g,g=d):(S=Rs(x.type,x.key,x.props,null,g.mode,S),S.ref=dr(g,d,x),S.return=g,g=S)}return l(g);case jn:e:{for(C=x.key;d!==null;){if(d.key===C)if(d.tag===4&&d.stateNode.containerInfo===x.containerInfo&&d.stateNode.implementation===x.implementation){n(g,d.sibling),d=s(d,x.children||[]),d.return=g,g=d;break e}else{n(g,d);break}else t(g,d);d=d.sibling}d=ui(x,g.mode,S),d.return=g,g=d}return l(g);case $t:return C=x._init,M(g,d,C(x._payload),S)}if(Nr(x))return v(g,d,x,S);if(ir(x))return h(g,d,x,S);vs(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,d!==null&&d.tag===6?(n(g,d.sibling),d=s(d,x),d.return=g,g=d):(n(g,d),d=oi(x,g.mode,S),d.return=g,g=d),l(g)):n(g,d)}return M}var Xn=qc(!0),Wc=qc(!1),na=on(null),ra=null,Un=null,Ol=null;function Dl(){Ol=Un=ra=null}function Ul(e){var t=na.current;ye(na),e._currentValue=t}function qi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Vn(e,t){ra=e,Ol=Un=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function pt(e){var t=e._currentValue;if(Ol!==e)if(e={context:e,memoizedValue:t,next:null},Un===null){if(ra===null)throw Error(L(308));Un=e,ra.dependencies={lanes:0,firstContext:e}}else Un=Un.next=e;return t}var hn=null;function Fl(e){hn===null?hn=[e]:hn.push(e)}function Kc(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Fl(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ut(e,r)}function Ut(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ht=!1;function Bl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function en(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ut(e,n)}return s=r.interleaved,s===null?(t.next=t,Fl(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ut(e,n)}function Ts(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,kl(e,n)}}function Xo(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var s=e.updateQueue;Ht=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var u=o,c=u.next;u.next=null,l===null?a=c:l.next=c,l=u;var m=e.alternate;m!==null&&(m=m.updateQueue,o=m.lastBaseUpdate,o!==l&&(o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=u))}if(a!==null){var f=s.baseState;l=0,m=c=u=null,o=a;do{var p=o.lane,N=o.eventTime;if((r&p)===p){m!==null&&(m=m.next={eventTime:N,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,h=o;switch(p=t,N=n,h.tag){case 1:if(v=h.payload,typeof v=="function"){f=v.call(N,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=h.payload,p=typeof v=="function"?v.call(N,f,p):v,p==null)break e;f=Ce({},f,p);break e;case 2:Ht=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else N={eventTime:N,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},m===null?(c=m=N,u=f):m=m.next=N,l|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(m===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);En|=l,e.lanes=l,e.memoizedState=f}}function Jo(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(L(191,s));s.call(r)}}}var as={},jt=on(as),Kr=on(as),Zr=on(as);function gn(e){if(e===as)throw Error(L(174));return e}function Gl(e,t){switch(ge(Zr,t),ge(Kr,e),ge(jt,as),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mi(t,e)}ye(jt),ge(jt,t)}function Jn(){ye(jt),ye(Kr),ye(Zr)}function Qc(e){gn(Zr.current);var t=gn(jt.current),n=Mi(t,e.type);t!==n&&(ge(Kr,e),ge(jt,n))}function zl(e){Kr.current===e&&(ye(jt),ye(Kr))}var Ee=on(0);function aa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ni=[];function $l(){for(var e=0;e<ni.length;e++)ni[e]._workInProgressVersionPrimary=null;ni.length=0}var js=Bt.ReactCurrentDispatcher,ri=Bt.ReactCurrentBatchConfig,wn=0,ke=null,Ae=null,Le=null,ia=!1,jr=!1,Qr=0,np=0;function ze(){throw Error(L(321))}function Hl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wt(e[n],t[n]))return!1;return!0}function Yl(e,t,n,r,s,a){if(wn=a,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,js.current=e===null||e.memoizedState===null?ip:lp,e=n(r,s),jr){a=0;do{if(jr=!1,Qr=0,25<=a)throw Error(L(301));a+=1,Le=Ae=null,t.updateQueue=null,js.current=op,e=n(r,s)}while(jr)}if(js.current=la,t=Ae!==null&&Ae.next!==null,wn=0,Le=Ae=ke=null,ia=!1,t)throw Error(L(300));return e}function Vl(){var e=Qr!==0;return Qr=0,e}function Ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ke.memoizedState=Le=e:Le=Le.next=e,Le}function ht(){if(Ae===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Ae.next;var t=Le===null?ke.memoizedState:Le.next;if(t!==null)Le=t,Ae=e;else{if(e===null)throw Error(L(310));Ae=e,e={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Le===null?ke.memoizedState=Le=e:Le=Le.next=e}return Le}function Xr(e,t){return typeof t=="function"?t(e):t}function si(e){var t=ht(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=Ae,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var o=l=null,u=null,c=a;do{var m=c.lane;if((wn&m)===m)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:m,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(o=u=f,l=r):u=u.next=f,ke.lanes|=m,En|=m}c=c.next}while(c!==null&&c!==a);u===null?l=r:u.next=o,wt(r,t.memoizedState)||(et=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,ke.lanes|=a,En|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ai(e){var t=ht(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do a=e(a,l.action),l=l.next;while(l!==s);wt(a,t.memoizedState)||(et=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Xc(){}function Jc(e,t){var n=ke,r=ht(),s=t(),a=!wt(r.memoizedState,s);if(a&&(r.memoizedState=s,et=!0),r=r.queue,ql(nd.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,Jr(9,td.bind(null,n,r,s,t),void 0,null),Oe===null)throw Error(L(349));wn&30||ed(n,t,s)}return s}function ed(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function td(e,t,n,r){t.value=n,t.getSnapshot=r,rd(t)&&sd(e)}function nd(e,t,n){return n(function(){rd(t)&&sd(e)})}function rd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wt(e,n)}catch{return!0}}function sd(e){var t=Ut(e,1);t!==null&&bt(t,e,1,-1)}function eu(e){var t=Ct();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:e},t.queue=e,e=e.dispatch=ap.bind(null,ke,e),[t.memoizedState,e]}function Jr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ad(){return ht().memoizedState}function Is(e,t,n,r){var s=Ct();ke.flags|=e,s.memoizedState=Jr(1|t,n,void 0,r===void 0?null:r)}function Ca(e,t,n,r){var s=ht();r=r===void 0?null:r;var a=void 0;if(Ae!==null){var l=Ae.memoizedState;if(a=l.destroy,r!==null&&Hl(r,l.deps)){s.memoizedState=Jr(t,n,a,r);return}}ke.flags|=e,s.memoizedState=Jr(1|t,n,a,r)}function tu(e,t){return Is(8390656,8,e,t)}function ql(e,t){return Ca(2048,8,e,t)}function id(e,t){return Ca(4,2,e,t)}function ld(e,t){return Ca(4,4,e,t)}function od(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ud(e,t,n){return n=n!=null?n.concat([e]):null,Ca(4,4,od.bind(null,t,e),n)}function Wl(){}function cd(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function dd(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fd(e,t,n){return wn&21?(wt(n,t)||(n=xc(),ke.lanes|=n,En|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=n)}function rp(e,t){var n=pe;pe=n!==0&&4>n?n:4,e(!0);var r=ri.transition;ri.transition={};try{e(!1),t()}finally{pe=n,ri.transition=r}}function md(){return ht().memoizedState}function sp(e,t,n){var r=nn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pd(e))hd(t,n);else if(n=Kc(e,t,n,r),n!==null){var s=We();bt(n,e,r,s),gd(n,t,r)}}function ap(e,t,n){var r=nn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pd(e))hd(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,n);if(s.hasEagerState=!0,s.eagerState=o,wt(o,l)){var u=t.interleaved;u===null?(s.next=s,Fl(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Kc(e,t,s,r),n!==null&&(s=We(),bt(n,e,r,s),gd(n,t,r))}}function pd(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function hd(e,t){jr=ia=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gd(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,kl(e,n)}}var la={readContext:pt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},ip={readContext:pt,useCallback:function(e,t){return Ct().memoizedState=[e,t===void 0?null:t],e},useContext:pt,useEffect:tu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Is(4194308,4,od.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Is(4194308,4,e,t)},useInsertionEffect:function(e,t){return Is(4,2,e,t)},useMemo:function(e,t){var n=Ct();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ct();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=sp.bind(null,ke,e),[r.memoizedState,e]},useRef:function(e){var t=Ct();return e={current:e},t.memoizedState=e},useState:eu,useDebugValue:Wl,useDeferredValue:function(e){return Ct().memoizedState=e},useTransition:function(){var e=eu(!1),t=e[0];return e=rp.bind(null,e[1]),Ct().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ke,s=Ct();if(be){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Oe===null)throw Error(L(349));wn&30||ed(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,tu(nd.bind(null,r,a,e),[e]),r.flags|=2048,Jr(9,td.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ct(),t=Oe.identifierPrefix;if(be){var n=Rt,r=Pt;n=(r&~(1<<32-St(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Qr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=np++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lp={readContext:pt,useCallback:cd,useContext:pt,useEffect:ql,useImperativeHandle:ud,useInsertionEffect:id,useLayoutEffect:ld,useMemo:dd,useReducer:si,useRef:ad,useState:function(){return si(Xr)},useDebugValue:Wl,useDeferredValue:function(e){var t=ht();return fd(t,Ae.memoizedState,e)},useTransition:function(){var e=si(Xr)[0],t=ht().memoizedState;return[e,t]},useMutableSource:Xc,useSyncExternalStore:Jc,useId:md,unstable_isNewReconciler:!1},op={readContext:pt,useCallback:cd,useContext:pt,useEffect:ql,useImperativeHandle:ud,useInsertionEffect:id,useLayoutEffect:ld,useMemo:dd,useReducer:ai,useRef:ad,useState:function(){return ai(Xr)},useDebugValue:Wl,useDeferredValue:function(e){var t=ht();return Ae===null?t.memoizedState=e:fd(t,Ae.memoizedState,e)},useTransition:function(){var e=ai(Xr)[0],t=ht().memoizedState;return[e,t]},useMutableSource:Xc,useSyncExternalStore:Jc,useId:md,unstable_isNewReconciler:!1};function vt(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Wi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ma={isMounted:function(e){return(e=e._reactInternals)?Mn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=We(),s=nn(e),a=Lt(r,s);a.payload=t,n!=null&&(a.callback=n),t=en(e,a,s),t!==null&&(bt(t,e,s,r),Ts(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=We(),s=nn(e),a=Lt(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=en(e,a,s),t!==null&&(bt(t,e,s,r),Ts(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=We(),r=nn(e),s=Lt(n,r);s.tag=2,t!=null&&(s.callback=t),t=en(e,s,r),t!==null&&(bt(t,e,r,n),Ts(t,e,r))}};function nu(e,t,n,r,s,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,l):t.prototype&&t.prototype.isPureReactComponent?!Yr(n,r)||!Yr(s,a):!0}function xd(e,t,n){var r=!1,s=an,a=t.contextType;return typeof a=="object"&&a!==null?a=pt(a):(s=nt(t)?Sn:Ye.current,r=t.contextTypes,a=(r=r!=null)?Zn(e,s):an),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ma,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function ru(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ma.enqueueReplaceState(t,t.state,null)}function Ki(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Bl(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=pt(a):(a=nt(t)?Sn:Ye.current,s.context=Zn(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Wi(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ma.enqueueReplaceState(s,s.state,null),sa(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function er(e,t){try{var n="",r=t;do n+=Of(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function ii(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Zi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var up=typeof WeakMap=="function"?WeakMap:Map;function vd(e,t,n){n=Lt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ua||(ua=!0,il=r),Zi(e,t)},n}function yd(e,t,n){n=Lt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Zi(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Zi(e,t),typeof r!="function"&&(tn===null?tn=new Set([this]):tn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function su(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new up;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=wp.bind(null,e,t,n),t.then(e,e))}function au(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Lt(-1,1),t.tag=2,en(n,t,1))),n.lanes|=1),e)}var cp=Bt.ReactCurrentOwner,et=!1;function qe(e,t,n,r){t.child=e===null?Wc(t,null,n,r):Xn(t,e.child,n,r)}function lu(e,t,n,r,s){n=n.render;var a=t.ref;return Vn(t,s),r=Yl(e,t,n,r,a,s),n=Vl(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ft(e,t,s)):(be&&n&&Pl(t),t.flags|=1,qe(e,t,r,s),t.child)}function ou(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!no(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Nd(e,t,a,r,s)):(e=Rs(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:Yr,n(l,r)&&e.ref===t.ref)return Ft(e,t,s)}return t.flags|=1,e=rn(a,r),e.ref=t.ref,e.return=t,t.child=e}function Nd(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(Yr(a,r)&&e.ref===t.ref)if(et=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,Ft(e,t,s)}return Qi(e,t,n,r,s)}function Sd(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Bn,st),st|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ge(Bn,st),st|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,ge(Bn,st),st|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,ge(Bn,st),st|=r;return qe(e,t,s,n),t.child}function bd(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qi(e,t,n,r,s){var a=nt(n)?Sn:Ye.current;return a=Zn(t,a),Vn(t,s),n=Yl(e,t,n,r,a,s),r=Vl(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ft(e,t,s)):(be&&r&&Pl(t),t.flags|=1,qe(e,t,n,s),t.child)}function uu(e,t,n,r,s){if(nt(n)){var a=!0;Js(t)}else a=!1;if(Vn(t,s),t.stateNode===null)_s(e,t),xd(t,n,r),Ki(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var u=l.context,c=n.contextType;typeof c=="object"&&c!==null?c=pt(c):(c=nt(n)?Sn:Ye.current,c=Zn(t,c));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==r||u!==c)&&ru(t,l,r,c),Ht=!1;var p=t.memoizedState;l.state=p,sa(t,r,l,s),u=t.memoizedState,o!==r||p!==u||tt.current||Ht?(typeof m=="function"&&(Wi(t,n,m,r),u=t.memoizedState),(o=Ht||nu(t,n,o,r,p,u,c))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),l.props=r,l.state=u,l.context=c,r=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Zc(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:vt(t.type,o),l.props=c,f=t.pendingProps,p=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=pt(u):(u=nt(n)?Sn:Ye.current,u=Zn(t,u));var N=n.getDerivedStateFromProps;(m=typeof N=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||p!==u)&&ru(t,l,r,u),Ht=!1,p=t.memoizedState,l.state=p,sa(t,r,l,s);var v=t.memoizedState;o!==f||p!==v||tt.current||Ht?(typeof N=="function"&&(Wi(t,n,N,r),v=t.memoizedState),(c=Ht||nu(t,n,c,r,p,v,u)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,v,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,v,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),l.props=r,l.state=v,l.context=u,r=c):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Xi(e,t,n,r,a,s)}function Xi(e,t,n,r,s,a){bd(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&Wo(t,n,!1),Ft(e,t,a);r=t.stateNode,cp.current=t;var o=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Xn(t,e.child,null,a),t.child=Xn(t,null,o,a)):qe(e,t,o,a),t.memoizedState=r.state,s&&Wo(t,n,!0),t.child}function wd(e){var t=e.stateNode;t.pendingContext?qo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qo(e,t.context,!1),Gl(e,t.containerInfo)}function cu(e,t,n,r,s){return Qn(),Ll(s),t.flags|=256,qe(e,t,n,r),t.child}var Ji={dehydrated:null,treeContext:null,retryLane:0};function el(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ed(e,t,n){var r=t.pendingProps,s=Ee.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ge(Ee,s&1),e===null)return Vi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Ia(l,r,0,null),e=vn(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=el(n),t.memoizedState=Ji,e):Kl(t,l));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return dp(e,t,l,r,o,s,n);if(a){a=r.fallback,l=t.mode,s=e.child,o=s.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=rn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?a=rn(o,a):(a=vn(a,l,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=e.child.memoizedState,l=l===null?el(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ji,r}return a=e.child,e=a.sibling,r=rn(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Kl(e,t){return t=Ia({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ys(e,t,n,r){return r!==null&&Ll(r),Xn(t,e.child,null,n),e=Kl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dp(e,t,n,r,s,a,l){if(n)return t.flags&256?(t.flags&=-257,r=ii(Error(L(422))),ys(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Ia({mode:"visible",children:r.children},s,0,null),a=vn(a,s,l,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Xn(t,e.child,null,l),t.child.memoizedState=el(l),t.memoizedState=Ji,a);if(!(t.mode&1))return ys(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(L(419)),r=ii(a,r,void 0),ys(e,t,l,r)}if(o=(l&e.childLanes)!==0,et||o){if(r=Oe,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Ut(e,s),bt(r,e,s,-1))}return to(),r=ii(Error(L(421))),ys(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ep.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,at=Jt(s.nextSibling),it=t,be=!0,Nt=null,e!==null&&(ct[dt++]=Pt,ct[dt++]=Rt,ct[dt++]=bn,Pt=e.id,Rt=e.overflow,bn=t),t=Kl(t,r.children),t.flags|=4096,t)}function du(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qi(e.return,t,n)}function li(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function kd(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(qe(e,t,r.children,n),r=Ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&du(e,n,t);else if(e.tag===19)du(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ge(Ee,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&aa(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),li(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&aa(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}li(t,!0,n,null,a);break;case"together":li(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _s(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ft(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),En|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=rn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=rn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fp(e,t,n){switch(t.tag){case 3:wd(t),Qn();break;case 5:Qc(t);break;case 1:nt(t.type)&&Js(t);break;case 4:Gl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ge(na,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ge(Ee,Ee.current&1),t.flags|=128,null):n&t.child.childLanes?Ed(e,t,n):(ge(Ee,Ee.current&1),e=Ft(e,t,n),e!==null?e.sibling:null);ge(Ee,Ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kd(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Ee,Ee.current),r)break;return null;case 22:case 23:return t.lanes=0,Sd(e,t,n)}return Ft(e,t,n)}var Cd,tl,Md,Td;Cd=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tl=function(){};Md=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,gn(jt.current);var a=null;switch(n){case"input":s=wi(e,s),r=wi(e,r),a=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),a=[];break;case"textarea":s=Ci(e,s),r=Ci(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Qs)}Ti(n,r);var l;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ur.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(o=s?.[c],r.hasOwnProperty(c)&&u!==o&&(u!=null||o!=null))if(c==="style")if(o){for(l in o)!o.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&o[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(a||(a=[]),a.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,o=o?o.__html:void 0,u!=null&&o!==u&&(a=a||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ur.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ve("scroll",e),a||o===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};Td=function(e,t,n,r){n!==r&&(t.flags|=4)};function fr(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function mp(e,t,n){var r=t.pendingProps;switch(Rl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return nt(t.type)&&Xs(),$e(t),null;case 3:return r=t.stateNode,Jn(),ye(tt),ye(Ye),$l(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Nt!==null&&(ul(Nt),Nt=null))),tl(e,t),$e(t),null;case 5:zl(t);var s=gn(Zr.current);if(n=t.type,e!==null&&t.stateNode!=null)Md(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(L(166));return $e(t),null}if(e=gn(jt.current),xs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Mt]=t,r[Wr]=a,e=(t.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<br.length;s++)ve(br[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":No(r,a),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ve("invalid",r);break;case"textarea":bo(r,a),ve("invalid",r)}Ti(n,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&gs(r.textContent,o,e),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&gs(r.textContent,o,e),s=["children",""+o]):Ur.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&ve("scroll",r)}switch(n){case"input":os(r),So(r,a,!0);break;case"textarea":os(r),wo(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Qs)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Mt]=t,e[Wr]=r,Cd(e,t,!1,!1),t.stateNode=e;e:{switch(l=ji(n,r),n){case"dialog":ve("cancel",e),ve("close",e),s=r;break;case"iframe":case"object":case"embed":ve("load",e),s=r;break;case"video":case"audio":for(s=0;s<br.length;s++)ve(br[s],e);s=r;break;case"source":ve("error",e),s=r;break;case"img":case"image":case"link":ve("error",e),ve("load",e),s=r;break;case"details":ve("toggle",e),s=r;break;case"input":No(e,r),s=wi(e,r),ve("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),ve("invalid",e);break;case"textarea":bo(e,r),s=Ci(e,r),ve("invalid",e);break;default:s=r}Ti(n,s),o=s;for(a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="style"?ac(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&rc(e,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fr(e,u):typeof u=="number"&&Fr(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ur.hasOwnProperty(a)?u!=null&&a==="onScroll"&&ve("scroll",e):u!=null&&yl(e,a,u,l))}switch(n){case"input":os(e),So(e,r,!1);break;case"textarea":os(e),wo(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sn(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?zn(e,!!r.multiple,a,!1):r.defaultValue!=null&&zn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Qs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $e(t),null;case 6:if(e&&t.stateNode!=null)Td(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(L(166));if(n=gn(Zr.current),gn(jt.current),xs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Mt]=t,(a=r.nodeValue!==n)&&(e=it,e!==null))switch(e.tag){case 3:gs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gs(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mt]=t,t.stateNode=r}return $e(t),null;case 13:if(ye(Ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(be&&at!==null&&t.mode&1&&!(t.flags&128))Vc(),Qn(),t.flags|=98560,a=!1;else if(a=xs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(L(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(L(317));a[Mt]=t}else Qn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$e(t),a=!1}else Nt!==null&&(ul(Nt),Nt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ee.current&1?Pe===0&&(Pe=3):to())),t.updateQueue!==null&&(t.flags|=4),$e(t),null);case 4:return Jn(),tl(e,t),e===null&&Vr(t.stateNode.containerInfo),$e(t),null;case 10:return Ul(t.type._context),$e(t),null;case 17:return nt(t.type)&&Xs(),$e(t),null;case 19:if(ye(Ee),a=t.memoizedState,a===null)return $e(t),null;if(r=(t.flags&128)!==0,l=a.rendering,l===null)if(r)fr(a,!1);else{if(Pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=aa(e),l!==null){for(t.flags|=128,fr(a,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ge(Ee,Ee.current&1|2),t.child}e=e.sibling}a.tail!==null&&je()>tr&&(t.flags|=128,r=!0,fr(a,!1),t.lanes=4194304)}else{if(!r)if(e=aa(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!be)return $e(t),null}else 2*je()-a.renderingStartTime>tr&&n!==1073741824&&(t.flags|=128,r=!0,fr(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=je(),t.sibling=null,n=Ee.current,ge(Ee,r?n&1|2:n&1),t):($e(t),null);case 22:case 23:return eo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?st&1073741824&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function pp(e,t){switch(Rl(t),t.tag){case 1:return nt(t.type)&&Xs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jn(),ye(tt),ye(Ye),$l(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return zl(t),null;case 13:if(ye(Ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));Qn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(Ee),null;case 4:return Jn(),null;case 10:return Ul(t.type._context),null;case 22:case 23:return eo(),null;case 24:return null;default:return null}}var Ns=!1,He=!1,hp=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Fn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){Me(e,t,r)}}var fu=!1;function gp(e,t){if(Fi=Ws,e=Pc(),Al(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,o=-1,u=-1,c=0,m=0,f=e,p=null;t:for(;;){for(var N;f!==n||s!==0&&f.nodeType!==3||(o=l+s),f!==a||r!==0&&f.nodeType!==3||(u=l+r),f.nodeType===3&&(l+=f.nodeValue.length),(N=f.firstChild)!==null;)p=f,f=N;for(;;){if(f===e)break t;if(p===n&&++c===s&&(o=l),p===a&&++m===r&&(u=l),(N=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=N}n=o===-1||u===-1?null:{start:o,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bi={focusedElem:e,selectionRange:n},Ws=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var h=v.memoizedProps,M=v.memoizedState,g=t.stateNode,d=g.getSnapshotBeforeUpdate(t.elementType===t.type?h:vt(t.type,h),M);g.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(S){Me(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return v=fu,fu=!1,v}function Ir(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&nl(t,n,a)}s=s.next}while(s!==r)}}function Ta(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jd(e){var t=e.alternate;t!==null&&(e.alternate=null,jd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mt],delete t[Wr],delete t[$i],delete t[Xm],delete t[Jm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Id(e){return e.tag===5||e.tag===3||e.tag===4}function mu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Id(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Qs));else if(r!==4&&(e=e.child,e!==null))for(sl(e,t,n),e=e.sibling;e!==null;)sl(e,t,n),e=e.sibling}function al(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(al(e,t,n),e=e.sibling;e!==null;)al(e,t,n),e=e.sibling}var Ue=null,yt=!1;function Gt(e,t,n){for(n=n.child;n!==null;)_d(e,t,n),n=n.sibling}function _d(e,t,n){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(Na,n)}catch{}switch(n.tag){case 5:He||Fn(n,t);case 6:var r=Ue,s=yt;Ue=null,Gt(e,t,n),Ue=r,yt=s,Ue!==null&&(yt?(e=Ue,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(yt?(e=Ue,n=n.stateNode,e.nodeType===8?ei(e.parentNode,n):e.nodeType===1&&ei(e,n),$r(e)):ei(Ue,n.stateNode));break;case 4:r=Ue,s=yt,Ue=n.stateNode.containerInfo,yt=!0,Gt(e,t,n),Ue=r,yt=s;break;case 0:case 11:case 14:case 15:if(!He&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&nl(n,t,l),s=s.next}while(s!==r)}Gt(e,t,n);break;case 1:if(!He&&(Fn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Me(n,t,o)}Gt(e,t,n);break;case 21:Gt(e,t,n);break;case 22:n.mode&1?(He=(r=He)||n.memoizedState!==null,Gt(e,t,n),He=r):Gt(e,t,n);break;default:Gt(e,t,n)}}function pu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hp),t.forEach(function(r){var s=kp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ue=o.stateNode,yt=!1;break e;case 3:Ue=o.stateNode.containerInfo,yt=!0;break e;case 4:Ue=o.stateNode.containerInfo,yt=!0;break e}o=o.return}if(Ue===null)throw Error(L(160));_d(a,l,s),Ue=null,yt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Me(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ad(t,e),t=t.sibling}function Ad(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xt(t,e),Et(e),r&4){try{Ir(3,e,e.return),Ta(3,e)}catch(h){Me(e,e.return,h)}try{Ir(5,e,e.return)}catch(h){Me(e,e.return,h)}}break;case 1:xt(t,e),Et(e),r&512&&n!==null&&Fn(n,n.return);break;case 5:if(xt(t,e),Et(e),r&512&&n!==null&&Fn(n,n.return),e.flags&32){var s=e.stateNode;try{Fr(s,"")}catch(h){Me(e,e.return,h)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,o=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&ec(s,a),ji(o,l);var c=ji(o,a);for(l=0;l<u.length;l+=2){var m=u[l],f=u[l+1];m==="style"?ac(s,f):m==="dangerouslySetInnerHTML"?rc(s,f):m==="children"?Fr(s,f):yl(s,m,f,c)}switch(o){case"input":Ei(s,a);break;case"textarea":tc(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var N=a.value;N!=null?zn(s,!!a.multiple,N,!1):p!==!!a.multiple&&(a.defaultValue!=null?zn(s,!!a.multiple,a.defaultValue,!0):zn(s,!!a.multiple,a.multiple?[]:"",!1))}s[Wr]=a}catch(h){Me(e,e.return,h)}}break;case 6:if(xt(t,e),Et(e),r&4){if(e.stateNode===null)throw Error(L(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(h){Me(e,e.return,h)}}break;case 3:if(xt(t,e),Et(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$r(t.containerInfo)}catch(h){Me(e,e.return,h)}break;case 4:xt(t,e),Et(e);break;case 13:xt(t,e),Et(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Xl=je())),r&4&&pu(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(He=(c=He)||m,xt(t,e),He=c):xt(t,e),Et(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!m&&e.mode&1)for(Y=e,m=e.child;m!==null;){for(f=Y=m;Y!==null;){switch(p=Y,N=p.child,p.tag){case 0:case 11:case 14:case 15:Ir(4,p,p.return);break;case 1:Fn(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(h){Me(r,n,h)}}break;case 5:Fn(p,p.return);break;case 22:if(p.memoizedState!==null){gu(f);continue}}N!==null?(N.return=p,Y=N):gu(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{s=f.stateNode,c?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,u=f.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,o.style.display=sc("display",l))}catch(h){Me(e,e.return,h)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(h){Me(e,e.return,h)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xt(t,e),Et(e),r&4&&pu(e);break;case 21:break;default:xt(t,e),Et(e)}}function Et(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Id(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fr(s,""),r.flags&=-33);var a=mu(e);al(e,a,s);break;case 3:case 4:var l=r.stateNode.containerInfo,o=mu(e);sl(e,o,l);break;default:throw Error(L(161))}}catch(u){Me(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xp(e,t,n){Y=e,Pd(e)}function Pd(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,a=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Ns;if(!l){var o=s.alternate,u=o!==null&&o.memoizedState!==null||He;o=Ns;var c=He;if(Ns=l,(He=u)&&!c)for(Y=s;Y!==null;)l=Y,u=l.child,l.tag===22&&l.memoizedState!==null?xu(s):u!==null?(u.return=l,Y=u):xu(s);for(;a!==null;)Y=a,Pd(a),a=a.sibling;Y=s,Ns=o,He=c}hu(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Y=a):hu(e)}}function hu(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:He||Ta(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!He)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:vt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Jo(t,a,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Jo(t,l,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var m=c.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&$r(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}He||t.flags&512&&rl(t)}catch(p){Me(t,t.return,p)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function gu(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function xu(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ta(4,t)}catch(u){Me(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){Me(t,s,u)}}var a=t.return;try{rl(t)}catch(u){Me(t,a,u)}break;case 5:var l=t.return;try{rl(t)}catch(u){Me(t,l,u)}}}catch(u){Me(t,t.return,u)}if(t===e){Y=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Y=o;break}Y=t.return}}var vp=Math.ceil,oa=Bt.ReactCurrentDispatcher,Zl=Bt.ReactCurrentOwner,mt=Bt.ReactCurrentBatchConfig,ue=0,Oe=null,Ie=null,Be=0,st=0,Bn=on(0),Pe=0,es=null,En=0,ja=0,Ql=0,_r=null,Je=null,Xl=0,tr=1/0,_t=null,ua=!1,il=null,tn=null,Ss=!1,Wt=null,ca=0,Ar=0,ll=null,As=-1,Ps=0;function We(){return ue&6?je():As!==-1?As:As=je()}function nn(e){return e.mode&1?ue&2&&Be!==0?Be&-Be:tp.transition!==null?(Ps===0&&(Ps=xc()),Ps):(e=pe,e!==0||(e=window.event,e=e===void 0?16:Ec(e.type)),e):1}function bt(e,t,n,r){if(50<Ar)throw Ar=0,ll=null,Error(L(185));ns(e,n,r),(!(ue&2)||e!==Oe)&&(e===Oe&&(!(ue&2)&&(ja|=n),Pe===4&&Vt(e,Be)),rt(e,r),n===1&&ue===0&&!(t.mode&1)&&(tr=je()+500,ka&&un()))}function rt(e,t){var n=e.callbackNode;tm(e,t);var r=qs(e,e===Oe?Be:0);if(r===0)n!==null&&Co(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Co(n),t===1)e.tag===0?ep(vu.bind(null,e)):$c(vu.bind(null,e)),Zm(function(){!(ue&6)&&un()}),n=null;else{switch(vc(r)){case 1:n=El;break;case 4:n=hc;break;case 16:n=Vs;break;case 536870912:n=gc;break;default:n=Vs}n=Gd(n,Rd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Rd(e,t){if(As=-1,Ps=0,ue&6)throw Error(L(327));var n=e.callbackNode;if(qn()&&e.callbackNode!==n)return null;var r=qs(e,e===Oe?Be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=da(e,r);else{t=r;var s=ue;ue|=2;var a=Od();(Oe!==e||Be!==t)&&(_t=null,tr=je()+500,xn(e,t));do try{Sp();break}catch(o){Ld(e,o)}while(!0);Dl(),oa.current=a,ue=s,Ie!==null?t=0:(Oe=null,Be=0,t=Pe)}if(t!==0){if(t===2&&(s=Ri(e),s!==0&&(r=s,t=ol(e,s))),t===1)throw n=es,xn(e,0),Vt(e,r),rt(e,je()),n;if(t===6)Vt(e,r);else{if(s=e.current.alternate,!(r&30)&&!yp(s)&&(t=da(e,r),t===2&&(a=Ri(e),a!==0&&(r=a,t=ol(e,a))),t===1))throw n=es,xn(e,0),Vt(e,r),rt(e,je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(L(345));case 2:mn(e,Je,_t);break;case 3:if(Vt(e,r),(r&130023424)===r&&(t=Xl+500-je(),10<t)){if(qs(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){We(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=zi(mn.bind(null,e,Je,_t),t);break}mn(e,Je,_t);break;case 4:if(Vt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-St(r);a=1<<l,l=t[l],l>s&&(s=l),r&=~a}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vp(r/1960))-r,10<r){e.timeoutHandle=zi(mn.bind(null,e,Je,_t),r);break}mn(e,Je,_t);break;case 5:mn(e,Je,_t);break;default:throw Error(L(329))}}}return rt(e,je()),e.callbackNode===n?Rd.bind(null,e):null}function ol(e,t){var n=_r;return e.current.memoizedState.isDehydrated&&(xn(e,t).flags|=256),e=da(e,t),e!==2&&(t=Je,Je=n,t!==null&&ul(t)),e}function ul(e){Je===null?Je=e:Je.push.apply(Je,e)}function yp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!wt(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vt(e,t){for(t&=~Ql,t&=~ja,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-St(t),r=1<<n;e[n]=-1,t&=~r}}function vu(e){if(ue&6)throw Error(L(327));qn();var t=qs(e,0);if(!(t&1))return rt(e,je()),null;var n=da(e,t);if(e.tag!==0&&n===2){var r=Ri(e);r!==0&&(t=r,n=ol(e,r))}if(n===1)throw n=es,xn(e,0),Vt(e,t),rt(e,je()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mn(e,Je,_t),rt(e,je()),null}function Jl(e,t){var n=ue;ue|=1;try{return e(t)}finally{ue=n,ue===0&&(tr=je()+500,ka&&un())}}function kn(e){Wt!==null&&Wt.tag===0&&!(ue&6)&&qn();var t=ue;ue|=1;var n=mt.transition,r=pe;try{if(mt.transition=null,pe=1,e)return e()}finally{pe=r,mt.transition=n,ue=t,!(ue&6)&&un()}}function eo(){st=Bn.current,ye(Bn)}function xn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Km(n)),Ie!==null)for(n=Ie.return;n!==null;){var r=n;switch(Rl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xs();break;case 3:Jn(),ye(tt),ye(Ye),$l();break;case 5:zl(r);break;case 4:Jn();break;case 13:ye(Ee);break;case 19:ye(Ee);break;case 10:Ul(r.type._context);break;case 22:case 23:eo()}n=n.return}if(Oe=e,Ie=e=rn(e.current,null),Be=st=t,Pe=0,es=null,Ql=ja=En=0,Je=_r=null,hn!==null){for(t=0;t<hn.length;t++)if(n=hn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var l=a.next;a.next=s,r.next=l}n.pending=r}hn=null}return e}function Ld(e,t){do{var n=Ie;try{if(Dl(),js.current=la,ia){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ia=!1}if(wn=0,Le=Ae=ke=null,jr=!1,Qr=0,Zl.current=null,n===null||n.return===null){Pe=1,es=t,Ie=null;break}e:{var a=e,l=n.return,o=n,u=t;if(t=Be,o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,m=o,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var N=au(l);if(N!==null){N.flags&=-257,iu(N,l,o,a,t),N.mode&1&&su(a,c,t),t=N,u=c;var v=t.updateQueue;if(v===null){var h=new Set;h.add(u),t.updateQueue=h}else v.add(u);break e}else{if(!(t&1)){su(a,c,t),to();break e}u=Error(L(426))}}else if(be&&o.mode&1){var M=au(l);if(M!==null){!(M.flags&65536)&&(M.flags|=256),iu(M,l,o,a,t),Ll(er(u,o));break e}}a=u=er(u,o),Pe!==4&&(Pe=2),_r===null?_r=[a]:_r.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=vd(a,u,t);Xo(a,g);break e;case 1:o=u;var d=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof d.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(tn===null||!tn.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=yd(a,o,t);Xo(a,S);break e}}a=a.return}while(a!==null)}Ud(n)}catch(E){t=E,Ie===n&&n!==null&&(Ie=n=n.return);continue}break}while(!0)}function Od(){var e=oa.current;return oa.current=la,e===null?la:e}function to(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Oe===null||!(En&268435455)&&!(ja&268435455)||Vt(Oe,Be)}function da(e,t){var n=ue;ue|=2;var r=Od();(Oe!==e||Be!==t)&&(_t=null,xn(e,t));do try{Np();break}catch(s){Ld(e,s)}while(!0);if(Dl(),ue=n,oa.current=r,Ie!==null)throw Error(L(261));return Oe=null,Be=0,Pe}function Np(){for(;Ie!==null;)Dd(Ie)}function Sp(){for(;Ie!==null&&!Vf();)Dd(Ie)}function Dd(e){var t=Bd(e.alternate,e,st);e.memoizedProps=e.pendingProps,t===null?Ud(e):Ie=t,Zl.current=null}function Ud(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=pp(n,t),n!==null){n.flags&=32767,Ie=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pe=6,Ie=null;return}}else if(n=mp(n,t,st),n!==null){Ie=n;return}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);Pe===0&&(Pe=5)}function mn(e,t,n){var r=pe,s=mt.transition;try{mt.transition=null,pe=1,bp(e,t,n,r)}finally{mt.transition=s,pe=r}return null}function bp(e,t,n,r){do qn();while(Wt!==null);if(ue&6)throw Error(L(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(nm(e,a),e===Oe&&(Ie=Oe=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ss||(Ss=!0,Gd(Vs,function(){return qn(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=mt.transition,mt.transition=null;var l=pe;pe=1;var o=ue;ue|=4,Zl.current=null,gp(e,n),Ad(n,e),zm(Bi),Ws=!!Fi,Bi=Fi=null,e.current=n,xp(n),qf(),ue=o,pe=l,mt.transition=a}else e.current=n;if(Ss&&(Ss=!1,Wt=e,ca=s),a=e.pendingLanes,a===0&&(tn=null),Zf(n.stateNode),rt(e,je()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ua)throw ua=!1,e=il,il=null,e;return ca&1&&e.tag!==0&&qn(),a=e.pendingLanes,a&1?e===ll?Ar++:(Ar=0,ll=e):Ar=0,un(),null}function qn(){if(Wt!==null){var e=vc(ca),t=mt.transition,n=pe;try{if(mt.transition=null,pe=16>e?16:e,Wt===null)var r=!1;else{if(e=Wt,Wt=null,ca=0,ue&6)throw Error(L(331));var s=ue;for(ue|=4,Y=e.current;Y!==null;){var a=Y,l=a.child;if(Y.flags&16){var o=a.deletions;if(o!==null){for(var u=0;u<o.length;u++){var c=o[u];for(Y=c;Y!==null;){var m=Y;switch(m.tag){case 0:case 11:case 15:Ir(8,m,a)}var f=m.child;if(f!==null)f.return=m,Y=f;else for(;Y!==null;){m=Y;var p=m.sibling,N=m.return;if(jd(m),m===c){Y=null;break}if(p!==null){p.return=N,Y=p;break}Y=N}}}var v=a.alternate;if(v!==null){var h=v.child;if(h!==null){v.child=null;do{var M=h.sibling;h.sibling=null,h=M}while(h!==null)}}Y=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,Y=l;else e:for(;Y!==null;){if(a=Y,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ir(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,Y=g;break e}Y=a.return}}var d=e.current;for(Y=d;Y!==null;){l=Y;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,Y=x;else e:for(l=d;Y!==null;){if(o=Y,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ta(9,o)}}catch(E){Me(o,o.return,E)}if(o===l){Y=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,Y=S;break e}Y=o.return}}if(ue=s,un(),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(Na,e)}catch{}r=!0}return r}finally{pe=n,mt.transition=t}}return!1}function yu(e,t,n){t=er(n,t),t=vd(e,t,1),e=en(e,t,1),t=We(),e!==null&&(ns(e,1,t),rt(e,t))}function Me(e,t,n){if(e.tag===3)yu(e,e,n);else for(;t!==null;){if(t.tag===3){yu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tn===null||!tn.has(r))){e=er(n,e),e=yd(t,e,1),t=en(t,e,1),e=We(),t!==null&&(ns(t,1,e),rt(t,e));break}}t=t.return}}function wp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=We(),e.pingedLanes|=e.suspendedLanes&n,Oe===e&&(Be&n)===n&&(Pe===4||Pe===3&&(Be&130023424)===Be&&500>je()-Xl?xn(e,0):Ql|=n),rt(e,t)}function Fd(e,t){t===0&&(e.mode&1?(t=ds,ds<<=1,!(ds&130023424)&&(ds=4194304)):t=1);var n=We();e=Ut(e,t),e!==null&&(ns(e,t,n),rt(e,n))}function Ep(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Fd(e,n)}function kp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(t),Fd(e,n)}var Bd;Bd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||tt.current)et=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return et=!1,fp(e,t,n);et=!!(e.flags&131072)}else et=!1,be&&t.flags&1048576&&Hc(t,ta,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;_s(e,t),e=t.pendingProps;var s=Zn(t,Ye.current);Vn(t,n),s=Yl(null,t,r,e,s,n);var a=Vl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(r)?(a=!0,Js(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bl(t),s.updater=Ma,t.stateNode=s,s._reactInternals=t,Ki(t,r,e,n),t=Xi(null,t,r,!0,a,n)):(t.tag=0,be&&a&&Pl(t),qe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(_s(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Mp(r),e=vt(r,e),s){case 0:t=Qi(null,t,r,e,n);break e;case 1:t=uu(null,t,r,e,n);break e;case 11:t=lu(null,t,r,e,n);break e;case 14:t=ou(null,t,r,vt(r.type,e),n);break e}throw Error(L(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:vt(r,s),Qi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:vt(r,s),uu(e,t,r,s,n);case 3:e:{if(wd(t),e===null)throw Error(L(387));r=t.pendingProps,a=t.memoizedState,s=a.element,Zc(e,t),sa(t,r,null,n);var l=t.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=er(Error(L(423)),t),t=cu(e,t,r,n,s);break e}else if(r!==s){s=er(Error(L(424)),t),t=cu(e,t,r,n,s);break e}else for(at=Jt(t.stateNode.containerInfo.firstChild),it=t,be=!0,Nt=null,n=Wc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qn(),r===s){t=Ft(e,t,n);break e}qe(e,t,r,n)}t=t.child}return t;case 5:return Qc(t),e===null&&Vi(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,l=s.children,Gi(r,s)?l=null:a!==null&&Gi(r,a)&&(t.flags|=32),bd(e,t),qe(e,t,l,n),t.child;case 6:return e===null&&Vi(t),null;case 13:return Ed(e,t,n);case 4:return Gl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xn(t,null,r,n):qe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:vt(r,s),lu(e,t,r,s,n);case 7:return qe(e,t,t.pendingProps,n),t.child;case 8:return qe(e,t,t.pendingProps.children,n),t.child;case 12:return qe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,l=s.value,ge(na,r._currentValue),r._currentValue=l,a!==null)if(wt(a.value,l)){if(a.children===s.children&&!tt.current){t=Ft(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var u=o.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=Lt(-1,n&-n),u.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var m=c.pending;m===null?u.next=u:(u.next=m.next,m.next=u),c.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),qi(a.return,n,t),o.lanes|=n;break}u=u.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(L(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),qi(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}qe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Vn(t,n),s=pt(s),r=r(s),t.flags|=1,qe(e,t,r,n),t.child;case 14:return r=t.type,s=vt(r,t.pendingProps),s=vt(r.type,s),ou(e,t,r,s,n);case 15:return Nd(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:vt(r,s),_s(e,t),t.tag=1,nt(r)?(e=!0,Js(t)):e=!1,Vn(t,n),xd(t,r,s),Ki(t,r,s,n),Xi(null,t,r,!0,e,n);case 19:return kd(e,t,n);case 22:return Sd(e,t,n)}throw Error(L(156,t.tag))};function Gd(e,t){return pc(e,t)}function Cp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ft(e,t,n,r){return new Cp(e,t,n,r)}function no(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Mp(e){if(typeof e=="function")return no(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Sl)return 11;if(e===bl)return 14}return 2}function rn(e,t){var n=e.alternate;return n===null?(n=ft(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rs(e,t,n,r,s,a){var l=2;if(r=e,typeof e=="function")no(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case In:return vn(n.children,s,a,t);case Nl:l=8,s|=8;break;case yi:return e=ft(12,n,t,s|2),e.elementType=yi,e.lanes=a,e;case Ni:return e=ft(13,n,t,s),e.elementType=Ni,e.lanes=a,e;case Si:return e=ft(19,n,t,s),e.elementType=Si,e.lanes=a,e;case Qu:return Ia(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ku:l=10;break e;case Zu:l=9;break e;case Sl:l=11;break e;case bl:l=14;break e;case $t:l=16,r=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=ft(l,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function vn(e,t,n,r){return e=ft(7,e,r,t),e.lanes=n,e}function Ia(e,t,n,r){return e=ft(22,e,r,t),e.elementType=Qu,e.lanes=n,e.stateNode={isHidden:!1},e}function oi(e,t,n){return e=ft(6,e,null,t),e.lanes=n,e}function ui(e,t,n){return t=ft(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Tp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$a(0),this.expirationTimes=$a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$a(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ro(e,t,n,r,s,a,l,o,u){return e=new Tp(e,t,n,o,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ft(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bl(a),e}function jp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zd(e){if(!e)return an;e=e._reactInternals;e:{if(Mn(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(nt(n))return zc(e,n,t)}return t}function $d(e,t,n,r,s,a,l,o,u){return e=ro(n,r,!0,e,s,a,l,o,u),e.context=zd(null),n=e.current,r=We(),s=nn(n),a=Lt(r,s),a.callback=t??null,en(n,a,s),e.current.lanes=s,ns(e,s,r),rt(e,r),e}function _a(e,t,n,r){var s=t.current,a=We(),l=nn(s);return n=zd(n),t.context===null?t.context=n:t.pendingContext=n,t=Lt(a,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=en(s,t,l),e!==null&&(bt(e,s,l,a),Ts(e,s,l)),l}function fa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function so(e,t){Nu(e,t),(e=e.alternate)&&Nu(e,t)}function Ip(){return null}var Hd=typeof reportError=="function"?reportError:function(e){console.error(e)};function ao(e){this._internalRoot=e}Aa.prototype.render=ao.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));_a(e,t,null,null)};Aa.prototype.unmount=ao.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kn(function(){_a(null,e,null,null)}),t[Dt]=null}};function Aa(e){this._internalRoot=e}Aa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yt.length&&t!==0&&t<Yt[n].priority;n++);Yt.splice(n,0,e),n===0&&wc(e)}};function io(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Su(){}function _p(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var c=fa(l);a.call(c)}}var l=$d(t,r,e,0,null,!1,!1,"",Su);return e._reactRootContainer=l,e[Dt]=l.current,Vr(e.nodeType===8?e.parentNode:e),kn(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=fa(u);o.call(c)}}var u=ro(e,0,!1,null,null,!1,!1,"",Su);return e._reactRootContainer=u,e[Dt]=u.current,Vr(e.nodeType===8?e.parentNode:e),kn(function(){_a(t,u,n,r)}),u}function Ra(e,t,n,r,s){var a=n._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var o=s;s=function(){var u=fa(l);o.call(u)}}_a(t,l,e,s)}else l=_p(n,t,e,s,r);return fa(l)}yc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sr(t.pendingLanes);n!==0&&(kl(t,n|1),rt(t,je()),!(ue&6)&&(tr=je()+500,un()))}break;case 13:kn(function(){var r=Ut(e,1);if(r!==null){var s=We();bt(r,e,1,s)}}),so(e,1)}};Cl=function(e){if(e.tag===13){var t=Ut(e,134217728);if(t!==null){var n=We();bt(t,e,134217728,n)}so(e,134217728)}};Nc=function(e){if(e.tag===13){var t=nn(e),n=Ut(e,t);if(n!==null){var r=We();bt(n,e,t,r)}so(e,t)}};Sc=function(){return pe};bc=function(e,t){var n=pe;try{return pe=e,t()}finally{pe=n}};_i=function(e,t,n){switch(t){case"input":if(Ei(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ea(r);if(!s)throw Error(L(90));Ju(r),Ei(r,s)}}}break;case"textarea":tc(e,n);break;case"select":t=n.value,t!=null&&zn(e,!!n.multiple,t,!1)}};oc=Jl;uc=kn;var Ap={usingClientEntryPoint:!1,Events:[ss,Rn,Ea,ic,lc,Jl]},mr={findFiberByHostInstance:pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Pp={bundleType:mr.bundleType,version:mr.version,rendererPackageName:mr.rendererPackageName,rendererConfig:mr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fc(e),e===null?null:e.stateNode},findFiberByHostInstance:mr.findFiberByHostInstance||Ip,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bs.isDisabled&&bs.supportsFiber)try{Na=bs.inject(Pp),Tt=bs}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ap;ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!io(t))throw Error(L(200));return jp(e,t,null,n)};ot.createRoot=function(e,t){if(!io(e))throw Error(L(299));var n=!1,r="",s=Hd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ro(e,1,!1,null,null,n,!1,r,s),e[Dt]=t.current,Vr(e.nodeType===8?e.parentNode:e),new ao(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=fc(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return kn(e)};ot.hydrate=function(e,t,n){if(!Pa(t))throw Error(L(200));return Ra(null,e,t,!0,n)};ot.hydrateRoot=function(e,t,n){if(!io(e))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",l=Hd;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=$d(t,null,e,1,n??null,s,!1,a,l),e[Dt]=t.current,Vr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Aa(t)};ot.render=function(e,t,n){if(!Pa(t))throw Error(L(200));return Ra(null,e,t,!1,n)};ot.unmountComponentAtNode=function(e){if(!Pa(e))throw Error(L(40));return e._reactRootContainer?(kn(function(){Ra(null,null,e,!1,function(){e._reactRootContainer=null,e[Dt]=null})}),!0):!1};ot.unstable_batchedUpdates=Jl;ot.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Pa(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return Ra(e,t,n,!1,r)};ot.version="18.3.1-next-f1338f8080-20240426";function Yd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yd)}catch(e){console.error(e)}}Yd(),Yu.exports=ot;var Rp=Yu.exports,bu=Rp;xi.createRoot=bu.createRoot,xi.hydrateRoot=bu.hydrateRoot;const wu=e=>{let t;const n=new Set,r=(c,m)=>{const f=typeof c=="function"?c(t):c;if(!Object.is(f,t)){const p=t;t=m??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(N=>N(t,p))}},s=()=>t,o={setState:r,getState:s,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=t=e(r,s,o);return o},Lp=e=>e?wu(e):wu,Op=e=>e;function Dp(e,t=Op){const n=vr.useSyncExternalStore(e.subscribe,vr.useCallback(()=>t(e.getState()),[e,t]),vr.useCallback(()=>t(e.getInitialState()),[e,t]));return vr.useDebugValue(n),n}const Eu=e=>{const t=Lp(e),n=r=>Dp(t,r);return Object.assign(n,t),n},Up=e=>e?Eu(e):Eu;function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ku(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oo(e,t,n){return t&&ku(e.prototype,t),n&&ku(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Fp=function(){function e(t){lo(this,e),this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=t}return oo(e,[{key:"size",get:function(){return this.map.size}},{key:"get",value:function(n){var r=this.map.get(n);if(r!==void 0)return r!==this.first&&(r===this.last?(this.last=r.prev,this.last.next=void 0):(r.prev.next=r.next,r.next.prev=r.prev),r.next=this.first,this.first.prev=r,this.first=r),r.value}},{key:"set",value:function(n,r){if(!(this.maxSize<1)){if(this.map.has(n))throw new Error("Cannot update existing keys in the cache");var s=new Bp(n,r);for(this.first===void 0?(this.first=s,this.last=s):(s.next=this.first,this.first.prev=s,this.first=s),this.map.set(n,s);this.map.size>this.maxSize;){var a=this.last;this.map.delete(a.key),this.last=a.prev,this.last.next=void 0}}}}]),e}(),Bp=oo(function e(t,n){lo(this,e),this.next=void 0,this.prev=void 0,this.key=t,this.value=n}),ci=17,De=9e15,Gp=Math.log10(9e15),cn=1/9e15,zp=308,$p=-324,Cu=5,Hp=1023,Yp=function(){for(var e=[],t=$p+1;t<=zp;t++)e.push(+("1e"+t));var n=323;return function(r){return e[r+n]}}(),dn=[2,Math.E,3,4,5,6,7,8,9,10],Vp=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],qp=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],j=function(t){return z.fromValue_noAlloc(t)},W=function(t,n,r){return z.fromComponents(t,n,r)},X=function(t,n,r){return z.fromComponents_noNormalize(t,n,r)},zt=function(t,n){var r=n+1,s=Math.ceil(Math.log10(Math.abs(t))),a=Math.round(t*Math.pow(10,r-s))*Math.pow(10,s-r);return parseFloat(a.toFixed(Math.max(r-s,0)))},di=function(t){return Math.sign(t)*Math.log10(Math.abs(t))},Wp=function(t){if(!isFinite(t))return t;if(t<-50)return t===Math.trunc(t)?Number.NEGATIVE_INFINITY:0;for(var n=1;t<10;)n=n*t,++t;t-=1;var r=.9189385332046727;r=r+(t+.5)*Math.log(t),r=r-t;var s=t*t,a=t;return r=r+1/(12*a),a=a*s,r=r-1/(360*a),a=a*s,r=r+1/(1260*a),a=a*s,r=r-1/(1680*a),a=a*s,r=r+1/(1188*a),a=a*s,r=r-691/(360360*a),a=a*s,r=r+7/(1092*a),a=a*s,r=r-3617/(122400*a),Math.exp(r)/n},Kp=.36787944117144233,Vd=.5671432904097838,fi=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-10,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s,a;if(!Number.isFinite(t))return t;if(r){if(t===0)return t;if(t===1)return Vd;t<10?s=0:s=Math.log(t)-Math.log(Math.log(t))}else{if(t===0)return-1/0;t<=-.1?s=-2:s=Math.log(-t)-Math.log(-Math.log(-t))}for(var l=0;l<100;++l){if(a=(t*Math.exp(-s)+s*s)/(s+1),Math.abs(a-s)<n*Math.abs(a))return a;s=a}throw Error("Iteration failed to converge: ".concat(t.toString()))};function Mu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-10,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r,s,a,l;if(!Number.isFinite(e.mag))return new z(e);if(n){if(e.eq(z.dZero))return X(0,0,0);if(e.eq(z.dOne))return z.fromNumber(Vd);r=z.ln(e)}else{if(e.eq(z.dZero))return new z(z.dNegInf);r=z.ln(e.neg())}for(var o=0;o<100;++o){if(s=r.neg().exp(),a=r.sub(e.mul(s)),l=r.sub(a.div(r.add(1).sub(r.add(2).mul(a).div(z.mul(2,r).add(2))))),z.abs(l.sub(r)).lt(z.abs(l).mul(t)))return l;r=l}throw Error("Iteration failed to converge: ".concat(e.toString()))}var z=function(){function e(t){lo(this,e),this.sign=0,this.mag=0,this.layer=0,t instanceof e?this.fromDecimal(t):typeof t=="number"?this.fromNumber(t):typeof t=="string"&&this.fromString(t)}return oo(e,[{key:"m",get:function(){if(this.sign===0)return 0;if(this.layer===0){var n=Math.floor(Math.log10(this.mag)),r;return this.mag===5e-324?r=5:r=this.mag/Yp(n),this.sign*r}else if(this.layer===1){var s=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,s)}else return this.sign},set:function(n){this.layer<=2?this.fromMantissaExponent(n,this.e):(this.sign=Math.sign(n),this.sign===0&&(this.layer=0,this.exponent=0))}},{key:"e",get:function(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY},set:function(n){this.fromMantissaExponent(this.m,n)}},{key:"s",get:function(){return this.sign},set:function(n){n===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=n}},{key:"mantissa",get:function(){return this.m},set:function(n){this.m=n}},{key:"exponent",get:function(){return this.e},set:function(n){this.e=n}},{key:"normalize",value:function(){if(this.sign===0||this.mag===0&&this.layer===0||this.mag===Number.NEGATIVE_INFINITY&&this.layer>0&&Number.isFinite(this.layer))return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY||this.mag===Number.NEGATIVE_INFINITY||this.layer===Number.NEGATIVE_INFINITY)return this.mag=Number.POSITIVE_INFINITY,this.layer=Number.POSITIVE_INFINITY,this;if(this.layer===0&&this.mag<cn)return this.layer+=1,this.mag=Math.log10(this.mag),this;var n=Math.abs(this.mag),r=Math.sign(this.mag);if(n>=De)return this.layer+=1,this.mag=r*Math.log10(n),this;for(;n<Gp&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=r*Math.pow(10,n),n=Math.abs(this.mag),r=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),(Number.isNaN(this.sign)||Number.isNaN(this.layer)||Number.isNaN(this.mag))&&(this.sign=Number.NaN,this.layer=Number.NaN,this.mag=Number.NaN),this}},{key:"fromComponents",value:function(n,r,s){return this.sign=n,this.layer=r,this.mag=s,this.normalize(),this}},{key:"fromComponents_noNormalize",value:function(n,r,s){return this.sign=n,this.layer=r,this.mag=s,this}},{key:"fromMantissaExponent",value:function(n,r){return this.layer=1,this.sign=Math.sign(n),n=Math.abs(n),this.mag=r+Math.log10(n),this.normalize(),this}},{key:"fromMantissaExponent_noNormalize",value:function(n,r){return this.fromMantissaExponent(n,r),this}},{key:"fromDecimal",value:function(n){return this.sign=n.sign,this.layer=n.layer,this.mag=n.mag,this}},{key:"fromNumber",value:function(n){return this.mag=Math.abs(n),this.sign=Math.sign(n),this.layer=0,this.normalize(),this}},{key:"fromString",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=n,a=e.fromStringCache.get(s);if(a!==void 0)return this.fromDecimal(a);if(n=n.replace(",",""),n.toLowerCase()==="nan")return this.fromDecimal(e.dNaN);if(n.toLowerCase()==="infinity")return this.fromDecimal(e.dInf);if(n.toLowerCase()==="-infinity")return this.fromDecimal(e.dNegInf);var l=n.split("^^^");if(l.length===2){var o=parseFloat(l[0]),u=parseFloat(l[1]),c=l[1].split(";"),m=1;if(c.length===2&&(m=parseFloat(c[1]),isFinite(m)||(m=1)),isFinite(o)&&isFinite(u)){var f=e.pentate(o,u,m,r);return this.sign=f.sign,this.layer=f.layer,this.mag=f.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),this}}var p=n.split("^^");if(p.length===2){var N=parseFloat(p[0]),v=parseFloat(p[1]),h=p[1].split(";"),M=1;if(h.length===2&&(M=parseFloat(h[1]),isFinite(M)||(M=1)),isFinite(N)&&isFinite(v)){var g=e.tetrate(N,v,M,r);return this.sign=g.sign,this.layer=g.layer,this.mag=g.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),this}}var d=n.split("^");if(d.length===2){var x=parseFloat(d[0]),S=parseFloat(d[1]);if(isFinite(x)&&isFinite(S)){var E=e.pow(x,S);return this.sign=E.sign,this.layer=E.layer,this.mag=E.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),this}}n=n.trim().toLowerCase();var C,T,k=n.split("pt");if(k.length===2){C=10;var K=!1;k[0][0]=="-"&&(K=!0,k[0]=k[0].slice(1)),T=parseFloat(k[0]),k[1]=k[1].replace("(",""),k[1]=k[1].replace(")","");var I=parseFloat(k[1]);if(isFinite(I)||(I=1),isFinite(C)&&isFinite(T)){var te=e.tetrate(C,T,I,r);return this.sign=te.sign,this.layer=te.layer,this.mag=te.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),K&&(this.sign*=-1),this}}if(k=n.split("p"),k.length===2){C=10;var Z=!1;k[0][0]=="-"&&(Z=!0,k[0]=k[0].slice(1)),T=parseFloat(k[0]),k[1]=k[1].replace("(",""),k[1]=k[1].replace(")","");var w=parseFloat(k[1]);if(isFinite(w)||(w=1),isFinite(C)&&isFinite(T)){var U=e.tetrate(C,T,w,r);return this.sign=U.sign,this.layer=U.layer,this.mag=U.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),Z&&(this.sign*=-1),this}}if(k=n.split("f"),k.length===2){C=10;var ee=!1;k[0][0]=="-"&&(ee=!0,k[0]=k[0].slice(1)),k[0]=k[0].replace("(",""),k[0]=k[0].replace(")","");var q=parseFloat(k[0]);if(k[1]=k[1].replace("(",""),k[1]=k[1].replace(")",""),T=parseFloat(k[1]),isFinite(q)||(q=1),isFinite(C)&&isFinite(T)){var ce=e.tetrate(C,T,q,r);return this.sign=ce.sign,this.layer=ce.layer,this.mag=ce.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),ee&&(this.sign*=-1),this}}var R=n.split("e"),B=R.length-1;if(B===0){var F=parseFloat(n);if(isFinite(F))return this.fromNumber(F),e.fromStringCache.size>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),this}else if(B===1){var A=parseFloat(n);if(isFinite(A)&&Math.abs(A)>1e-307)return this.fromNumber(A),e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),this}var ie=n.split("e^");if(ie.length===2){this.sign=1,ie[0].charAt(0)=="-"&&(this.sign=-1);for(var _e="",_=0;_<ie[1].length;++_){var P=ie[1].charCodeAt(_);if(P>=43&&P<=57||P===101)_e+=ie[1].charAt(_);else{if(this.layer=parseFloat(_e),this.mag=parseFloat(ie[1].substr(_+1)),this.layer<0||this.layer%1!=0){var V=e.tetrate(10,this.layer,this.mag,r);this.sign=V.sign,this.layer=V.layer,this.mag=V.mag}return this.normalize(),e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),this}}}if(B<1)return this.sign=0,this.layer=0,this.mag=0,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),this;var O=parseFloat(R[0]);if(O===0)return this.sign=0,this.layer=0,this.mag=0,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),this;var H=parseFloat(R[R.length-1]);if(B>=2){var Q=parseFloat(R[R.length-2]);isFinite(Q)&&(H*=Math.sign(Q),H+=di(Q))}if(!isFinite(O))this.sign=R[0]==="-"?-1:1,this.layer=B,this.mag=H;else if(B===1)this.sign=Math.sign(O),this.layer=1,this.mag=H+Math.log10(Math.abs(O));else if(this.sign=Math.sign(O),this.layer=B,B===2){var $=e.mul(W(1,2,H),j(O));return this.sign=$.sign,this.layer=$.layer,this.mag=$.mag,e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),this}else this.mag=H;return this.normalize(),e.fromStringCache.maxSize>=1&&e.fromStringCache.set(s,e.fromDecimal(this)),this}},{key:"fromValue",value:function(n){return n instanceof e?this.fromDecimal(n):typeof n=="number"?this.fromNumber(n):typeof n=="string"?this.fromString(n):(this.sign=0,this.layer=0,this.mag=0,this)}},{key:"toNumber",value:function(){return this.mag===Number.POSITIVE_INFINITY&&this.layer===Number.POSITIVE_INFINITY&&this.sign===1?Number.POSITIVE_INFINITY:this.mag===Number.POSITIVE_INFINITY&&this.layer===Number.POSITIVE_INFINITY&&this.sign===-1?Number.NEGATIVE_INFINITY:Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}},{key:"mantissaWithDecimalPlaces",value:function(n){return isNaN(this.m)?Number.NaN:this.m===0?0:zt(this.m,n)}},{key:"magnitudeWithDecimalPlaces",value:function(n){return isNaN(this.mag)?Number.NaN:this.mag===0?0:zt(this.mag,n)}},{key:"toString",value:function(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Cu?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}},{key:"toExponential",value:function(n){return this.layer===0?(this.sign*this.mag).toExponential(n):this.toStringWithDecimalPlaces(n)}},{key:"toFixed",value:function(n){return this.layer===0?(this.sign*this.mag).toFixed(n):this.toStringWithDecimalPlaces(n)}},{key:"toPrecision",value:function(n){return this.e<=-7?this.toExponential(n-1):n>this.e?this.toFixed(n-this.exponent-1):this.toExponential(n-1)}},{key:"valueOf",value:function(){return this.toString()}},{key:"toJSON",value:function(){return this.toString()}},{key:"toStringWithDecimalPlaces",value:function(n){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(n):zt(this.m,n)+"e"+zt(this.e,n):this.layer===1?zt(this.m,n)+"e"+zt(this.e,n):this.layer<=Cu?(this.sign===-1?"-":"")+"e".repeat(this.layer)+zt(this.mag,n):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+zt(this.mag,n)}},{key:"abs",value:function(){return X(this.sign===0?0:1,this.layer,this.mag)}},{key:"neg",value:function(){return X(-this.sign,this.layer,this.mag)}},{key:"negate",value:function(){return this.neg()}},{key:"negated",value:function(){return this.neg()}},{key:"sgn",value:function(){return this.sign}},{key:"round",value:function(){return this.mag<0?X(0,0,0):this.layer===0?W(this.sign,0,Math.round(this.mag)):new e(this)}},{key:"floor",value:function(){return this.mag<0?this.sign===-1?X(-1,0,1):X(0,0,0):this.sign===-1?this.neg().ceil().neg():this.layer===0?W(this.sign,0,Math.floor(this.mag)):new e(this)}},{key:"ceil",value:function(){return this.mag<0?this.sign===1?X(1,0,1):X(0,0,0):this.sign===-1?this.neg().floor().neg():this.layer===0?W(this.sign,0,Math.ceil(this.mag)):new e(this)}},{key:"trunc",value:function(){return this.mag<0?X(0,0,0):this.layer===0?W(this.sign,0,Math.trunc(this.mag)):new e(this)}},{key:"add",value:function(n){var r=j(n);if(this.eq(e.dInf)&&r.eq(e.dNegInf)||this.eq(e.dNegInf)&&r.eq(e.dInf))return new e(e.dNaN);if(!Number.isFinite(this.layer))return new e(this);if(!Number.isFinite(r.layer))return new e(r);if(this.sign===0)return new e(r);if(r.sign===0)return new e(this);if(this.sign===-r.sign&&this.layer===r.layer&&this.mag===r.mag)return X(0,0,0);var s,a;if(this.layer>=2||r.layer>=2)return this.maxabs(r);if(e.cmpabs(this,r)>0?(s=new e(this),a=new e(r)):(s=new e(r),a=new e(this)),s.layer===0&&a.layer===0)return e.fromNumber(s.sign*s.mag+a.sign*a.mag);var l=s.layer*Math.sign(s.mag),o=a.layer*Math.sign(a.mag);if(l-o>=2)return s;if(l===0&&o===-1){if(Math.abs(a.mag-Math.log10(s.mag))>ci)return s;var u=Math.pow(10,Math.log10(s.mag)-a.mag),c=a.sign+s.sign*u;return W(Math.sign(c),1,a.mag+Math.log10(Math.abs(c)))}if(l===1&&o===0){if(Math.abs(s.mag-Math.log10(a.mag))>ci)return s;var m=Math.pow(10,s.mag-Math.log10(a.mag)),f=a.sign+s.sign*m;return W(Math.sign(f),1,Math.log10(a.mag)+Math.log10(Math.abs(f)))}if(Math.abs(s.mag-a.mag)>ci)return s;var p=Math.pow(10,s.mag-a.mag),N=a.sign+s.sign*p;return W(Math.sign(N),1,a.mag+Math.log10(Math.abs(N)))}},{key:"plus",value:function(n){return this.add(n)}},{key:"sub",value:function(n){return this.add(j(n).neg())}},{key:"subtract",value:function(n){return this.sub(n)}},{key:"minus",value:function(n){return this.sub(n)}},{key:"mul",value:function(n){var r=j(n);if(this.eq(e.dInf)&&r.eq(e.dNegInf)||this.eq(e.dNegInf)&&r.eq(e.dInf))return new e(e.dNegInf);if(this.mag==Number.POSITIVE_INFINITY&&r.eq(e.dZero)||this.eq(e.dZero)&&this.mag==Number.POSITIVE_INFINITY)return new e(e.dNaN);if(this.eq(e.dNegInf)&&r.eq(e.dNegInf))return new e(e.dInf);if(!Number.isFinite(this.layer))return new e(this);if(!Number.isFinite(r.layer))return new e(r);if(this.sign===0||r.sign===0)return X(0,0,0);if(this.layer===r.layer&&this.mag===-r.mag)return X(this.sign*r.sign,0,1);var s,a;if(this.layer>r.layer||this.layer==r.layer&&Math.abs(this.mag)>Math.abs(r.mag)?(s=new e(this),a=new e(r)):(s=new e(r),a=new e(this)),s.layer===0&&a.layer===0)return e.fromNumber(s.sign*a.sign*s.mag*a.mag);if(s.layer>=3||s.layer-a.layer>=2)return W(s.sign*a.sign,s.layer,s.mag);if(s.layer===1&&a.layer===0)return W(s.sign*a.sign,1,s.mag+Math.log10(a.mag));if(s.layer===1&&a.layer===1)return W(s.sign*a.sign,1,s.mag+a.mag);if(s.layer===2&&a.layer===1){var l=W(Math.sign(s.mag),s.layer-1,Math.abs(s.mag)).add(W(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return W(s.sign*a.sign,l.layer+1,l.sign*l.mag)}if(s.layer===2&&a.layer===2){var o=W(Math.sign(s.mag),s.layer-1,Math.abs(s.mag)).add(W(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return W(s.sign*a.sign,o.layer+1,o.sign*o.mag)}throw Error("Bad arguments to mul: "+this+", "+n)}},{key:"multiply",value:function(n){return this.mul(n)}},{key:"times",value:function(n){return this.mul(n)}},{key:"div",value:function(n){var r=j(n);return this.mul(r.recip())}},{key:"divide",value:function(n){return this.div(n)}},{key:"divideBy",value:function(n){return this.div(n)}},{key:"dividedBy",value:function(n){return this.div(n)}},{key:"recip",value:function(){return this.mag===0?new e(e.dNaN):this.mag===Number.POSITIVE_INFINITY?X(0,0,0):this.layer===0?W(this.sign,0,1/this.mag):W(this.sign,this.layer,-this.mag)}},{key:"reciprocal",value:function(){return this.recip()}},{key:"reciprocate",value:function(){return this.recip()}},{key:"mod",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=j(n),a=s.abs();if(this.eq(e.dZero)||a.eq(e.dZero))return X(0,0,0);if(r){var l=this.abs().mod(a);return this.sign==-1!=(s.sign==-1)&&(l=s.abs().sub(l)),l.mul(s.sign)}var o=this.toNumber(),u=a.toNumber();return isFinite(o)&&isFinite(u)&&o!=0&&u!=0?new e(o%u):this.sub(a).eq(this)?X(0,0,0):a.sub(this).eq(a)?new e(this):this.sign==-1?this.abs().mod(a).neg():this.sub(this.div(a).floor().mul(a))}},{key:"modulo",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.mod(n,r)}},{key:"modular",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.mod(n,r)}},{key:"cmp",value:function(n){var r=j(n);return this.sign>r.sign?1:this.sign<r.sign?-1:this.sign*this.cmpabs(n)}},{key:"cmpabs",value:function(n){var r=j(n),s=this.mag>0?this.layer:-this.layer,a=r.mag>0?r.layer:-r.layer;return s>a?1:s<a?-1:this.mag>r.mag?1:this.mag<r.mag?-1:0}},{key:"compare",value:function(n){return this.cmp(n)}},{key:"isNan",value:function(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}},{key:"isFinite",value:function(t){function n(){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)})},{key:"eq",value:function(n){var r=j(n);return this.sign===r.sign&&this.layer===r.layer&&this.mag===r.mag}},{key:"equals",value:function(n){return this.eq(n)}},{key:"neq",value:function(n){return!this.eq(n)}},{key:"notEquals",value:function(n){return this.neq(n)}},{key:"lt",value:function(n){return this.cmp(n)===-1}},{key:"lte",value:function(n){return!this.gt(n)}},{key:"gt",value:function(n){return this.cmp(n)===1}},{key:"gte",value:function(n){return!this.lt(n)}},{key:"max",value:function(n){var r=j(n);return this.lt(r)?new e(r):new e(this)}},{key:"min",value:function(n){var r=j(n);return this.gt(r)?new e(r):new e(this)}},{key:"maxabs",value:function(n){var r=j(n);return this.cmpabs(r)<0?new e(r):new e(this)}},{key:"minabs",value:function(n){var r=j(n);return this.cmpabs(r)>0?new e(r):new e(this)}},{key:"clamp",value:function(n,r){return this.max(n).min(r)}},{key:"clampMin",value:function(n){return this.max(n)}},{key:"clampMax",value:function(n){return this.min(n)}},{key:"cmp_tolerance",value:function(n,r){var s=j(n);return this.eq_tolerance(s,r)?0:this.cmp(s)}},{key:"compare_tolerance",value:function(n,r){return this.cmp_tolerance(n,r)}},{key:"eq_tolerance",value:function(n,r){var s=j(n);if(r==null&&(r=1e-7),this.sign!==s.sign||Math.abs(this.layer-s.layer)>1)return!1;var a=this.mag,l=s.mag;return this.layer>s.layer&&(l=di(l)),this.layer<s.layer&&(a=di(a)),Math.abs(a-l)<=r*Math.max(Math.abs(a),Math.abs(l))}},{key:"equals_tolerance",value:function(n,r){return this.eq_tolerance(n,r)}},{key:"neq_tolerance",value:function(n,r){return!this.eq_tolerance(n,r)}},{key:"notEquals_tolerance",value:function(n,r){return this.neq_tolerance(n,r)}},{key:"lt_tolerance",value:function(n,r){var s=j(n);return!this.eq_tolerance(s,r)&&this.lt(s)}},{key:"lte_tolerance",value:function(n,r){var s=j(n);return this.eq_tolerance(s,r)||this.lt(s)}},{key:"gt_tolerance",value:function(n,r){var s=j(n);return!this.eq_tolerance(s,r)&&this.gt(s)}},{key:"gte_tolerance",value:function(n,r){var s=j(n);return this.eq_tolerance(s,r)||this.gt(s)}},{key:"pLog10",value:function(){return this.lt(e.dZero)?X(0,0,0):this.log10()}},{key:"absLog10",value:function(){return this.sign===0?new e(e.dNaN):this.layer>0?W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):W(1,0,Math.log10(this.mag))}},{key:"log10",value:function(){return this.sign<=0?new e(e.dNaN):this.layer>0?W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):W(this.sign,0,Math.log10(this.mag))}},{key:"log",value:function(n){return n=j(n),this.sign<=0?new e(e.dNaN):n.sign<=0?new e(e.dNaN):n.sign===1&&n.layer===0&&n.mag===1?new e(e.dNaN):this.layer===0&&n.layer===0?W(this.sign,0,Math.log(this.mag)/Math.log(n.mag)):e.div(this.log10(),n.log10())}},{key:"log2",value:function(){return this.sign<=0?new e(e.dNaN):this.layer===0?W(this.sign,0,Math.log2(this.mag)):this.layer===1?W(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?W(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:"ln",value:function(){return this.sign<=0?new e(e.dNaN):this.layer===0?W(this.sign,0,Math.log(this.mag)):this.layer===1?W(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?W(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):W(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:"logarithm",value:function(n){return this.log(n)}},{key:"pow",value:function(n){var r=j(n),s=new e(this),a=new e(r);if(s.sign===0)return a.eq(0)?X(1,0,1):s;if(s.sign===1&&s.layer===0&&s.mag===1)return s;if(a.sign===0)return X(1,0,1);if(a.sign===1&&a.layer===0&&a.mag===1)return s;var l=s.absLog10().mul(a).pow10();return this.sign===-1?Math.abs(a.toNumber()%2)%2===1?l.neg():Math.abs(a.toNumber()%2)%2===0?l:new e(e.dNaN):l}},{key:"pow10",value:function(){if(this.eq(e.dInf))return new e(e.dInf);if(this.eq(e.dNegInf))return X(0,0,0);if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return new e(e.dNaN);var n=new e(this);if(n.layer===0){var r=Math.pow(10,n.sign*n.mag);if(Number.isFinite(r)&&Math.abs(r)>=.1)return W(1,0,r);if(n.sign===0)return X(1,0,1);n=X(n.sign,n.layer+1,Math.log10(n.mag))}return n.sign>0&&n.mag>=0?W(n.sign,n.layer+1,n.mag):n.sign<0&&n.mag>=0?W(-n.sign,n.layer+1,-n.mag):X(1,0,1)}},{key:"pow_base",value:function(n){return j(n).pow(this)}},{key:"root",value:function(n){var r=j(n);return this.lt(0)&&r.mod(2,!0).eq(1)?this.neg().root(r).neg():this.pow(r.recip())}},{key:"factorial",value:function(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?e.exp(e.mul(this,e.ln(this).sub(1))):e.exp(this)}},{key:"gamma",value:function(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(X(1,0,24)))return e.fromNumber(Wp(this.sign*this.mag));var n=this.mag-1,r=.9189385332046727;r=r+(n+.5)*Math.log(n),r=r-n;var s=n*n,a=n,l=12*a,o=1/l,u=r+o;if(u===r||(r=u,a=a*s,l=360*a,o=1/l,u=r-o,u===r))return e.exp(r);r=u,a=a*s,l=1260*a;var c=1/l;return r=r+c,a=a*s,l=1680*a,c=1/l,r=r-c,e.exp(r)}else return this.layer===1?e.exp(e.mul(this,e.ln(this).sub(1))):e.exp(this)}},{key:"lngamma",value:function(){return this.gamma().ln()}},{key:"exp",value:function(){return this.mag<0?X(1,0,1):this.layer===0&&this.mag<=709.7?e.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?W(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?W(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):W(1,this.layer+1,this.sign*this.mag)}},{key:"sqr",value:function(){return this.pow(2)}},{key:"sqrt",value:function(){if(this.layer===0)return e.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return W(1,2,Math.log10(this.mag)-.3010299956639812);var n=e.div(X(this.sign,this.layer-1,this.mag),X(1,0,2));return n.layer+=1,n.normalize(),n}},{key:"cube",value:function(){return this.pow(3)}},{key:"cbrt",value:function(){return this.lt(0)?this.neg().pow(1/3).neg():this.pow(1/3)}},{key:"tetrate",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X(1,0,1),s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n===1)return e.pow(this,r);if(n===0)return new e(r);if(this.eq(e.dOne))return X(1,0,1);if(this.eq(-1))return e.pow(this,r);if(n===Number.POSITIVE_INFINITY){var a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){var l=e.ln(this).neg(),o=l.lambertw().div(l);if(a<1)return o;var u=l.lambertw(!1).div(l);return a>1.444667861009099&&(o=u=e.fromNumber(Math.E)),r=j(r),r.eq(u)?u:r.lt(u)?o:new e(e.dInf)}else return a>1.444667861009766?new e(e.dInf):new e(e.dNaN)}if(this.eq(e.dZero)){var c=Math.abs((n+1)%2);return c>1&&(c=2-c),e.fromNumber(c)}if(n<0)return e.iteratedlog(r,this,-n,s);r=new e(r);var m=n;n=Math.trunc(n);var f=m-n;if(this.gt(e.dZero)&&(this.lt(1)||this.lte(1.444667861009766)&&r.lte(e.ln(this).neg().lambertw(!1).div(e.ln(this).neg())))&&(m>1e4||!s)){var p=Math.min(1e4,n);r.eq(e.dOne)?r=this.pow(f):this.lt(1)?r=r.pow(1-f).mul(this.pow(r).pow(f)):r=r.layeradd(f,this);for(var N=0;N<p;++N){var v=r;if(r=this.pow(r),v.eq(r))return r}return m>1e4&&Math.ceil(m)%2==1?this.pow(r):r}f!==0&&(r.eq(e.dOne)?this.gt(10)||s?r=this.pow(f):(r=e.fromNumber(e.tetrate_critical(this.toNumber(),f)),this.lt(2)&&(r=r.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?r=r.layeradd10(f,s):this.lt(1)?r=r.pow(1-f).mul(this.pow(r).pow(f)):r=r.layeradd(f,this,s));for(var h=0;h<n;++h){if(r=this.pow(r),!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(r.layer-this.layer>3)return X(r.sign,r.layer+(n-h-1),r.mag);if(h>1e4)return r}return r}},{key:"iteratedexp",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X(1,0,1),s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.tetrate(n,r,s)}},{key:"iteratedlog",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r<0)return e.tetrate(n,-r,this,s);n=j(n);var a=e.fromDecimal(this),l=r;r=Math.trunc(r);var o=l-r;if(a.layer-n.layer>3){var u=Math.min(r,a.layer-n.layer-3);r-=u,a.layer-=u}for(var c=0;c<r;++c){if(a=a.log(n),!isFinite(a.layer)||!isFinite(a.mag))return a.normalize();if(c>1e4)return a}return o>0&&o<1&&(n.eq(10)?a=a.layeradd10(-o,s):a=a.layeradd(-o,n,s)),a}},{key:"slog",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=.001,l=!1,o=!1,u=this.slog_internal(n,s).toNumber(),c=1;c<r;++c){var m=new e(n).tetrate(u,e.dOne,s),f=m.gt(this);if(c>1&&o!=f&&(l=!0),o=f,l?a/=2:a*=2,a=Math.abs(a)*(f?-1:1),u+=a,a===0)break}return e.fromNumber(u)}},{key:"slog_internal",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n=j(n),n.lte(e.dZero))return new e(e.dNaN);if(n.eq(e.dOne))return new e(e.dNaN);if(n.lt(e.dOne))return this.eq(e.dOne)?X(0,0,0):this.eq(e.dZero)?X(-1,0,1):new e(e.dNaN);if(this.mag<0||this.eq(e.dZero))return X(-1,0,1);if(n.lt(1.444667861009766)){var s=e.ln(n).neg(),a=s.lambertw().div(s);if(this.eq(a))return new e(e.dInf);if(this.gt(a))return new e(e.dNaN)}var l=0,o=e.fromDecimal(this);if(o.layer-n.layer>3){var u=o.layer-n.layer-3;l+=u,o.layer-=u}for(var c=0;c<100;++c)if(o.lt(e.dZero))o=e.pow(n,o),l-=1;else{if(o.lte(e.dOne))return r?e.fromNumber(l+o.toNumber()-1):e.fromNumber(l+e.slog_critical(n.toNumber(),o.toNumber()));l+=1,o=e.log(o,n)}return e.fromNumber(l)}},{key:"layeradd10",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n=e.fromValue_noAlloc(n).toNumber();var s=e.fromDecimal(this);if(n>=1){s.mag<0&&s.layer>0?(s.sign=0,s.mag=0,s.layer=0):s.sign===-1&&s.layer==0&&(s.sign=1,s.mag=-s.mag);var a=Math.trunc(n);n-=a,s.layer+=a}if(n<=-1){var l=Math.trunc(n);if(n-=l,s.layer+=l,s.layer<0)for(var o=0;o<100;++o){if(s.layer++,s.mag=Math.log10(s.mag),!isFinite(s.mag))return s.sign===0&&(s.sign=1),s.layer<0&&(s.layer=0),s.normalize();if(s.layer>=0)break}}for(;s.layer<0;)s.layer++,s.mag=Math.log10(s.mag);return s.sign===0&&(s.sign=1,s.mag===0&&s.layer>=1&&(s.layer-=1,s.mag=1)),s.normalize(),n!==0?s.layeradd(n,10,r):s}},{key:"layeradd",value:function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=j(r);if(a.gt(1)&&a.lte(1.444667861009766)){var l=e.excess_slog(this,r,s),o=l[0].toNumber(),u=l[1],c=o+n,m=e.ln(r).neg(),f=m.lambertw().div(m),p=m.lambertw(!1).div(m),N=e.dOne;u==1?N=f.mul(p).sqrt():u==2&&(N=p.mul(2));var v=a.pow(N),h=Math.floor(c),M=c-h,g=N.pow(1-M).mul(v.pow(M));return e.tetrate(a,h,g,s)}var d=this.slog(r,100,s).toNumber(),x=d+n;return x>=0?e.tetrate(r,x,e.dOne,s):Number.isFinite(x)?x>=-1?e.log(e.tetrate(r,x+1,e.dOne,s),r):e.log(e.log(e.tetrate(r,x+2,e.dOne,s),r),r):new e(e.dNaN)}},{key:"lambertw",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.lt(-.3678794411710499)?new e(e.dNaN):n?this.abs().lt("1e-300")?new e(this):this.mag<0?e.fromNumber(fi(this.toNumber())):this.layer===0?e.fromNumber(fi(this.sign*this.mag)):this.lt("eee15")?Mu(this):this.ln():this.sign===1?new e(e.dNaN):this.layer===0?e.fromNumber(fi(this.sign*this.mag,1e-10,!1)):this.layer==1?Mu(this,1e-10,!1):this.neg().recip().lambertw().neg()}},{key:"ssqrt",value:function(){return this.linear_sroot(2)}},{key:"linear_sroot",value:function(n){if(n==1)return this;if(this.eq(e.dInf))return new e(e.dInf);if(!this.isFinite())return new e(e.dNaN);if(n>0&&n<1)return this.root(n);if(n>-2&&n<-1)return e.fromNumber(n).add(2).pow(this.recip());if(n<=0)return new e(e.dNaN);if(n==Number.POSITIVE_INFINITY){var r=this.toNumber();return r<Math.E&&r>Kp?this.pow(this.recip()):new e(e.dNaN)}if(this.eq(1))return X(1,0,1);if(this.lt(0))return new e(e.dNaN);if(this.lte("1ee-16"))return n%2==1?new e(this):new e(e.dNaN);if(this.gt(1)){var s=e.dTen;this.gte(e.tetrate(10,n,1,!0))&&(s=this.iteratedlog(10,n-1,!0)),n<=1&&(s=this.root(n));for(var a=e.dZero,l=s.layer,o=s.iteratedlog(10,l,!0),u=o,c=o.div(2),m=!0;m;)c=a.add(o).div(2),e.iteratedexp(10,l,c,!0).tetrate(n,1,!0).gt(this)?o=c:a=c,c.eq(u)?m=!1:u=c;return e.iteratedexp(10,l,c,!0)}else{for(var f=1,p=W(1,10,1),N=W(1,10,1),v=W(1,10,1),h=W(1,1,-16),M=e.dZero,g=W(1,10,1),d=h.pow10().recip(),x=e.dZero,S=d,E=d,C=Math.ceil(n)%2==0,T=0,k=W(1,10,1),K=!1,I=e.dZero,te=!1;f<4;){if(f==2){if(C)break;v=W(1,10,1),h=p,f=3,g=W(1,10,1),k=W(1,10,1)}for(K=!1;h.neq(v);){if(I=h,h.pow10().recip().tetrate(n,1,!0).eq(1)&&h.pow10().recip().lt(.4))d=h.pow10().recip(),S=h.pow10().recip(),E=h.pow10().recip(),x=e.dZero,T=-1,f==3&&(k=h);else if(h.pow10().recip().tetrate(n,1,!0).eq(h.pow10().recip())&&!C&&h.pow10().recip().lt(.4))d=h.pow10().recip(),S=h.pow10().recip(),E=h.pow10().recip(),x=e.dZero,T=0;else if(h.pow10().recip().tetrate(n,1,!0).eq(h.pow10().recip().mul(2).tetrate(n,1,!0)))d=h.pow10().recip(),S=e.dZero,E=d.mul(2),x=d,C?T=-1:T=0;else{for(M=h.mul(12e-17),d=h.pow10().recip(),S=h.add(M).pow10().recip(),x=d.sub(S),E=d.add(x);S.tetrate(n,1,!0).eq(d.tetrate(n,1,!0))||E.tetrate(n,1,!0).eq(d.tetrate(n,1,!0))||S.gte(d)||E.lte(d);)M=M.mul(2),S=h.add(M).pow10().recip(),x=d.sub(S),E=d.add(x);if((f==1&&E.tetrate(n,1,!0).gt(d.tetrate(n,1,!0))&&S.tetrate(n,1,!0).gt(d.tetrate(n,1,!0))||f==3&&E.tetrate(n,1,!0).lt(d.tetrate(n,1,!0))&&S.tetrate(n,1,!0).lt(d.tetrate(n,1,!0)))&&(k=h),E.tetrate(n,1,!0).lt(d.tetrate(n,1,!0)))T=-1;else if(C)T=1;else if(f==3&&h.gt_tolerance(p,1e-8))T=0;else{for(;S.tetrate(n,1,!0).eq_tolerance(d.tetrate(n,1,!0),1e-8)||E.tetrate(n,1,!0).eq_tolerance(d.tetrate(n,1,!0),1e-8)||S.gte(d)||E.lte(d);)M=M.mul(2),S=h.add(M).pow10().recip(),x=d.sub(S),E=d.add(x);E.tetrate(n,1,!0).sub(d.tetrate(n,1,!0)).lt(d.tetrate(n,1,!0).sub(S.tetrate(n,1,!0)))?T=0:T=1}}if(T==-1&&(te=!0),f==1&&T==1||f==3&&T!=0)if(v.eq(W(1,10,1)))h=h.mul(2);else{var Z=!1;if(K&&(T==1&&f==1||T==-1&&f==3)&&(Z=!0),h=h.add(v).div(2),Z)break}else if(v.eq(W(1,10,1)))v=h,h=h.div(2);else{var w=!1;if(K&&(T==1&&f==1||T==-1&&f==3)&&(w=!0),v=v.sub(g),h=h.sub(g),w)break}if(v.sub(h).div(2).abs().gt(g.mul(1.5))&&(K=!0),g=v.sub(h).div(2).abs(),h.gt("1e18")||h.eq(I))break}if(h.gt("1e18")||!te||k==W(1,10,1))break;f==1?p=k:f==3&&(N=k),f++}v=p,h=W(1,1,-18);for(var U=h,ee=e.dZero,q=!0;q;)if(v.eq(W(1,10,1))?ee=h.mul(2):ee=v.add(h).div(2),e.pow(10,ee).recip().tetrate(n,1,!0).gt(this)?h=ee:v=ee,ee.eq(U)?q=!1:U=ee,h.gt("1e18"))return new e(e.dNaN);if(ee.eq_tolerance(p,1e-15)){if(N.eq(W(1,10,1)))return new e(e.dNaN);for(v=W(1,10,1),h=N,U=h,ee=e.dZero,q=!0;q;)if(v.eq(W(1,10,1))?ee=h.mul(2):ee=v.add(h).div(2),e.pow(10,ee).recip().tetrate(n,1,!0).gt(this)?h=ee:v=ee,ee.eq(U)?q=!1:U=ee,h.gt("1e18"))return new e(e.dNaN);return ee.pow10().recip()}else return ee.pow10().recip()}}},{key:"pentate",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X(1,0,1),s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;r=new e(r);var a=n;n=Math.floor(n);var l=a-n,o=e.dZero,u=e.dZero;if(l!==0)if(r.eq(e.dOne))++n,r=e.fromNumber(l);else return this.pentate(r.penta_log(this,void 0,s).plus(a).toNumber(),1,s);if(n>0)for(var c=0;c<n;){if(u=o,o=r,r=this.tetrate(r.toNumber(),e.dOne,s),++c,this.gt(0)&&this.lte(1)&&r.gt(0)&&r.lte(1))return this.tetrate(n-c,r,s);if(r.eq(o)||r.eq(u)&&c%2==n%2||!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(c>1e4)return r}else for(var m=0;m<-n;++m){if(o=r,r=r.slog(this,void 0,s),r.eq(o)||!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(m>100)return r}return r}},{key:"penta_log",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(n=new e(n),n.lte(1))return new e(e.dNaN);if(this.eq(1))return X(0,0,0);if(this.eq(e.dInf))return new e(e.dInf);var a=new e(1),l=0,o=1;if(this.lt(-1)){if(this.lte(-2))return new e(e.dNaN);var u=n.tetrate(this.toNumber(),1,s);if(this.eq(u))return new e(e.dNegInf);if(this.gt(u))return new e(e.dNaN)}if(this.gt(1)){for(;a.lt(this);)if(l++,a=e.tetrate(n,a.toNumber(),1,s),l>1e3)return new e(e.dNaN)}else for(;a.gt(this);)if(l--,a=e.slog(a,n,s),l>100)return new e(e.dNaN);for(var c=1;c<r;++c){var m=n.pentate(l,e.dOne,s);if(m.eq(this))break;var f=m.gt(this);if(o=Math.abs(o)*(f?-1:1),l+=o,o/=2,o===0)break}return e.fromNumber(l)}},{key:"linear_penta_root",value:function(n){return n==1?this:n<0?new e(e.dNaN):this.eq(e.dInf)?new e(e.dInf):this.isFinite()?n>0&&n<1?this.root(n):this.eq(1)?X(1,0,1):this.lt(0)?new e(e.dNaN):this.lt(1)?this.linear_sroot(n):e.increasingInverse(function(r){return e.pentate(r,n,1,!0)})(this):new e(e.dNaN)}},{key:"sin",value:function(){return this.mag<0?new e(this):this.layer===0?e.fromNumber(Math.sin(this.sign*this.mag)):X(0,0,0)}},{key:"cos",value:function(){return this.mag<0?X(1,0,1):this.layer===0?e.fromNumber(Math.cos(this.sign*this.mag)):X(0,0,0)}},{key:"tan",value:function(){return this.mag<0?new e(this):this.layer===0?e.fromNumber(Math.tan(this.sign*this.mag)):X(0,0,0)}},{key:"asin",value:function(){return this.mag<0?new e(this):this.layer===0?e.fromNumber(Math.asin(this.sign*this.mag)):new e(e.dNaN)}},{key:"acos",value:function(){return this.mag<0?e.fromNumber(Math.acos(this.toNumber())):this.layer===0?e.fromNumber(Math.acos(this.sign*this.mag)):new e(e.dNaN)}},{key:"atan",value:function(){return this.mag<0?new e(this):this.layer===0?e.fromNumber(Math.atan(this.sign*this.mag)):e.fromNumber(Math.atan(this.sign*(1/0)))}},{key:"sinh",value:function(){return this.exp().sub(this.negate().exp()).div(2)}},{key:"cosh",value:function(){return this.exp().add(this.negate().exp()).div(2)}},{key:"tanh",value:function(){return this.sinh().div(this.cosh())}},{key:"asinh",value:function(){return e.ln(this.add(this.sqr().add(1).sqrt()))}},{key:"acosh",value:function(){return e.ln(this.add(this.sqr().sub(1).sqrt()))}},{key:"atanh",value:function(){return this.abs().gte(1)?new e(e.dNaN):e.ln(this.add(1).div(e.fromNumber(1).sub(this))).div(2)}},{key:"ascensionPenalty",value:function(n){return n===0?new e(this):this.root(e.pow(10,n))}},{key:"egg",value:function(){return this.add(9)}},{key:"lessThanOrEqualTo",value:function(n){return this.cmp(n)<1}},{key:"lessThan",value:function(n){return this.cmp(n)<0}},{key:"greaterThanOrEqualTo",value:function(n){return this.cmp(n)>-1}},{key:"greaterThan",value:function(n){return this.cmp(n)>0}}],[{key:"fromComponents",value:function(n,r,s){return new e().fromComponents(n,r,s)}},{key:"fromComponents_noNormalize",value:function(n,r,s){return new e().fromComponents_noNormalize(n,r,s)}},{key:"fromMantissaExponent",value:function(n,r){return new e().fromMantissaExponent(n,r)}},{key:"fromMantissaExponent_noNormalize",value:function(n,r){return new e().fromMantissaExponent_noNormalize(n,r)}},{key:"fromDecimal",value:function(n){return new e().fromDecimal(n)}},{key:"fromNumber",value:function(n){return new e().fromNumber(n)}},{key:"fromString",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new e().fromString(n,r)}},{key:"fromValue",value:function(n){return new e().fromValue(n)}},{key:"fromValue_noAlloc",value:function(n){if(n instanceof e)return n;if(typeof n=="string"){var r=e.fromStringCache.get(n);return r!==void 0?r:e.fromString(n)}else return typeof n=="number"?e.fromNumber(n):X(0,0,0)}},{key:"abs",value:function(n){return j(n).abs()}},{key:"neg",value:function(n){return j(n).neg()}},{key:"negate",value:function(n){return j(n).neg()}},{key:"negated",value:function(n){return j(n).neg()}},{key:"sign",value:function(n){return j(n).sign}},{key:"sgn",value:function(n){return j(n).sign}},{key:"round",value:function(n){return j(n).round()}},{key:"floor",value:function(n){return j(n).floor()}},{key:"ceil",value:function(n){return j(n).ceil()}},{key:"trunc",value:function(n){return j(n).trunc()}},{key:"add",value:function(n,r){return j(n).add(r)}},{key:"plus",value:function(n,r){return j(n).add(r)}},{key:"sub",value:function(n,r){return j(n).sub(r)}},{key:"subtract",value:function(n,r){return j(n).sub(r)}},{key:"minus",value:function(n,r){return j(n).sub(r)}},{key:"mul",value:function(n,r){return j(n).mul(r)}},{key:"multiply",value:function(n,r){return j(n).mul(r)}},{key:"times",value:function(n,r){return j(n).mul(r)}},{key:"div",value:function(n,r){return j(n).div(r)}},{key:"divide",value:function(n,r){return j(n).div(r)}},{key:"recip",value:function(n){return j(n).recip()}},{key:"reciprocal",value:function(n){return j(n).recip()}},{key:"reciprocate",value:function(n){return j(n).reciprocate()}},{key:"mod",value:function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return j(n).mod(r,s)}},{key:"modulo",value:function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return j(n).modulo(r,s)}},{key:"modular",value:function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return j(n).modular(r,s)}},{key:"cmp",value:function(n,r){return j(n).cmp(r)}},{key:"cmpabs",value:function(n,r){return j(n).cmpabs(r)}},{key:"compare",value:function(n,r){return j(n).cmp(r)}},{key:"isNaN",value:function(t){function n(r){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(t){return t=j(t),isNaN(t.sign)||isNaN(t.layer)||isNaN(t.mag)})},{key:"isFinite",value:function(t){function n(r){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(t){return t=j(t),isFinite(t.sign)&&isFinite(t.layer)&&isFinite(t.mag)})},{key:"eq",value:function(n,r){return j(n).eq(r)}},{key:"equals",value:function(n,r){return j(n).eq(r)}},{key:"neq",value:function(n,r){return j(n).neq(r)}},{key:"notEquals",value:function(n,r){return j(n).notEquals(r)}},{key:"lt",value:function(n,r){return j(n).lt(r)}},{key:"lte",value:function(n,r){return j(n).lte(r)}},{key:"gt",value:function(n,r){return j(n).gt(r)}},{key:"gte",value:function(n,r){return j(n).gte(r)}},{key:"max",value:function(n,r){return j(n).max(r)}},{key:"min",value:function(n,r){return j(n).min(r)}},{key:"minabs",value:function(n,r){return j(n).minabs(r)}},{key:"maxabs",value:function(n,r){return j(n).maxabs(r)}},{key:"clamp",value:function(n,r,s){return j(n).clamp(r,s)}},{key:"clampMin",value:function(n,r){return j(n).clampMin(r)}},{key:"clampMax",value:function(n,r){return j(n).clampMax(r)}},{key:"cmp_tolerance",value:function(n,r,s){return j(n).cmp_tolerance(r,s)}},{key:"compare_tolerance",value:function(n,r,s){return j(n).cmp_tolerance(r,s)}},{key:"eq_tolerance",value:function(n,r,s){return j(n).eq_tolerance(r,s)}},{key:"equals_tolerance",value:function(n,r,s){return j(n).eq_tolerance(r,s)}},{key:"neq_tolerance",value:function(n,r,s){return j(n).neq_tolerance(r,s)}},{key:"notEquals_tolerance",value:function(n,r,s){return j(n).notEquals_tolerance(r,s)}},{key:"lt_tolerance",value:function(n,r,s){return j(n).lt_tolerance(r,s)}},{key:"lte_tolerance",value:function(n,r,s){return j(n).lte_tolerance(r,s)}},{key:"gt_tolerance",value:function(n,r,s){return j(n).gt_tolerance(r,s)}},{key:"gte_tolerance",value:function(n,r,s){return j(n).gte_tolerance(r,s)}},{key:"pLog10",value:function(n){return j(n).pLog10()}},{key:"absLog10",value:function(n){return j(n).absLog10()}},{key:"log10",value:function(n){return j(n).log10()}},{key:"log",value:function(n,r){return j(n).log(r)}},{key:"log2",value:function(n){return j(n).log2()}},{key:"ln",value:function(n){return j(n).ln()}},{key:"logarithm",value:function(n,r){return j(n).logarithm(r)}},{key:"pow",value:function(n,r){return j(n).pow(r)}},{key:"pow10",value:function(n){return j(n).pow10()}},{key:"root",value:function(n,r){return j(n).root(r)}},{key:"factorial",value:function(n,r){return j(n).factorial()}},{key:"gamma",value:function(n,r){return j(n).gamma()}},{key:"lngamma",value:function(n,r){return j(n).lngamma()}},{key:"exp",value:function(n){return j(n).exp()}},{key:"sqr",value:function(n){return j(n).sqr()}},{key:"sqrt",value:function(n){return j(n).sqrt()}},{key:"cube",value:function(n){return j(n).cube()}},{key:"cbrt",value:function(n){return j(n).cbrt()}},{key:"tetrate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:X(1,0,1),a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return j(n).tetrate(r,s,a)}},{key:"iteratedexp",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:X(1,0,1),a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return j(n).iteratedexp(r,s,a)}},{key:"iteratedlog",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return j(n).iteratedlog(r,s,a)}},{key:"layeradd10",value:function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return j(n).layeradd10(r,s)}},{key:"layeradd",value:function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return j(n).layeradd(r,s,a)}},{key:"slog",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return j(n).slog(r,100,s)}},{key:"lambertw",value:function(n,r){return j(n).lambertw(r)}},{key:"ssqrt",value:function(n){return j(n).ssqrt()}},{key:"linear_sroot",value:function(n,r){return j(n).linear_sroot(r)}},{key:"pentate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:X(1,0,1),a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return j(n).pentate(r,s,a)}},{key:"penta_log",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return j(n).penta_log(r,100,s)}},{key:"linear_penta_root",value:function(n,r){return j(n).linear_penta_root(r)}},{key:"sin",value:function(n){return j(n).sin()}},{key:"cos",value:function(n){return j(n).cos()}},{key:"tan",value:function(n){return j(n).tan()}},{key:"asin",value:function(n){return j(n).asin()}},{key:"acos",value:function(n){return j(n).acos()}},{key:"atan",value:function(n){return j(n).atan()}},{key:"sinh",value:function(n){return j(n).sinh()}},{key:"cosh",value:function(n){return j(n).cosh()}},{key:"tanh",value:function(n){return j(n).tanh()}},{key:"asinh",value:function(n){return j(n).asinh()}},{key:"acosh",value:function(n){return j(n).acosh()}},{key:"atanh",value:function(n){return j(n).atanh()}},{key:"affordGeometricSeries",value:function(n,r,s,a){return this.affordGeometricSeries_core(j(n),j(r),j(s),a)}},{key:"sumGeometricSeries",value:function(n,r,s,a){return this.sumGeometricSeries_core(n,j(r),j(s),a)}},{key:"affordArithmeticSeries",value:function(n,r,s,a){return this.affordArithmeticSeries_core(j(n),j(r),j(s),j(a))}},{key:"sumArithmeticSeries",value:function(n,r,s,a){return this.sumArithmeticSeries_core(j(n),j(r),j(s),j(a))}},{key:"efficiencyOfPurchase",value:function(n,r,s){return this.efficiencyOfPurchase_core(j(n),j(r),j(s))}},{key:"randomDecimalForTesting",value:function(n){if(Math.random()*20<1)return X(0,0,0);var r=Math.random()>.5?1:-1;if(Math.random()*20<1)return X(r,0,1);var s=Math.floor(Math.random()*(n+1)),a=s===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(a=Math.trunc(a));var l=Math.pow(10,a);return Math.random()>.9&&(l=Math.trunc(l)),W(r,s,l)}},{key:"affordGeometricSeries_core",value:function(n,r,s,a){var l=r.mul(s.pow(a));return e.floor(n.div(l).mul(s.sub(1)).add(1).log10().div(s.log10()))}},{key:"sumGeometricSeries_core",value:function(n,r,s,a){return r.mul(s.pow(a)).mul(e.sub(1,s.pow(n))).div(e.sub(1,s))}},{key:"affordArithmeticSeries_core",value:function(n,r,s,a){var l=r.add(a.mul(s)),o=l.sub(s.div(2)),u=o.pow(2);return o.neg().add(u.add(s.mul(n).mul(2)).sqrt()).div(s).floor()}},{key:"sumArithmeticSeries_core",value:function(n,r,s,a){var l=r.add(a.mul(s));return n.div(2).mul(l.mul(2).plus(n.sub(1).mul(s)))}},{key:"efficiencyOfPurchase_core",value:function(n,r,s){return n.div(r).add(n.div(s))}},{key:"slog_critical",value:function(n,r){return n>10?r-1:e.critical_section(n,r,qp)}},{key:"tetrate_critical",value:function(n,r){return e.critical_section(n,r,Vp)}},{key:"critical_section",value:function(n,r,s){r*=10,r<0&&(r=0),r>10&&(r=10),n<2&&(n=2),n>10&&(n=10);for(var a=0,l=0,o=0;o<dn.length;++o)if(dn[o]==n){a=s[o][Math.floor(r)],l=s[o][Math.ceil(r)];break}else if(dn[o]<n&&dn[o+1]>n){var u=(n-dn[o])/(dn[o+1]-dn[o]);a=s[o][Math.floor(r)]*(1-u)+s[o+1][Math.floor(r)]*u,l=s[o][Math.ceil(r)]*(1-u)+s[o+1][Math.ceil(r)]*u;break}var c=r-Math.floor(r);return a<=0||l<=0?a*(1-c)+l*c:Math.pow(n,Math.log(a)/Math.log(n)*(1-c)+Math.log(l)/Math.log(n)*c)}},{key:"excess_slog",value:function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;n=j(n),r=j(r);var a=r;if(r=r.toNumber(),r==1||r<=0)return[new e(e.dNaN),0];if(r>1.444667861009766)return[n.slog(r,100,s),0];var l=e.ln(r).neg(),o=l.lambertw().div(l),u=e.dInf;if(r>1&&(u=l.lambertw(!1).div(l)),r>1.444667861009099&&(o=u=e.fromNumber(Math.E)),n.lt(o))return[n.slog(r,100,s),0];if(n.eq(o))return[new e(e.dInf),0];if(n.eq(u))return[new e(e.dNegInf),2];if(n.gt(u)){var c=u.mul(2),m=a.pow(c),f=0;if(n.gte(c)&&n.lt(m))f=0;else if(n.gte(m)){var p=m;for(f=1;p.lt(n);)if(p=a.pow(p),f=f+1,p.layer>3){var N=Math.floor(n.layer-p.layer+1);p=a.iteratedexp(N,p,s),f=f+N}p.gt(n)&&(p=p.log(r),f=f-1)}else if(n.lt(c)){var v=c;for(f=0;v.gt(n);)v=v.log(r),f=f-1}for(var h=0,M=0,g=.5,d=c,x=e.dZero;g>1e-16;){if(M=h+g,d=c.pow(1-M).mul(m.pow(M)),x=e.iteratedexp(r,f,d),x.eq(n))return[new e(f+M),2];x.lt(n)&&(h+=g),g/=2}return x.neq_tolerance(n,1e-7)?[new e(e.dNaN),0]:[new e(f+h),2]}if(n.lt(u)&&n.gt(o)){var S=o.mul(u).sqrt(),E=a.pow(S),C=0;if(n.lte(S)&&n.gt(E))C=0;else if(n.lte(E)){var T=E;for(C=1;T.gt(n);)T=a.pow(T),C=C+1;T.lt(n)&&(T=T.log(r),C=C-1)}else if(n.gt(S)){var k=S;for(C=0;k.lt(n);)k=k.log(r),C=C-1}for(var K=0,I=0,te=.5,Z=S,w=e.dZero;te>1e-16;){if(I=K+te,Z=S.pow(1-I).mul(E.pow(I)),w=e.iteratedexp(r,C,Z),w.eq(n))return[new e(C+I),1];w.gt(n)&&(K+=te),te/=2}return w.neq_tolerance(n,1e-7)?[new e(e.dNaN),0]:[new e(C+K),1]}throw new Error("Unhandled behavior in excess_slog")}},{key:"increasingInverse",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:120,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e.dLayerMax.neg(),l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:e.dLayerMax,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e.dLayerMax.neg(),u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:e.dLayerMax;return function(c){if(c=new e(c),a=new e(a),l=new e(l),o=new e(o),u=new e(u),c.isNan()||l.lt(a)||c.lt(o)||c.gt(u))return new e(e.dNaN);var m=function(J){return new e(J)},f=!0;if(l.lt(0))f=!1;else if(a.gt(0))f=!0;else{var p=n(e.dZero);if(p.eq(c))return X(0,0,0);f=c.gt(p),r&&(f=!f)}var N=f,v;if(f){if(l.lt(cn))f=!0;else if(a.gt(cn))f=!1;else{var h=n(new e(cn));f=c.lt(h),r&&(f=!f)}if(f){v=!0;var M=e.pow(10,De).recip();if(l.lt(M))f=!1;else if(a.gt(M))f=!0;else{var g=n(new e(M));f=c.gt(g),r&&(f=!f)}if(f)m=function(J){return e.pow(10,J).recip()};else{var d=e.tetrate(10,De);if(l.lt(d))f=!1;else if(a.gt(d))f=!0;else{var x=n(new e(d));f=c.gt(x),r&&(f=!f)}f?m=function(J){return e.tetrate(10,new e(J).toNumber()).recip()}:m=function(J){return new e(J).gt(Math.log10(Number.MAX_VALUE))?e.dZero:e.tetrate(10,e.pow(10,J).toNumber()).recip()}}}else{if(v=!1,l.lt(De))f=!0;else if(a.gt(De))f=!1;else{var S=n(new e(De));f=c.lt(S),r&&(f=!f)}if(f)m=function(J){return new e(J)};else{var E=e.pow(10,De);if(l.lt(E))f=!0;else if(a.gt(E))f=!1;else{var C=n(new e(E));f=c.lt(C),r&&(f=!f)}if(f)m=function(J){return e.pow(10,J)};else{var T=e.tetrate(10,De);if(l.lt(T))f=!0;else if(a.gt(T))f=!1;else{var k=n(new e(T));f=c.lt(k),r&&(f=!f)}f?m=function(J){return e.tetrate(10,new e(J).toNumber())}:m=function(J){return new e(J).gt(Math.log10(Number.MAX_VALUE))?e.dInf:e.tetrate(10,e.pow(10,J).toNumber())}}}}}else{if(v=!0,l.lt(-cn))f=!1;else if(a.gt(-cn))f=!0;else{var K=n(new e(-cn));f=c.gt(K),r&&(f=!f)}if(f){var I=e.pow(10,De).recip().neg();if(l.lt(I))f=!0;else if(a.gt(I))f=!1;else{var te=n(new e(I));f=c.lt(te),r&&(f=!f)}if(f)m=function(J){return e.pow(10,J).recip().neg()};else{var Z=e.tetrate(10,De).neg();if(l.lt(Z))f=!0;else if(a.gt(Z))f=!1;else{var w=n(new e(Z));f=c.lt(w),r&&(f=!f)}f?m=function(J){return e.tetrate(10,new e(J).toNumber()).recip().neg()}:m=function(J){return new e(J).gt(Math.log10(Number.MAX_VALUE))?e.dZero:e.tetrate(10,e.pow(10,J).toNumber()).recip().neg()}}}else{if(v=!1,l.lt(-De))f=!1;else if(a.gt(-De))f=!0;else{var U=n(new e(-De));f=c.gt(U),r&&(f=!f)}if(f)m=function(J){return e.neg(J)};else{var ee=e.pow(10,De).neg();if(l.lt(ee))f=!1;else if(a.gt(ee))f=!0;else{var q=n(new e(ee));f=c.gt(q),r&&(f=!f)}if(f)m=function(J){return e.pow(10,J).neg()};else{var ce=e.tetrate(10,De).neg();if(l.lt(ce))f=!1;else if(a.gt(ce))f=!0;else{var R=n(new e(ce));f=c.gt(R),r&&(f=!f)}f?m=function(J){return e.tetrate(10,new e(J).toNumber()).neg()}:m=function(J){return new e(J).gt(Math.log10(Number.MAX_VALUE))?e.dNegInf:e.tetrate(10,e.pow(10,J).toNumber()).neg()}}}}}for(var B=N!=v!=r,F=B?function(G,J){return e.gt(G,J)}:function(G,J){return e.lt(G,J)},A=.001,ie=!1,_e=!1,_=1,P=e.dOne,V=0,O=!1,H=1;H<s;++H){O=!1,V=_,P=m(_),P.gt(l)&&(P=l,O=!0),P.lt(a)&&(P=a,O=!0);var Q=n(P);if(Q.eq(c)&&!O)break;var $=F(Q,c);if(H>1&&_e!=$&&(ie=!0),_e=$,ie?A/=2:A*=2,$!=B&&P.eq(l)||$==B&&P.eq(a))return new e(e.dNaN);if(A=Math.abs(A)*($?-1:1),_+=A,A===0||V==_)break}return m(_)}}}]),e}();z.dZero=X(0,0,0);z.dOne=X(1,0,1);z.dNegOne=X(-1,0,1);z.dTwo=X(1,0,2);z.dTen=X(1,0,10);z.dNaN=X(Number.NaN,Number.NaN,Number.NaN);z.dInf=X(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);z.dNegInf=X(-1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);z.dNumberMax=W(1,0,Number.MAX_VALUE);z.dNumberMin=W(1,0,Number.MIN_VALUE);z.dLayerSafeMax=W(1,Number.MAX_SAFE_INTEGER,De-1);z.dLayerSafeMin=W(1,Number.MAX_SAFE_INTEGER,-8999999999999999);z.dLayerMax=W(1,Number.MAX_VALUE,De-1);z.dLayerMin=W(1,Number.MAX_VALUE,-8999999999999999);z.fromStringCache=new Fp(Hp);j=z.fromValue_noAlloc;W=z.fromComponents;X=z.fromComponents_noNormalize;z.fromMantissaExponent;z.fromMantissaExponent_noNormalize;const Zp={TIERS:8,COMBAT_UNLOCK_COST:2e13,MERGE_UNLOCK_MANA:1e45,ASCENSION_TAB_UNLOCK:"1e45",ASCENSION_COST:"1e165",MERGE_BASE_COST:"1e45",MERGE_COST_SCALING:1e3,MERGE_GRID_SIZE:3,BASE_REVIVE_TIME:31},qd=[10,1e5,1e9,1e15,1e24,1e36,1e48,1e60],Qp=(e,t)=>({baseCost:qd[e-1]*(t==="yield"?10:1),costScaling:2,boost:t==="speed"?.1:.025,maxLevel:40}),Xp=[10,100,1e3,1e6,1e9,1e12,1e15,1e18,1e21,1e24,1e27,1e30,1e33,1e36,1e39,1e42,1e45,1e48,"1e60","1e70","1e80","1e90","1e100","1e150","1e200","1e250","1e300","1e500","1e1000","1e2000","1e3000","1e5000","1e10000"],Jp={UPGRADE_BASE_COSTS:qd,getUpgradeConfig:Qp,FOUNDRY_COSTS:Xp},eh={COMBAT_UPGRADE_CONFIGS:{hp:{baseCost:1e13,costScaling:2,effect:1.1,maxLevel:40},damage:{baseCost:1e14,costScaling:2,effect:1.1,maxLevel:40},attackSpeed:{baseCost:1e15,costScaling:3,effect:1.05,maxLevel:20},reviveSpeed:{baseCost:1e18,costScaling:10,effect:2,maxLevel:10}},CORE_UPGRADE_CONFIGS:{craftingSpeed:{baseCost:10,costScaling:10,effect:.2,maxLevel:1/0},manaBoost:{baseCost:10,costScaling:1.5,effect:1.2,maxLevel:1/0},yield:{baseCost:100,costScaling:10,effect:.1,maxLevel:1/0},craftingSlots:{baseCost:100,costScaling:100,effect:1,maxLevel:3}},BASE_PLAYER_STATS:{maxHp:20,damageMin:3,damageMax:6,attackTime:5},BASE_ENEMY_STATS:{baseHp:15,baseDamageMin:3,baseDamageMax:5,baseAttackTime:6,hpScaling:1.2,damageScaling:1.1,attackSpeedScaling:1.02,dropScaling:1.25}},cl="1e27",th=[{id:"global-speed",x:0,y:0,name:"Speed Boost (free)",description:"2x global crafting speed",maxLevel:1,costs:[0]},{id:"keep-prism",x:1,y:0,name:"Prism Memory",description:"Keep highest tier prism per level",maxLevel:7,baseCost:10,costScaling:5},{id:"prism-power",x:2,y:0,name:"Prism Power",description:"+0.1x prism effectiveness per level (additive)",maxLevel:10,baseCost:100,costScaling:1.5},{id:"merge-grid",x:3,y:0,name:"Merge Grid Size",description:"+1 merge grid row and column per level",maxLevel:1,baseCost:500,costScaling:50},{id:"merge-level",x:4,y:0,name:"Merge Level",description:"Gems spawn +1 level higher per level",maxLevel:1,baseCost:1e5,costScaling:100},{id:"keep-artifact",x:0,y:1,name:"Artifact Memory",description:"Keep highest tier artifact per level",maxLevel:3,baseCost:10,costScaling:5},{id:"combat-cap",x:0,y:2,name:"Combat Mastery",description:"+1 max level for combat mana upgrades per level",maxLevel:5,baseCost:10,costScaling:2},{id:"bonus-cores",x:1,y:2,name:"Bonus Cores",description:"+0.5x energy core drops per level (additive)",maxLevel:10,baseCost:100,costScaling:2},{id:"t1-boost",x:-1,y:0,name:"T1 Mastery",description:"1.2x T1 speed, 1.05x yield per level",maxLevel:10,baseCost:5,costScaling:3},{id:"t2-boost",x:-2,y:0,name:"T2 Mastery",description:"1.2x T2 speed, 1.05x yield per level",maxLevel:10,baseCost:15,costScaling:3},{id:"t3-boost",x:-2,y:-1,name:"T3 Mastery",description:"1.2x T3 speed, 1.05x yield per level",maxLevel:10,baseCost:45,costScaling:3},{id:"t4-boost",x:-2,y:1,name:"T4 Mastery",description:"1.2x T4 speed, 1.05x yield per level",maxLevel:10,baseCost:135,costScaling:3},{id:"t5-boost",x:-3,y:0,name:"T5 Mastery",description:"1.2x T5 speed, 1.05x yield per level",maxLevel:10,baseCost:405,costScaling:3},{id:"t6-boost",x:-4,y:0,name:"T6 Mastery",description:"1.2x T6 speed, 1.05x yield per level",maxLevel:10,baseCost:1215,costScaling:3},{id:"t7-boost",x:-3,y:-1,name:"T7 Mastery",description:"1.2x T7 speed, 1.05x yield per level",maxLevel:10,baseCost:3645,costScaling:3},{id:"t8-boost",x:-3,y:1,name:"T8 Mastery",description:"1.2x T8 speed, 1.05x yield per level",maxLevel:10,baseCost:10935,costScaling:3},{id:"extra-slots",x:0,y:-1,name:"Foundry Expansion",description:"+1 starting foundry slot per level",maxLevel:3,costs:[5,10,100]},{id:"gem-cap",x:0,y:-2,name:"Gem Mastery",description:"+2 max level for gem speed/yield upgrades per level",maxLevel:10,baseCost:20,costScaling:1.5}],nh=[{count:1,name:"Unlock Mastery",description:"Unlocks the Mastery system",tooltip:"Mastery lets you collect shards from gem crafting to gain permanent bonuses."},{count:2,name:"T1-T2 Automation",description:"Auto-buy T1 & T2 upgrades (free)",tooltip:"Automatically buys Speed and Yield upgrades for T1 and T2 gems when you can afford them, without spending mana."},{count:3,name:"T3-T4 Automation",description:"Auto-buy T3 & T4 upgrades (free)",tooltip:"Automatically buys Speed and Yield upgrades for T3 and T4 gems when you can afford them, without spending mana."},{count:4,name:"Auto Combat",description:"Auto-unlock & upgrades",tooltip:"Automatically unlocks combat (spends 20T mana) and auto-buys combat upgrades (HP, Damage, Attack Speed, Revive Speed) when you can afford them, without spending mana."},{count:5,name:"Break Singularity",description:`Remove ${cl} mana cap`,tooltip:`Mana is no longer capped at ${cl}. Gain more SP per singularity based on how far past the cap you go.`},{count:7,name:"T5-T6 Automation",description:"Auto-buy T5 & T6 upgrades (free)",tooltip:"Automatically buys Speed and Yield upgrades for T5 and T6 gems when you can afford them, without spending mana."},{count:10,name:"T7-T8 Automation",description:"Auto-buy T7 & T8 upgrades (free)",tooltip:"Automatically buys Speed and Yield upgrades for T7 and T8 gems when you can afford them, without spending mana."},{count:15,name:"SP Boost",description:"+50% SP gain",tooltip:"All singularity point gains are increased by 50%."},{count:20,name:"Combat Veteran",description:"+5 combat upgrade caps",tooltip:"Raises maximum level for HP, Damage, and Attack Speed by 5. Revive Speed caps at 15 (instant revive)."},{count:25,name:"Swift Crafting",description:"2x craft speed",tooltip:"All crafting speed is doubled."},{count:30,name:"Grid Expansion",description:"+1 merge grid size",tooltip:"Adds an extra row and column to the merge grid."},{count:35,name:"Core Automation",description:"Auto-buy core upgrades (free)",tooltip:"Automatically buys energy core upgrades when you can afford them, without spending energy cores."},{count:40,name:"Foundry Automation",description:"Auto-buy foundry slots (free)",tooltip:"Automatically buys new foundry slots when you can afford them, without spending mana."},{count:50,name:"Merge Automation",description:"Auto-spawn merge gems (free)",tooltip:"Automatically spawns merge gems when you can afford them, without spending mana."}],rh={T1_T2:2,T3_T4:3,T5_T6:7,T7_T8:10,COMBAT:4,CORE_UPGRADES:35,FOUNDRY:40,MERGE:50,BREAK_SINGULARITY:5,SP_BOOST:15,COMBAT_VETERAN:20,SWIFT_CRAFTING:25,GRID_EXPANSION:30},sh={SINGULARITY_NODES:th,SINGULARITY_MILESTONES:nh,AUTOMATION_THRESHOLDS:rh,COUNT_INCREMENT:1,SP_MULTIPLIER:1,SINGULARITY_THRESHOLD:cl,SP_BASE:10,SP_OOM_SCALING:1.1},ah={shardsPerLevel:10,shardSpeedBonus:.2,shardYieldBonus:.05,maxLevel:20,tierBonuses:[{type:"globalSpeed",value:.1},{type:"prismEffectiveness",value:.05},{type:"energyCoreDrops",value:.5},{type:"globalYield",value:.05},{type:"singularityPoints",value:.2},{type:"globalSpeed",value:.2},{type:"artifactEffectiveness",value:.2},{type:"globalYield",value:.1}],shardDropDivisors:[1e5,1e7,1e10,1e14,1e19,1e25,1e32,1e40,1e49,1e59,1e70,1e82,1e95,1e109,1e124,1e140,1e157,1e175,1e194,1e214]},ih=[{craftTime:1,cost:null,manaPerSec:.01,multiplier:0,unlockAtCrafted:null,description:"Generates 0.01 mana/sec"},{craftTime:10,cost:{tier:1,amount:10},manaPerSec:0,multiplier:.2,unlockAtCrafted:{tier:1,amount:100},description:"+20% mana multiplier"},{craftTime:30,cost:{tier:2,amount:10},manaPerSec:0,multiplier:.4,unlockAtCrafted:{tier:2,amount:100},description:"+40% mana multiplier"},{craftTime:60,cost:{tier:3,amount:10},manaPerSec:0,multiplier:.6,unlockAtCrafted:{tier:3,amount:100},description:"+60% mana multiplier"},{craftTime:120,cost:{tier:4,amount:10},manaPerSec:0,multiplier:.8,unlockAtCrafted:{tier:4,amount:100},description:"+80% mana multiplier"},{craftTime:240,cost:{tier:5,amount:10},manaPerSec:0,multiplier:1,unlockAtCrafted:{tier:5,amount:100},description:"+100% mana multiplier"},{craftTime:480,cost:{tier:6,amount:10},manaPerSec:0,multiplier:1.2,unlockAtCrafted:{tier:6,amount:100},description:"+120% mana multiplier"},{craftTime:960,cost:{tier:7,amount:10},manaPerSec:0,multiplier:1.4,unlockAtCrafted:{tier:7,amount:100},description:"+140% mana multiplier"}],lh=[{id:"basic",tier:1,name:"Basic Prism",chunks:10,chunkTime:30,chunkCost:[{tier:1,amount:100},{tier:2,amount:10}],bonuses:{tiers:[1,2],speedMult:2,yieldMult:1.5},description:"2x speed, 1.5x yield for T1-T2"},{id:"t2",tier:2,name:"T2 Prism",chunks:20,chunkTime:60,chunkCost:[{tier:1,amount:2e3},{tier:2,amount:200},{tier:3,amount:20}],bonuses:{tiers:[1,2,3],speedMult:2,yieldMult:1.5},description:"2x speed, 1.5x yield for T1-T3"},{id:"t3",tier:3,name:"T3 Prism",chunks:30,chunkTime:90,chunkCost:[{tier:1,amount:3e4},{tier:2,amount:3e3},{tier:3,amount:300},{tier:4,amount:30}],bonuses:{tiers:[1,2,3,4],speedMult:2,yieldMult:1.5},description:"2x speed, 1.5x yield for T1-T4"},{id:"t4",tier:4,name:"T4 Prism",chunks:50,chunkTime:120,chunkCost:[{tier:1,amount:5e5},{tier:2,amount:5e4},{tier:3,amount:5e3},{tier:4,amount:500},{tier:5,amount:50}],bonuses:{tiers:[1,2,3,4,5],speedMult:2,yieldMult:1.5},description:"2x speed, 1.5x yield for T1-T5"},{id:"t5",tier:5,name:"T5 Prism",chunks:100,chunkTime:180,chunkCost:[{tier:1,amount:1e7},{tier:2,amount:1e6},{tier:3,amount:1e5},{tier:4,amount:1e4},{tier:5,amount:1e3},{tier:6,amount:100}],bonuses:{tiers:[1,2,3,4,5,6],speedMult:2,yieldMult:1.5},description:"2x speed, 1.5x yield for T1-T6"},{id:"t6",tier:6,name:"T6 Prism",chunks:200,chunkTime:300,chunkCost:[{tier:1,amount:2e8},{tier:2,amount:2e7},{tier:3,amount:2e6},{tier:4,amount:2e5},{tier:5,amount:2e4},{tier:6,amount:2e3},{tier:7,amount:200}],bonuses:{tiers:[1,2,3,4,5,6,7],speedMult:2,yieldMult:1.5},description:"2x speed, 1.5x yield for T1-T7"},{id:"t7",tier:7,name:"T7 Prism",chunks:500,chunkTime:500,chunkCost:[{tier:1,amount:1e10},{tier:2,amount:1e9},{tier:3,amount:1e8},{tier:4,amount:1e7},{tier:5,amount:1e6},{tier:6,amount:1e5},{tier:7,amount:1e4},{tier:8,amount:1e3}],bonuses:{tiers:[1,2,3,4,5,6,7,8],speedMult:2,yieldMult:1.5},description:"2x speed, 1.5x yield for T1-T8"}],oh=[{id:"t1-shield",name:"T1 Shield",icon:"t1_shield.png",cycles:60,cycleTime:60,cycleCost:{energyCores:10,gems:[{tier:1,amount:1e4},{tier:2,amount:1e3},{tier:3,amount:100},{tier:4,amount:10}]},effects:{hpRegen:3,hpMult:2,attackSpeedMult:1.2,damageMult:1},description:"3 HP/s regen, 2x HP, 1.2x attack speed"},{id:"t2-shield",name:"T2 Shield",icon:"t2_shield.png",cycles:100,cycleTime:180,cycleCost:{energyCores:500,gems:[{tier:1,amount:1e6},{tier:2,amount:1e5},{tier:3,amount:1e4},{tier:4,amount:1e3},{tier:5,amount:100},{tier:6,amount:10}]},effects:{hpRegen:5,hpMult:2,attackSpeedMult:1.3,damageMult:1.3},description:"5 HP/s regen, 2x HP, 1.3x attack speed, 1.3x damage"},{id:"t3-shield",name:"T3 Shield",icon:"t3_shield.png",cycles:300,cycleTime:300,cycleCost:{energyCores:2e3,gems:[{tier:1,amount:1e7},{tier:2,amount:1e6},{tier:3,amount:1e5},{tier:4,amount:1e4},{tier:5,amount:1e3},{tier:6,amount:100},{tier:7,amount:10}]},effects:{hpRegen:10,hpMult:3,attackSpeedMult:1.5,damageMult:1.5},description:"10 HP/s regen, 3x HP, 1.5x attack speed, 1.5x damage"}],uh={GEM_RECIPES:ih,PRISM_RECIPES:lh,ARTIFACT_RECIPES:oh},ch={enabled:!1,SLOT_COSTS:[],PULVERIZER_RECIPES:[]},dh={enabled:!1,UNLOCK_DUST_AMOUNT:0,BASE_DUST_AMOUNT:0,FIRST_LEVEL_MULT:1,COST_MULTIPLIER:1,TIER_ADD_INTERVAL:1,GEM_TIER_COST_OFFSET:0,SPEED_BASE_BONUS:0,SPEED_COMPOUND_RATE:1,STRENGTH_BASE_BONUS:0,STRENGTH_COMPOUND_RATE:1,DISCOUNT_COMPOUND_RATE:1},fh={costType:"mana",manaCost:{baseCost:"1e45",scaling:1e3},resetOnSingularity:!0,baseGridSize:3},mh={balance:Zp,upgrades:Jp,combat:eh,singularity:sh,mastery:ah,recipes:uh,pulverizers:ch,enchanting:dh,merge:fh},ph={TIERS:8,COMBAT_UNLOCK_COST:2e13,MERGE_UNLOCK_MANA:1e45,ASCENSION_TAB_UNLOCK:"1e45",ASCENSION_COST:"1e165",MERGE_BASE_COST:"1e45",MERGE_COST_SCALING:1e3,MERGE_GRID_SIZE:3,BASE_REVIVE_TIME:31},Wd=[10,1e5,1e9,1e15,1e24,1e36,1e48,1e60],hh=(e,t)=>({baseCost:Wd[e-1]*(t==="yield"?10:1),costScaling:3,boost:t==="speed"?.1:.025,maxLevel:40}),gh=[1,10,100,1e3,1e4,1e5,1e8,1e10,1e12,1e15,1e20,1e30,1e40,1e50,1e65,1e80,1e90,1e100,1e120,1e150,1e200,1e250],xh={UPGRADE_BASE_COSTS:Wd,getUpgradeConfig:hh,FOUNDRY_COSTS:gh},vh={COMBAT_UPGRADE_CONFIGS:{hp:{baseCost:1e13,costScaling:2,effect:1.1,maxLevel:40},damage:{baseCost:1e14,costScaling:2,effect:1.1,maxLevel:40},attackSpeed:{baseCost:1e15,costScaling:3,effect:1.05,maxLevel:20},reviveSpeed:{baseCost:1e18,costScaling:10,effect:2,maxLevel:10}},CORE_UPGRADE_CONFIGS:{craftingSpeed:{baseCost:10,costScaling:10,effect:.2,maxLevel:1/0},manaBoost:{baseCost:10,costScaling:1.5,effect:1.2,maxLevel:1/0},yield:{baseCost:100,costScaling:10,effect:.1,maxLevel:1/0},craftingSlots:{baseCost:100,costScaling:100,effect:1,maxLevel:3}},BASE_PLAYER_STATS:{maxHp:20,damageMin:3,damageMax:6,attackTime:5},BASE_ENEMY_STATS:{baseHp:15,baseDamageMin:3,baseDamageMax:5,baseAttackTime:6,hpScaling:1.5,damageScaling:1.3,attackSpeedScaling:1.05,dropScaling:1.25},DUST_UPGRADE_CONFIGS:{damageMult:{baseCost:[{tier:1,amount:200},{tier:2,amount:50},{tier:3,amount:10},{tier:4,amount:1}],costScaling:5,effect:1.5,maxLevel:1/0},attackSpeedMult:{baseCost:[{tier:1,amount:1e3},{tier:2,amount:500},{tier:3,amount:100},{tier:4,amount:10},{tier:5,amount:1}],costScaling:5,effect:1.15,maxLevel:1/0}}},dl="1e21",yh=[{id:"global-speed",x:0,y:0,name:"Speed Boost (free)",description:"2x global crafting speed",maxLevel:1,costs:[0]},{id:"keep-prism",x:1,y:0,name:"Prism Memory",description:"Keep highest tier prism per level",maxLevel:7,baseCost:10,costScaling:5},{id:"prism-power",x:2,y:0,name:"Prism Power",description:"+0.1x prism effectiveness per level (additive)",maxLevel:10,baseCost:100,costScaling:1.5},{id:"merge-grid",x:3,y:0,name:"Merge Grid Size",description:"+1 merge grid row and column per level",maxLevel:1,baseCost:500,costScaling:50},{id:"keep-artifact",x:0,y:1,name:"Artifact Memory",description:"Keep highest tier artifact per level",maxLevel:3,baseCost:10,costScaling:5},{id:"combat-cap",x:0,y:2,name:"Combat Mastery",description:"+1 max level for combat mana upgrades per level",maxLevel:5,baseCost:10,costScaling:2},{id:"bonus-cores",x:1,y:2,name:"Bonus Cores",description:"+0.5x energy core drops per level (additive)",maxLevel:10,baseCost:100,costScaling:2},{id:"t1-boost",x:-1,y:0,name:"T1 Mastery",description:"1.2x T1 speed, 1.05x yield per level",maxLevel:10,baseCost:5,costScaling:3},{id:"t2-boost",x:-2,y:0,name:"T2 Mastery",description:"1.2x T2 speed, 1.05x yield per level",maxLevel:10,baseCost:15,costScaling:3},{id:"t3-boost",x:-2,y:-1,name:"T3 Mastery",description:"1.2x T3 speed, 1.05x yield per level",maxLevel:10,baseCost:45,costScaling:3},{id:"t4-boost",x:-2,y:1,name:"T4 Mastery",description:"1.2x T4 speed, 1.05x yield per level",maxLevel:10,baseCost:135,costScaling:3},{id:"t5-boost",x:-3,y:0,name:"T5 Mastery",description:"1.2x T5 speed, 1.05x yield per level",maxLevel:10,baseCost:405,costScaling:3},{id:"t6-boost",x:-4,y:0,name:"T6 Mastery",description:"1.2x T6 speed, 1.05x yield per level",maxLevel:10,baseCost:1215,costScaling:3},{id:"t7-boost",x:-3,y:-1,name:"T7 Mastery",description:"1.2x T7 speed, 1.05x yield per level",maxLevel:10,baseCost:3645,costScaling:3},{id:"t8-boost",x:-3,y:1,name:"T8 Mastery",description:"1.2x T8 speed, 1.05x yield per level",maxLevel:10,baseCost:10935,costScaling:3},{id:"extra-slots",x:0,y:-1,name:"Foundry Expansion",description:"+1 starting foundry slot per level",maxLevel:3,costs:[5,10,100]},{id:"gem-cap",x:0,y:-2,name:"Gem Mastery",description:"+2 max level for gem speed/yield upgrades per level",maxLevel:10,baseCost:20,costScaling:1.5},{id:"bonus-sp",x:0,y:-3,name:"Bonus SP",description:"1.2x SP earned per level",maxLevel:10,baseCost:100,costScaling:1.4},{id:"dust-yield",x:1,y:-2,name:"Dust Yield",description:"+0.2x dust yield per level (additive)",maxLevel:15,baseCost:50,costScaling:1.6},{id:"strong-enchantments",x:2,y:-2,name:"Strong Enchantments",description:"1.1x enchantment power per level",maxLevel:10,baseCost:200,costScaling:1.5},{id:"rainbow-dust",x:3,y:-2,name:"Rainbow Dust",description:"Replace pulverizers with instant dust conversion from gem income",maxLevel:1,costs:[1e3]},{id:"enchant-automation",x:4,y:-2,name:"Enchant Automation",description:"Auto-buy enchantments based on ratios and dust combat upgrades",maxLevel:1,costs:[2e3]}],Nh=[{count:1,name:"Unlock Mastery",description:"Unlocks the Mastery system",tooltip:"Mastery lets you collect shards from gem crafting to gain permanent bonuses."},{count:2,name:"T1-T2 Automation",description:"Auto-buy T1 & T2 upgrades (free)",tooltip:"Automatically buys Speed and Yield upgrades for T1 and T2 gems when you can afford them, without spending mana."},{count:3,name:"T3-T4 Automation",description:"Auto-buy T3 & T4 upgrades (free)",tooltip:"Automatically buys Speed and Yield upgrades for T3 and T4 gems when you can afford them, without spending mana."},{count:4,name:"Auto Combat",description:"Auto-unlock & upgrades",tooltip:"Automatically unlocks combat (spends 20T mana) and auto-buys combat upgrades (HP, Damage, Attack Speed, Revive Speed) when you can afford them, without spending mana."},{count:5,name:"Break Singularity",description:`Remove ${dl} mana cap`,tooltip:`Mana is no longer capped at ${dl}. Gain more SP per singularity based on how far past the cap you go.`},{count:7,name:"T5-T6 Automation",description:"Auto-buy T5 & T6 upgrades (free)",tooltip:"Automatically buys Speed and Yield upgrades for T5 and T6 gems when you can afford them, without spending mana."},{count:10,name:"T7-T8 Automation",description:"Auto-buy T7 & T8 upgrades (free)",tooltip:"Automatically buys Speed and Yield upgrades for T7 and T8 gems when you can afford them, without spending mana."},{count:15,name:"SP Boost",description:"+50% SP gain",tooltip:"All singularity point gains are increased by 50%."},{count:20,name:"Combat Veteran",description:"+5 combat upgrade caps",tooltip:"Raises maximum level for HP, Damage, and Attack Speed by 5. Revive Speed caps at 15 (instant revive)."},{count:25,name:"Swift Crafting",description:"2x craft speed",tooltip:"All crafting speed is doubled."},{count:30,name:"Grid Expansion",description:"+1 merge grid size",tooltip:"Adds an extra row and column to the merge grid."},{count:35,name:"Core Automation",description:"Auto-buy core upgrades (free)",tooltip:"Automatically buys energy core upgrades when you can afford them, without spending energy cores."},{count:40,name:"Foundry Automation",description:"Auto-buy foundry slots (free)",tooltip:"Automatically buys new foundry slots when you can afford them, without spending mana."},{count:50,name:"Merge Automation",description:"Auto-spawn merge gems (free)",tooltip:"Automatically spawns merge gems when you can afford them, without spending mana."}],Sh={T1_T2:2,T3_T4:3,T5_T6:7,T7_T8:10,COMBAT:4,CORE_UPGRADES:35,FOUNDRY:40,MERGE:50,BREAK_SINGULARITY:5,SP_BOOST:15,COMBAT_VETERAN:20,SWIFT_CRAFTING:25,GRID_EXPANSION:30},bh={SINGULARITY_NODES:yh,SINGULARITY_MILESTONES:Nh,AUTOMATION_THRESHOLDS:Sh,COUNT_INCREMENT:2,SP_MULTIPLIER:2,SINGULARITY_THRESHOLD:dl,SP_BASE:10,SP_OOM_SCALING:1.05},wh={shardsPerLevel:20,shardSpeedBonus:.05,shardYieldBonus:.01,maxLevel:30,tierBonuses:[{type:"globalSpeed",value:.02},{type:"prismEffectiveness",value:.01},{type:"energyCoreDrops",value:.1},{type:"globalYield",value:.01},{type:"singularityPoints",value:.05},{type:"globalSpeed",value:.04},{type:"artifactEffectiveness",value:.04},{type:"globalYield",value:.02}],shardDropDivisors:[1e3,1e4,1e6,1e8,1e10,1e13,1e16,1e19,1e22,1e25,1e28,1e31,1e35,1e40,1e45,1e50,1e55,1e60,1e65,1e70,1e80,1e90,1e100,1e110,1e120,1e130,1e140,1e150,1e200,1e250]},Eh=[{craftTime:10,cost:null,manaPerSec:.02,multiplier:0,unlockAtCrafted:null,description:"Generates 0.02 mana/sec"},{craftTime:100,cost:{tier:1,amount:20},manaPerSec:0,multiplier:.4,unlockAtCrafted:{tier:1,amount:100},description:"+40% mana multiplier"},{craftTime:300,cost:{tier:2,amount:40},manaPerSec:0,multiplier:1.2,unlockAtCrafted:{tier:2,amount:100},description:"+120% mana multiplier"},{craftTime:600,cost:{tier:3,amount:80},manaPerSec:0,multiplier:3.6,unlockAtCrafted:{tier:3,amount:100},description:"+360% mana multiplier"},{craftTime:1200,cost:{tier:4,amount:100},manaPerSec:0,multiplier:10,unlockAtCrafted:{tier:4,amount:100},description:"+1000% mana multiplier"},{craftTime:2400,cost:{tier:5,amount:200},manaPerSec:0,multiplier:20,unlockAtCrafted:{tier:5,amount:100},description:"+2000% mana multiplier"},{craftTime:4800,cost:{tier:6,amount:400},manaPerSec:0,multiplier:40,unlockAtCrafted:{tier:6,amount:100},description:"+4000% mana multiplier"},{craftTime:9600,cost:{tier:7,amount:1e3},manaPerSec:0,multiplier:80,unlockAtCrafted:{tier:7,amount:100},description:"+8000% mana multiplier"}],kh=[{id:"basic",tier:1,name:"Basic Prism",chunks:30,chunkTime:30,chunkCost:[{tier:1,amount:100},{tier:2,amount:10}],bonuses:{tiers:[1,2],speedMult:3,yieldMult:2},description:"3x speed, 2x yield for T1-T2"},{id:"t2",tier:2,name:"T2 Prism",chunks:60,chunkTime:60,chunkCost:[{tier:1,amount:2e3},{tier:2,amount:200},{tier:3,amount:20}],bonuses:{tiers:[1,2,3],speedMult:3,yieldMult:2},description:"3x speed, 2x yield for T1-T3"},{id:"t3",tier:3,name:"T3 Prism",chunks:90,chunkTime:90,chunkCost:[{tier:1,amount:3e4},{tier:2,amount:3e3},{tier:3,amount:300},{tier:4,amount:30}],bonuses:{tiers:[1,2,3,4],speedMult:3,yieldMult:2},description:"3x speed, 2x yield for T1-T4"},{id:"t4",tier:4,name:"T4 Prism",chunks:150,chunkTime:120,chunkCost:[{tier:1,amount:5e5},{tier:2,amount:5e4},{tier:3,amount:5e3},{tier:4,amount:500},{tier:5,amount:50}],bonuses:{tiers:[1,2,3,4,5],speedMult:3,yieldMult:2},description:"3x speed, 2x yield for T1-T5"},{id:"t5",tier:5,name:"T5 Prism",chunks:300,chunkTime:180,chunkCost:[{tier:1,amount:1e7},{tier:2,amount:1e6},{tier:3,amount:1e5},{tier:4,amount:1e4},{tier:5,amount:1e3},{tier:6,amount:100}],bonuses:{tiers:[1,2,3,4,5,6],speedMult:3,yieldMult:2},description:"3x speed, 2x yield for T1-T6"},{id:"t6",tier:6,name:"T6 Prism",chunks:600,chunkTime:300,chunkCost:[{tier:1,amount:2e8},{tier:2,amount:2e7},{tier:3,amount:2e6},{tier:4,amount:2e5},{tier:5,amount:2e4},{tier:6,amount:2e3},{tier:7,amount:200}],bonuses:{tiers:[1,2,3,4,5,6,7],speedMult:3,yieldMult:2},description:"3x speed, 2x yield for T1-T7"},{id:"t7",tier:7,name:"T7 Prism",chunks:1500,chunkTime:500,chunkCost:[{tier:1,amount:1e10},{tier:2,amount:1e9},{tier:3,amount:1e8},{tier:4,amount:1e7},{tier:5,amount:1e6},{tier:6,amount:1e5},{tier:7,amount:1e4},{tier:8,amount:1e3}],bonuses:{tiers:[1,2,3,4,5,6,7,8],speedMult:3,yieldMult:2},description:"3x speed, 2x yield for T1-T8"}],Ch=[{id:"t1-shield",name:"T1 Shield",icon:"t1_shield.png",cycles:180,cycleTime:60,cycleCost:{energyCores:10,gems:[{tier:1,amount:1e4},{tier:2,amount:1e3},{tier:3,amount:100},{tier:4,amount:10}]},effects:{hpRegen:3,hpMult:2,attackSpeedMult:1.2,damageMult:1},description:"3 HP/s regen, 2x HP, 1.2x attack speed"},{id:"t2-shield",name:"T2 Shield",icon:"t2_shield.png",cycles:300,cycleTime:180,cycleCost:{energyCores:500,gems:[{tier:1,amount:1e6},{tier:2,amount:1e5},{tier:3,amount:1e4},{tier:4,amount:1e3},{tier:5,amount:100},{tier:6,amount:10}]},effects:{hpRegen:5,hpMult:2,attackSpeedMult:1.3,damageMult:1.3},description:"5 HP/s regen, 2x HP, 1.3x attack speed, 1.3x damage"},{id:"t3-shield",name:"T3 Shield",icon:"t3_shield.png",cycles:900,cycleTime:300,cycleCost:{energyCores:2e3,gems:[{tier:1,amount:1e7},{tier:2,amount:1e6},{tier:3,amount:1e5},{tier:4,amount:1e4},{tier:5,amount:1e3},{tier:6,amount:100},{tier:7,amount:10}]},effects:{hpRegen:10,hpMult:3,attackSpeedMult:1.5,damageMult:1.5},description:"10 HP/s regen, 3x HP, 1.5x attack speed, 1.5x damage"}],Mh={GEM_RECIPES:Eh,PRISM_RECIPES:kh,ARTIFACT_RECIPES:Ch},Th=[{id:"crush-t1",name:"Crush T1 Gem",craftTime:1,cost:{tier:1,amount:2},produces:{type:"dust",tier:1,amount:1},description:"Crush T1 gems into T1 dust"},{id:"crush-t2",name:"Crush T2 Gem",craftTime:1,cost:{tier:2,amount:4},produces:{type:"dust",tier:2,amount:1},description:"Crush T2 gems into T2 dust"},{id:"crush-t3",name:"Crush T3 Gem",craftTime:1,cost:{tier:3,amount:8},produces:{type:"dust",tier:3,amount:1},description:"Crush T3 gems into T3 dust"},{id:"crush-t4",name:"Crush T4 Gem",craftTime:1,cost:{tier:4,amount:16},produces:{type:"dust",tier:4,amount:1},description:"Crush T4 gems into T4 dust"},{id:"crush-t5",name:"Crush T5 Gem",craftTime:1,cost:{tier:5,amount:32},produces:{type:"dust",tier:5,amount:1},description:"Crush T5 gems into T5 dust"},{id:"crush-t6",name:"Crush T6 Gem",craftTime:1,cost:{tier:6,amount:64},produces:{type:"dust",tier:6,amount:1},description:"Crush T6 gems into T6 dust"},{id:"crush-t7",name:"Crush T7 Gem",craftTime:1,cost:{tier:7,amount:128},produces:{type:"dust",tier:7,amount:1},description:"Crush T7 gems into T7 dust"},{id:"crush-t8",name:"Crush T8 Gem",craftTime:1,cost:{tier:8,amount:256},produces:{type:"dust",tier:8,amount:1},description:"Crush T8 gems into T8 dust"}],jh={enabled:!0,SLOT_COSTS:[100,1e7,1e16,1e25,1e40,1e60,1e80],PULVERIZER_RECIPES:Th,SPEED_UPGRADE:{baseCost:1e6,scaling:[{threshold:0,multiplier:10},{threshold:1e11,multiplier:100},{threshold:1e20,multiplier:1e3}]}},Ih={enabled:!0,UNLOCK_DUST_AMOUNT:10,BASE_DUST_AMOUNT:5,FIRST_LEVEL_MULT:10,COST_MULTIPLIER:5,TIER_ADD_INTERVAL:3,GEM_TIER_COST_OFFSET:2,SPEED_BASE_BONUS:.4,SPEED_COMPOUND_RATE:1.1,STRENGTH_BASE_BONUS:1,STRENGTH_COMPOUND_RATE:1.05,DISCOUNT_COMPOUND_RATE:.8},_h={costType:"dust",dustCost:{baseCost:[{tier:1,amount:1e5},{tier:2,amount:1e4},{tier:3,amount:1e3},{tier:4,amount:100},{tier:5,amount:10},{tier:6,amount:1},{tier:7,amount:.1},{tier:8,amount:.01}],scaling:1.3,ignoreBefore:[{tier:5,count:3},{tier:6,count:10},{tier:7,count:15},{tier:8,count:20}]},resetOnSingularity:!1,baseGridSize:3},Ah={balance:ph,upgrades:xh,combat:vh,singularity:bh,mastery:wh,recipes:Mh,pulverizers:jh,enchanting:Ih,merge:_h},Ph={TIER_COLORS:["#3b9dff","#22c55e","#ef4444","#bfbf24","#bf5fd3","#22d3d3","#e89530","#ec4899"],PROGRESS_COLORS:{green:{bg:"linear-gradient(to bottom, #166534, #14532d)",highlight:"#22c55e"},red:{bg:"linear-gradient(to bottom, #ef4444, #b91c1c)",highlight:"#f87171"},purple:{bg:"linear-gradient(to bottom, #7c3aed, #5b21b6)",highlight:"#a78bfa"},yellow:{bg:"linear-gradient(to bottom, #fbbf24, #d97706)",highlight:"#fcd34d"},playerHealth:{bg:"linear-gradient(to bottom, #22c55e, #22c55e99)",highlight:"#22c55ecc"},enemyHealth:{bg:"linear-gradient(to bottom, #ef4444, #ef444499)",highlight:"#ef4444cc"}},STYLES:{surface:"bg-dark-surface border border-dark-border rounded",card:"bg-[#1a1a1a] border border-dark-border rounded",tooltip:"absolute z-50 bg-[#1a1a1a] border border-dark-border rounded shadow-lg"},FOUNDRY_SLOT_SIZE:"w-[104px] h-[104px]"},ma={0:mh,1:Ah};let Kd=()=>0;function Rh(e){Kd=e}function le(){const e=Kd();return ma[e]??ma[0]}const y={get UI(){return Ph},get TIERS(){return le().balance.TIERS},get COMBAT_UNLOCK_COST(){return le().balance.COMBAT_UNLOCK_COST},get MERGE_UNLOCK_MANA(){return le().balance.MERGE_UNLOCK_MANA},get ASCENSION_TAB_UNLOCK(){return le().balance.ASCENSION_TAB_UNLOCK},get ASCENSION_COST(){return le().balance.ASCENSION_COST},get MERGE_BASE_COST(){return le().balance.MERGE_BASE_COST},get MERGE_COST_SCALING(){return le().balance.MERGE_COST_SCALING},get MERGE_GRID_SIZE(){return le().balance.MERGE_GRID_SIZE},get BASE_REVIVE_TIME(){return le().balance.BASE_REVIVE_TIME},get UPGRADE_BASE_COSTS(){return le().upgrades.UPGRADE_BASE_COSTS},get FOUNDRY_COSTS(){return le().upgrades.FOUNDRY_COSTS},getUpgradeConfig(e,t){return le().upgrades.getUpgradeConfig(e,t)},get COMBAT_UPGRADE_CONFIGS(){return le().combat.COMBAT_UPGRADE_CONFIGS},get CORE_UPGRADE_CONFIGS(){return le().combat.CORE_UPGRADE_CONFIGS},get BASE_PLAYER_STATS(){return le().combat.BASE_PLAYER_STATS},get BASE_ENEMY_STATS(){return le().combat.BASE_ENEMY_STATS},get DUST_UPGRADE_CONFIGS(){return le().combat.DUST_UPGRADE_CONFIGS},get SINGULARITY_NODES(){return le().singularity.SINGULARITY_NODES},get SINGULARITY_MILESTONES(){return le().singularity.SINGULARITY_MILESTONES},get AUTOMATION_THRESHOLDS(){return le().singularity.AUTOMATION_THRESHOLDS},get COUNT_INCREMENT(){return le().singularity.COUNT_INCREMENT},get SP_MULTIPLIER(){return le().singularity.SP_MULTIPLIER},get SINGULARITY_THRESHOLD(){return le().singularity.SINGULARITY_THRESHOLD},get SP_BASE(){return le().singularity.SP_BASE},get SP_OOM_SCALING(){return le().singularity.SP_OOM_SCALING},get MASTERY_CONFIG(){return le().mastery},get GEM_RECIPES(){return le().recipes.GEM_RECIPES},get PRISM_RECIPES(){return le().recipes.PRISM_RECIPES},get ARTIFACT_RECIPES(){return le().recipes.ARTIFACT_RECIPES},get PULVERIZER_CONFIG(){return le().pulverizers},get PULVERIZERS_ENABLED(){return le().pulverizers.enabled},get PULVERIZER_SLOT_COSTS(){return le().pulverizers.SLOT_COSTS},get PULVERIZER_RECIPES(){return le().pulverizers.PULVERIZER_RECIPES},get ENCHANTING_CONFIG(){return le().enchanting},get ENCHANTING_ENABLED(){return le().enchanting.enabled},get ENCHANTING_UNLOCK_DUST(){return le().enchanting.UNLOCK_DUST_AMOUNT},get ENCHANTING_BASE_DUST(){return le().enchanting.BASE_DUST_AMOUNT},get ENCHANTING_COST_MULTIPLIER(){return le().enchanting.COST_MULTIPLIER},get MERGE_CONFIG(){return le().merge},getConfigForAscension(e){return ma[e]},getAvailableAscensions(){return Object.keys(ma).map(Number).sort((e,t)=>e-t)}},Zd=e=>{const t=y.MASTERY_CONFIG.shardDropDivisors,n=Math.max(0,e-1);return t[Math.min(n,t.length-1)]??t[0]},Ls=(e,t,n)=>{const r=y.COMBAT_UPGRADE_CONFIGS[e],s=n??r.maxLevel;return t>=s?1/0:r.baseCost*Math.pow(r.costScaling,t)},Os=(e,t)=>{const n=y.CORE_UPGRADE_CONFIGS[e];return t>=n.maxLevel?1/0:n.baseCost*Math.pow(n.costScaling,t)},Kt=(e,t)=>{const n=y.COMBAT_UPGRADE_CONFIGS[e];return e==="reviveSpeed"?n.effect*t:Math.pow(n.effect,t)},Ds=(e,t)=>{const n=y.CORE_UPGRADE_CONFIGS[e];return e==="manaBoost"?Math.pow(n.effect,t):e==="craftingSlots"?n.effect*t:1+n.effect*t},Xe=e=>({hp:Math.floor(15*Math.pow(1.2,e)),damageMin:3*Math.pow(1.1,e),damageMax:5*Math.pow(1.1,e),attackTime:6/Math.pow(1.02,e)}),pr=e=>Math.pow(1.25,e),Lh=e=>e%8+1,uo=(e,t=1)=>{let n=0,r=1,s=1,a=1;for(const l of y.ARTIFACT_RECIPES)e[l.id]?.owned&&(n+=l.effects.hpRegen*t,r*=l.effects.hpMult*t,s*=l.effects.attackSpeedMult*t,a*=l.effects.damageMult*t);return{hpRegen:n,hpMult:r,attackSpeedMult:s,damageMult:a}},It=(e,t,n=1)=>{const r=Kt("hp",e.hp),s=Kt("damage",e.damage),a=Kt("attackSpeed",e.attackSpeed),l=uo(t,n);return{maxHp:Math.floor(y.BASE_PLAYER_STATS.maxHp*r*l.hpMult),damageMin:y.BASE_PLAYER_STATS.damageMin*s*l.damageMult,damageMax:y.BASE_PLAYER_STATS.damageMax*s*l.damageMult,attackTime:y.BASE_PLAYER_STATS.attackTime/a/l.attackSpeedMult,hpRegen:l.hpRegen}},hr=(e,t)=>{const n=t??e.length,r=[];for(const l of e)for(const o of l)o&&r.push(o);r.sort((l,o)=>{if(l.level!==o.level)return o.level-l.level;const u=l.type==="prism",c=o.type==="prism";if(u!==c)return u?-1:1;const m=parseInt(l.type.slice(1))||0;return(parseInt(o.type.slice(1))||0)-m});const s=[];for(let l=1;l<=n;l++)if(l===1)s.push({row:0,col:0});else{for(let o=0;o<l-1;o++)s.push({row:o,col:l-1});for(let o=0;o<l;o++)s.push({row:l-1,col:o})}const a=[];for(let l=0;l<n;l++)a.push(Array(n).fill(null));for(let l=0;l<r.length&&l<s.length;l++){const o=s[l];a[o.row][o.col]=r[l]}return a},Fe=y.UI.TIER_COLORS,pa=y.UI.PROGRESS_COLORS,Wn=y.COMBAT_UNLOCK_COST,Oh=y.MERGE_UNLOCK_MANA,nr=y.TIERS,Us=()=>Array.from({length:nr},()=>({count:new z(0),totalCrafted:0,unlocked:!1})),Pr=()=>Array.from({length:nr},()=>({speed:0,yield:0})),Rr=()=>{const e={};for(const t of y.PRISM_RECIPES)e[t.id]={chunksCompleted:0,owned:!1};return e},co=()=>{const e={};for(const t of y.ARTIFACT_RECIPES)e[t.id]={cyclesCompleted:0,owned:!1};return e},Lr=()=>{const e=Xe(0);return{unlocked:!1,characterUnlocked:!1,playerHp:20,playerMaxHp:20,playerDamageMin:3,playerDamageMax:6,playerAttackTime:5,playerAttackProgress:0,playerReviveTimer:0,currentEnemy:0,enemyHp:e.hp,enemyMaxHp:e.hp,enemyAttackProgress:0,energyCores:new z(0),totalEnemiesKilled:0,highestEnemy:0,combatUpgrades:{hp:0,damage:0,attackSpeed:0,reviveSpeed:0},coreUpgrades:{craftingSpeed:0,manaBoost:0,yield:0,craftingSlots:0},dustUpgrades:{damageMult:0,attackSpeedMult:0},artifacts:co()}},ha=()=>({unlocked:!1,count:0,points:0,skillLevels:{}}),ga=()=>({unlocked:!1,tiers:Array.from({length:nr},()=>({shards:0,level:1,rollsSinceLastShard:0})),shardLog:[],unviewedShards:0}),Dh=()=>Array.from({length:y.MERGE_GRID_SIZE},()=>Array.from({length:y.MERGE_GRID_SIZE},()=>null)),xa=()=>({unlocked:!1,grid:Dh(),gemSpawnCount:0,log:[]}),Or=()=>({unlocked:!1,slots:[],dust:Array.from({length:nr},()=>0),rainbowDustPercent:0}),Dr=()=>({unlocked:!1,tiers:Array.from({length:nr},()=>({speed:0,strength:0,discount:0})),automationEnabled:!1,automationSettings:Array.from({length:nr},(e,t)=>({ratios:t===0?{speed:.5,strength:.5,discount:0}:{speed:.4,strength:.4,discount:.2},overflow:"speed"}))}),Tu=e=>{const t=JSON.stringify({mana:e.mana.toString(),gems:e.gems.map(n=>({count:n.count.toString(),totalCrafted:n.totalCrafted,unlocked:n.unlocked})),foundries:e.foundries,upgrades:e.upgrades,prisms:e.prisms,combat:{...e.combat,energyCores:e.combat.energyCores.toString()},singularity:e.singularity,mastery:e.mastery,merge:e.merge,pulverizers:e.pulverizers,enchanting:e.enchanting,lastTimestamp:e.lastTimestamp,ascensionLevel:e.ascensionLevel,ascensionTabUnlocked:e.ascensionTabUnlocked});return btoa(t)},fl=e=>{try{let t;try{t=atob(e)}catch{t=e}const n=JSON.parse(t),r=Rr(),s=n.prisms??{},a={...r,...s},l=Lr(),o=co();let u;if(n.combat){const x=n.combat.artifacts??{},S={...o,...x},E=n.combat.characterUnlocked??n.combat.unlocked??!1;if(u={...n.combat,characterUnlocked:E,energyCores:new z(n.combat.energyCores??0),highestEnemy:n.combat.highestEnemy??0,combatUpgrades:{hp:0,damage:0,attackSpeed:0,reviveSpeed:0,...n.combat.combatUpgrades},coreUpgrades:{craftingSpeed:0,manaBoost:0,yield:0,craftingSlots:0,...n.combat.coreUpgrades},dustUpgrades:{damageMult:0,attackSpeedMult:0,...n.combat.dustUpgrades},artifacts:S},isNaN(u.playerReviveTimer)||u.playerHp<=0&&u.playerReviveTimer<=0){const C=It(u.combatUpgrades,u.artifacts);u.playerHp=C.maxHp,u.playerMaxHp=C.maxHp,u.playerReviveTimer=0,u.playerAttackProgress=0,u.currentEnemy=0;const T=Xe(0);u.enemyHp=T.hp,u.enemyMaxHp=T.hp,u.enemyAttackProgress=0}}else u=l;const c=ha();let m;n.singularity?m={...c,...n.singularity,skillLevels:{...c.skillLevels,...n.singularity.skillLevels}}:m=c;const f=ga();let p;if(n.mastery){const x=f.tiers.map((S,E)=>{const C=n.mastery.tiers[E]??{},T={...S,...C};return T.shards>y.MASTERY_CONFIG.shardsPerLevel&&(T.shards=0),T});p={...f,...n.mastery,tiers:x,shardLog:n.mastery.shardLog??[],unviewedShards:n.mastery.unviewedShards??0}}else p=f;const N=xa();let v;n.merge?v={...N,...n.merge}:v=N;const h=Or();let M;if(n.pulverizers){const x=(n.pulverizers.slots??[]).map(S=>({recipeId:S.recipeId,progress:S.progress,speedLevel:S.speedLevel??0}));M={...h,unlocked:n.pulverizers.unlocked??!1,slots:x,dust:n.pulverizers.dust??h.dust,rainbowDustPercent:n.pulverizers.rainbowDustPercent??0}}else M=h;const g=Dr();let d;if(n.enchanting){const x=g.tiers.map((E,C)=>{const T=n.enchanting.tiers[C]??{};return{...E,...T}}),S=g.automationSettings.map((E,C)=>{const T=n.enchanting.automationSettings?.[C];return T?{ratios:{...E.ratios,...T.ratios},overflow:T.overflow??E.overflow}:E});d={...g,...n.enchanting,tiers:x,automationEnabled:n.enchanting.automationEnabled??!1,automationSettings:S}}else d=g;return{mana:new z(n.mana??0),gems:n.gems.map(x=>({count:new z(x.count),totalCrafted:x.totalCrafted??0,unlocked:x.unlocked})),foundries:(n.foundries??[{tier:1,progress:0}]).map(x=>({tier:x.tier,prismId:x.prismId??null,artifactId:x.artifactId??null,progress:x.progress})),upgrades:n.upgrades??Pr(),prisms:a,combat:u,singularity:m,mastery:p,merge:v,pulverizers:M,enchanting:d,lastTimestamp:n.lastTimestamp,ascensionLevel:n.ascensionLevel??0,ascensionTabUnlocked:n.ascensionTabUnlocked??!1}}catch{return null}},Fs="evercraft-idle-save",mi="evercraft-idle-timestamp",Uh=7*24*60*60*1e3,Fh=9e5,pi=18e4;let va=!1,fo=!1,Qd=0;const Bh=3e3,Gh=()=>va,zh=()=>fo,hi=e=>{va=e},ju=e=>{fo=e},$h=()=>Qd,Hh=e=>{Qd=e},Yh=()=>Bh,Vh=()=>{const e=localStorage.getItem(Fs);if(e){const t=fl(e);if(t)return va=!0,t;fo=!0,console.error("Failed to load save data - saving disabled to protect your progress")}else va=!0;return{mana:new z(0),gems:Us(),foundries:[{tier:1,prismId:null,artifactId:null,progress:0}],upgrades:Pr(),prisms:Rr(),combat:Lr(),singularity:ha(),mastery:ga(),merge:xa(),pulverizers:Or(),enchanting:Dr(),lastTimestamp:Date.now(),ascensionLevel:0,ascensionTabUnlocked:!1}};let Xd=null;const qh=()=>Xd?.getState().ascensionLevel??0;Rh(qh);const b=Up((e,t)=>({...Vh(),unlockCombat:()=>{const n=t();n.combat.characterUnlocked||n.mana.lt(y.COMBAT_UNLOCK_COST)||(e(r=>({mana:r.mana.sub(y.COMBAT_UNLOCK_COST),combat:{...r.combat,unlocked:!0,characterUnlocked:!0}})),t().saveGame())},canBuyCombatUpgrade:n=>{const r=t(),s=r.combat.combatUpgrades[n],a=y.COMBAT_UPGRADE_CONFIGS[n],l=t().getCombatUpgradeCapBonus();let o=a.maxLevel+l;if(n==="reviveSpeed"&&(o=Math.min(o,15)),s>=o)return!1;const u=Ls(n,s,o);return r.mana.gte(u)},buyCombatUpgrade:n=>{if(!t().canBuyCombatUpgrade(n))return;const r=t(),s=r.combat.combatUpgrades[n],a=y.COMBAT_UPGRADE_CONFIGS[n],l=t().getCombatUpgradeCapBonus();let o=a.maxLevel+l;n==="reviveSpeed"&&(o=Math.min(o,15));const u=Ls(n,s,o),c={...r.combat.combatUpgrades,[n]:s+1},m=t().getMasteryArtifactEffectiveness(),f=It(c,r.combat.artifacts,m),p=t().getDustDamageMultiplier(),N=t().getDustAttackSpeedMultiplier();e(v=>({mana:v.mana.sub(u),combat:{...v.combat,combatUpgrades:c,playerMaxHp:f.maxHp,playerDamageMin:f.damageMin*p,playerDamageMax:f.damageMax*p,playerAttackTime:f.attackTime/N,playerHp:Math.min(v.combat.playerHp,f.maxHp)}})),t().saveGame()},canBuyCoreUpgrade:n=>{const r=t(),s=r.combat.coreUpgrades[n],a=Os(n,s);return r.combat.energyCores.gte(a)},buyCoreUpgrade:n=>{if(!t().canBuyCoreUpgrade(n))return;const s=t().combat.coreUpgrades[n],a=Os(n,s);e(n==="craftingSlots"?l=>({combat:{...l.combat,energyCores:l.combat.energyCores.sub(a),coreUpgrades:{...l.combat.coreUpgrades,[n]:s+1}},foundries:[...l.foundries,{tier:0,prismId:null,artifactId:null,progress:0}]}):l=>({combat:{...l.combat,energyCores:l.combat.energyCores.sub(a),coreUpgrades:{...l.combat.coreUpgrades,[n]:s+1}}})),t().saveGame()},getDustUpgradeCost:n=>{const r=y.DUST_UPGRADE_CONFIGS;if(!r)return null;const s=r[n],a=t().combat.dustUpgrades[n];return s.baseCost.map(({tier:l,amount:o})=>({tier:l,amount:Math.floor(o*Math.pow(s.costScaling,a))}))},canBuyDustUpgrade:n=>{const r=t().getDustUpgradeCost(n);if(!r)return!1;const s=t();return r.every(({tier:a,amount:l})=>s.pulverizers.dust[a-1]>=l)},buyDustUpgrade:n=>{if(!t().canBuyDustUpgrade(n))return;const r=t(),s=t().getDustUpgradeCost(n),a=r.combat.dustUpgrades[n],l=y.DUST_UPGRADE_CONFIGS,o={...r.combat.dustUpgrades,[n]:a+1},u=Math.pow(l.damageMult.effect,o.damageMult),c=Math.pow(l.attackSpeedMult.effect,o.attackSpeedMult),m=t().getMasteryArtifactEffectiveness(),f=It(r.combat.combatUpgrades,r.combat.artifacts,m);e(p=>{const N=[...p.pulverizers.dust];for(const{tier:v,amount:h}of s)N[v-1]-=h;return{pulverizers:{...p.pulverizers,dust:N},combat:{...p.combat,dustUpgrades:o,playerDamageMin:f.damageMin*u,playerDamageMax:f.damageMax*u,playerAttackTime:f.attackTime/c}}}),t().saveGame()},getDustDamageMultiplier:()=>{const n=y.DUST_UPGRADE_CONFIGS;if(!n)return 1;const r=t().combat.dustUpgrades.damageMult;return Math.pow(n.damageMult.effect,r)},getDustAttackSpeedMultiplier:()=>{const n=y.DUST_UPGRADE_CONFIGS;if(!n)return 1;const r=t().combat.dustUpgrades.attackSpeedMult;return Math.pow(n.attackSpeedMult.effect,r)},getGlobalSpeedMultiplier:()=>{const n=t(),r=Ds("craftingSpeed",n.combat.coreUpgrades.craftingSpeed),s=(n.singularity.skillLevels["global-speed"]??0)>0?2:1,a=t().getMasteryGlobalSpeedBonus(),l=n.singularity.count>=y.AUTOMATION_THRESHOLDS.SWIFT_CRAFTING?2:1;return r*s*a*l},getGlobalYieldMultiplier:()=>{const n=t(),r=Ds("yield",n.combat.coreUpgrades.yield),s=t().getMasteryGlobalYieldBonus();return r*s},getManaBoostMultiplier:()=>{const n=t();return Ds("manaBoost",n.combat.coreUpgrades.manaBoost)},getPrismSpeedBonus:n=>{const r=t(),s=t().getMasteryPrismEffectiveness();let a=1;for(const l of y.PRISM_RECIPES)r.prisms[l.id]?.owned&&l.bonuses.tiers.includes(n)&&(a*=l.bonuses.speedMult*s);return a},getPrismYieldBonus:n=>{const r=t(),s=t().getMasteryPrismEffectiveness();let a=1;for(const l of y.PRISM_RECIPES)r.prisms[l.id]?.owned&&l.bonuses.tiers.includes(n)&&(a*=l.bonuses.yieldMult*s);return a},getSpeedMultiplier:n=>{const s=t().upgrades[n-1].speed,a=y.getUpgradeConfig(n,"speed"),l=1+s*a.boost,o=t().getPrismSpeedBonus(n),u=t().getGlobalSpeedMultiplier(),c=t().getSingularityTierSpeedBoost(n),m=t().getMasteryShardSpeedBonus(n),f=t().getMergeSpeedBonus(n),p=t().getEnchantmentSpeedMultiplier(n);return l*o*u*c*m*f*p},getYieldMultiplier:n=>{const s=t().upgrades[n-1].yield,a=y.getUpgradeConfig(n,"yield"),l=1+s*a.boost,o=t().getPrismYieldBonus(n),u=t().getGlobalYieldMultiplier(),c=t().getSingularityTierYieldBoost(n),m=t().getMasteryShardYieldBonus(n),f=t().getMergeYieldBonus(n);return l*o*u*c*m*f},getFoundryGemRates:n=>{const r=t(),s=r.foundries[n],a=Array(8).fill(0);if(!s)return a;if(s.prismId){const l=y.PRISM_RECIPES.find(u=>u.id===s.prismId),o=r.prisms[s.prismId];if(l&&o&&!o.owned){const u=l.chunkTime/t().getGlobalSpeedMultiplier();for(const c of l.chunkCost)a[c.tier-1]-=c.amount/u}return a}if(s.artifactId){const l=y.ARTIFACT_RECIPES.find(u=>u.id===s.artifactId),o=r.combat.artifacts[s.artifactId];if(l&&o&&!o.owned){const u=l.cycleTime/t().getGlobalSpeedMultiplier();for(const c of l.cycleCost.gems)a[c.tier-1]-=c.amount/u}return a}if(s.tier>0){const l=y.GEM_RECIPES[s.tier-1],o=t().getSpeedMultiplier(s.tier),u=t().getYieldMultiplier(s.tier),c=l.craftTime/o,m=u/c;if(a[s.tier-1]+=m,l.cost){const f=t().getDiscountedCraftCost(s.tier)??l.cost.amount;a[l.cost.tier-1]-=f/c}}return a},getAggregatedGemRates:()=>{const n=t(),r=Array(y.TIERS).fill(0);for(let s=0;s<n.foundries.length;s++){const a=t().getFoundryGemRates(s);for(let l=0;l<y.TIERS;l++)r[l]+=a[l]}if(!t().hasRainbowDust()){const s=t().getPulverizerGemRates();for(let a=0;a<y.TIERS;a++)r[a]+=s[a]}if(t().hasRainbowDust()){const s=n.pulverizers.rainbowDustPercent/100;for(let a=0;a<y.TIERS;a++)r[a]>0&&(r[a]*=1-s)}return r},getPulverizerGemRates:()=>{const n=t(),r=Array(y.TIERS).fill(0);if(!y.PULVERIZERS_ENABLED||t().hasRainbowDust())return r;const s=t().getGlobalSpeedMultiplier();for(const a of n.pulverizers.slots){if(!a.recipeId)continue;const l=y.PULVERIZER_RECIPES.find(c=>c.id===a.recipeId);if(!l)continue;const o=Math.pow(2,a.speedLevel),u=l.craftTime/(s*o);r[l.cost.tier-1]-=l.cost.amount/u}return r},getPulverizerDustRates:()=>{const n=t(),r=Array(y.TIERS).fill(0);if(!y.PULVERIZERS_ENABLED)return r;const s=t().getDustYieldBonus();if(t().hasRainbowDust()){const l=n.pulverizers.rainbowDustPercent/100;if(l<=0)return r;const o=Array(y.TIERS).fill(0);for(let u=0;u<n.foundries.length;u++){const c=t().getFoundryGemRates(u);for(let m=0;m<y.TIERS;m++)o[m]+=c[m]}for(let u=0;u<y.TIERS;u++)if(o[u]>0){const c=Math.pow(2,u+1);r[u]=o[u]*l/c*s}return r}const a=t().getGlobalSpeedMultiplier();for(const l of n.pulverizers.slots){if(!l.recipeId)continue;const o=y.PULVERIZER_RECIPES.find(m=>m.id===l.recipeId);if(!o)continue;const u=Math.pow(2,l.speedLevel),c=o.craftTime/(a*u);r[o.produces.tier-1]+=o.produces.amount*s/c}return r},getUpgradeCost:(n,r)=>{const a=t().upgrades[n-1][r],l=y.getUpgradeConfig(n,r);return l.baseCost*Math.pow(l.costScaling,a)},canBuyUpgrade:(n,r)=>{const s=t(),a=s.upgrades[n-1][r],l=y.getUpgradeConfig(n,r),o=t().getGemUpgradeCapBonus(),u=l.maxLevel+o;if(a>=u)return!1;const c=t().getUpgradeCost(n,r);return s.mana.gte(c)},buyUpgrade:(n,r)=>{if(!t().canBuyUpgrade(n,r))return;const s=t().getUpgradeCost(n,r);e(a=>{const l=a.upgrades.map(o=>({...o}));return l[n-1][r]+=1,{mana:a.mana.sub(s),upgrades:l}}),t().saveGame()},getManaMultiplier:()=>{const n=t();let r=1;for(let s=1;s<y.TIERS;s++){const a=y.GEM_RECIPES[s],l=t().getEnchantmentStrengthMultiplier(s+1),o=1+a.multiplier*l*n.gems[s].count.toNumber();r*=o}return r*=t().getManaBoostMultiplier(),r},getManaPerSec:()=>{const n=t(),r=t().getEnchantmentStrengthMultiplier(1);return n.gems[0].count.toNumber()*y.GEM_RECIPES[0].manaPerSec*r*t().getManaMultiplier()},isTierUnlocked:n=>{if(n===1)return!0;const r=y.GEM_RECIPES[n-1];return r.unlockAtCrafted?t().gems[r.unlockAtCrafted.tier-1].totalCrafted>=r.unlockAtCrafted.amount:!0},getDiscountedCraftCost:n=>{const r=y.GEM_RECIPES[n-1];if(!r.cost)return null;const s=t().getEnchantmentDiscountMultiplier(n);return Math.ceil(r.cost.amount*s)},canAffordTier:n=>{const r=y.GEM_RECIPES[n-1];if(!r.cost)return!0;const s=t(),a=t().getDiscountedCraftCost(n)??r.cost.amount;return s.gems[r.cost.tier-1].count.gte(a)},getFoundryCost:()=>{const n=t(),r=n.singularity.skillLevels["extra-slots"]??0,s=n.combat.coreUpgrades.craftingSlots,a=r+s,l=n.foundries.length-1-a,o=Math.max(0,l);if(o<y.FOUNDRY_COSTS.length)return new z(y.FOUNDRY_COSTS[o]);const u=new z(y.FOUNDRY_COSTS[y.FOUNDRY_COSTS.length-1]),c=o-y.FOUNDRY_COSTS.length+1;return u.mul(z.pow(10,c))},canBuyFoundry:()=>{const n=t(),r=t().getFoundryCost();return n.mana.gte(r)},buyFoundry:()=>{const n=t().getFoundryCost();t().canBuyFoundry()&&(e(r=>({mana:r.mana.sub(n),foundries:[...r.foundries,{tier:0,prismId:null,artifactId:null,progress:0}]})),t().saveGame())},setFoundryTier:(n,r)=>{r!==0&&!t().isTierUnlocked(r)||(e(s=>{const a=[...s.foundries];return n>=0&&n<a.length&&(a[n]={tier:r,prismId:null,artifactId:null,progress:0}),{foundries:a}}),t().saveGame())},setFoundryPrism:(n,r)=>{e(s=>{const a=[...s.foundries];return n>=0&&n<a.length&&(a[n]={tier:0,prismId:r,artifactId:null,progress:0}),{foundries:a}}),t().saveGame()},setFoundryArtifact:(n,r)=>{e(s=>{const a=[...s.foundries];return n>=0&&n<a.length&&(a[n]={tier:0,prismId:null,artifactId:r,progress:0}),{foundries:a}}),t().saveGame()},sortFoundries:()=>{e(n=>({foundries:[...n.foundries].sort((s,a)=>{const l=c=>c.tier>0?0:c.prismId?1:c.artifactId?2:3,o=l(s),u=l(a);if(o!==u)return o-u;if(o===0)return s.tier-a.tier;if(o===1){const c=y.PRISM_RECIPES.findIndex(f=>f.id===s.prismId),m=y.PRISM_RECIPES.findIndex(f=>f.id===a.prismId);return c-m}else if(o===2){const c=y.ARTIFACT_RECIPES.findIndex(f=>f.id===s.artifactId),m=y.ARTIFACT_RECIPES.findIndex(f=>f.id===a.artifactId);return c-m}return 0})})),t().saveGame()},clearFoundries:()=>{e(n=>({foundries:n.foundries.map(()=>({tier:0,prismId:null,artifactId:null,progress:0}))})),t().saveGame()},sortPulverizers:()=>{e(n=>{const r=[...n.pulverizers.slots].sort((s,a)=>{if(!s.recipeId&&!a.recipeId)return 0;if(!s.recipeId)return 1;if(!a.recipeId)return-1;const l=y.PULVERIZER_RECIPES.find(m=>m.id===s.recipeId),o=y.PULVERIZER_RECIPES.find(m=>m.id===a.recipeId),u=l?.produces.tier??0,c=o?.produces.tier??0;return u-c});return{pulverizers:{...n.pulverizers,slots:r}}}),t().saveGame()},clearPulverizers:()=>{e(n=>{const r=n.pulverizers.slots.map(s=>({recipeId:null,progress:0,speedLevel:s.speedLevel}));return{pulverizers:{...n.pulverizers,slots:r}}}),t().saveGame()},getEnemyDropWithBonus:n=>{const r=pr(n),s=t().getMasteryEnergyCoreDropBonus()*t().getBonusCoresMultiplier();return r*s},canAffordArtifactCycle:n=>{const r=y.ARTIFACT_RECIPES.find(a=>a.id===n);if(!r)return!1;const s=t();if(s.combat.energyCores.lt(r.cycleCost.energyCores))return!1;for(const a of r.cycleCost.gems)if(s.gems[a.tier-1].count.lt(a.amount))return!1;return!0},canAffordPrismChunk:n=>{const r=y.PRISM_RECIPES.find(a=>a.id===n);if(!r)return!1;const s=t();for(const a of r.chunkCost)if(s.gems[a.tier-1].count.lt(a.amount))return!1;return!0},gameLoop:n=>{const r=Math.min(n,Uh),s=r>Fh,a=s?Math.ceil(r/pi):1,l=pi/1e3;for(let o=0;o<a;o++){const u=o===a-1,c=s?u?(r-o*pi)/1e3:l:r/1e3,m=t().getGlobalSpeedMultiplier(),f=[],p=[],N=[];for(let v=1;v<=8;v++)f[v]=t().getSpeedMultiplier(v),p[v]=t().getYieldMultiplier(v),N[v]=t().getEnchantmentDiscountMultiplier(v);e(v=>{const h=v.gems.map(_=>({..._}));let M=v.foundries.map(_=>({..._}));const g={...v.prisms},d={...v.combat},x={...v.mastery,tiers:v.mastery.tiers.map(_=>({..._}))},S=Array.from({length:y.TIERS},()=>0),E=Array.from({length:y.TIERS},()=>0);for(let _=0;_<M.length;_++){const P=M[_];if(P.prismId){const ne=y.PRISM_RECIPES.find(fe=>fe.id===P.prismId);if(!ne)continue;const se=g[P.prismId];if(!se||se.owned||se.chunksCompleted>=ne.chunks)continue;const me=ne.chunkTime/m,de=c/me;P.progress+=de;const Te=ne.chunks-se.chunksCompleted,he=Math.min(Math.floor(P.progress),Te);if(he>0){let fe=he;for(const Ne of ne.chunkCost){const xe=h[Ne.tier-1].count.toNumber(),ae=Math.floor(xe/Ne.amount);fe=Math.min(fe,ae)}if(fe>0){for(const Ne of ne.chunkCost)h[Ne.tier-1].count=h[Ne.tier-1].count.sub(Ne.amount*fe);if(se.chunksCompleted+=fe,P.progress-=fe,se.chunksCompleted>=ne.chunks){se.owned=!0;const Ne=P.prismId;for(const xe of M)xe.prismId===Ne&&(xe.prismId=null,xe.progress=0)}}else P.progress=1}P.prismId&&(g[P.prismId]=se);continue}if(P.artifactId){const ne=y.ARTIFACT_RECIPES.find(fe=>fe.id===P.artifactId);if(!ne)continue;const se=d.artifacts[P.artifactId];if(!se||se.owned||se.cyclesCompleted>=ne.cycles)continue;const me=ne.cycleTime/m,de=c/me;P.progress+=de;const Te=ne.cycles-se.cyclesCompleted,he=Math.min(Math.floor(P.progress),Te);if(he>0){let fe=he;const Ne=d.energyCores.toNumber(),xe=Math.floor(Ne/ne.cycleCost.energyCores);fe=Math.min(fe,xe);for(const ae of ne.cycleCost.gems){const we=h[ae.tier-1].count.toNumber(),Se=Math.floor(we/ae.amount);fe=Math.min(fe,Se)}if(fe>0){d.energyCores=d.energyCores.sub(ne.cycleCost.energyCores*fe);for(const ae of ne.cycleCost.gems)h[ae.tier-1].count=h[ae.tier-1].count.sub(ae.amount*fe);if(se.cyclesCompleted+=fe,P.progress-=fe,se.cyclesCompleted>=ne.cycles){se.owned=!0;const ae=P.artifactId;for(const Qe of M)Qe.artifactId===ae&&(Qe.artifactId=null,Qe.progress=0);const we=t().getMasteryArtifactEffectiveness(),Se=It(d.combatUpgrades,d.artifacts,we),Ve=t().getDustDamageMultiplier(),gt=t().getDustAttackSpeedMultiplier();d.playerMaxHp=Se.maxHp,d.playerDamageMin=Se.damageMin*Ve,d.playerDamageMax=Se.damageMax*Ve,d.playerAttackTime=Se.attackTime/gt,d.playerHp=Se.maxHp}}else P.progress=1}P.artifactId&&(d.artifacts[P.artifactId]=se);continue}if(P.tier===0)continue;const V=y.GEM_RECIPES[P.tier-1],O=f[P.tier],H=V.craftTime/O,Q=c/H;P.progress+=Q;const $=p[P.tier],G=P.tier-1,J=Math.floor(P.progress);if(J>0){let ne=J;if(V.cost){const se=V.cost.tier-1,me=Math.ceil(V.cost.amount*N[P.tier]),de=h[se].count.toNumber(),Te=Math.floor(de/me);if(ne=Math.min(J,Te),ne>0){const he=ne*me;h[se].count=h[se].count.sub(he),E[se]+=he}ne<J?P.progress=1+(P.progress-J):P.progress-=ne}else P.progress-=ne;if(ne>0){const se=ne*$;if(h[G].count=h[G].count.add(se),h[G].totalCrafted+=se,h[G].unlocked=!0,S[G]+=se,x.unlocked){const me=x.tiers[G];if(me.level>=y.MASTERY_CONFIG.maxLevel)continue;let de=Math.floor(se);for(;de>0&&me.level<y.MASTERY_CONFIG.maxLevel;){const Te=Zd(me.level),he=1/Te,fe=Math.random(),Ne=he<1e-10?-he:Math.log1p(-he),xe=fe<1e-10?-fe:Math.log1p(-fe),ae=Math.max(1,Math.ceil(xe/Ne)),we=ae<=de,Se=we?ae:de;me.rollsSinceLastShard+=Se,de-=Se,we&&(x.shardLog=[{tier:P.tier,rolls:me.rollsSinceLastShard,chance:Te},...x.shardLog].slice(0,20),x.unviewedShards+=1,me.rollsSinceLastShard=0,me.shards+=1,me.shards>=y.MASTERY_CONFIG.shardsPerLevel&&(me.shards=0,me.level+=1))}}}}}if(d.characterUnlocked){if(d.playerHp>0&&d.playerHp<1&&d.playerReviveTimer<=0){d.playerHp=0;const _=Kt("reviveSpeed",d.combatUpgrades.reviveSpeed);d.playerReviveTimer=y.BASE_REVIVE_TIME-_,d.playerAttackProgress=0,d.currentEnemy=0;const P=Xe(0);d.enemyHp=P.hp,d.enemyMaxHp=P.hp,d.enemyAttackProgress=0}if(d.enemyHp>0&&d.enemyHp<1&&d.playerReviveTimer<=0){const _=pr(d.currentEnemy),P=t().getMasteryEnergyCoreDropBonus()*t().getBonusCoresMultiplier(),V=_*P;d.energyCores=d.energyCores.add(V),d.totalEnemiesKilled+=1,d.currentEnemy+=1,d.highestEnemy=Math.max(d.highestEnemy,d.currentEnemy);const O=Xe(d.currentEnemy);d.enemyHp=O.hp,d.enemyMaxHp=O.hp,d.enemyAttackProgress=0}if(d.playerReviveTimer>0){if(d.playerReviveTimer-=c,d.playerReviveTimer<=0){d.playerReviveTimer=0,d.playerHp=d.playerMaxHp,d.playerAttackProgress=0,d.currentEnemy=0;const _=Xe(0);d.enemyHp=_.hp,d.enemyMaxHp=_.hp,d.enemyAttackProgress=0}}else{const _=t().getMasteryArtifactEffectiveness(),P=uo(d.artifacts,_),V=Xe(d.currentEnemy);if(c>5){let O=c;const H=1e3;let Q=0;for(;O>.001&&Q<H;){if(Q++,d.enemyHp<1){const Ne=pr(d.currentEnemy),xe=t().getMasteryEnergyCoreDropBonus()*t().getBonusCoresMultiplier(),ae=Ne*xe;d.energyCores=d.energyCores.add(ae),d.totalEnemiesKilled+=1,d.currentEnemy+=1,d.highestEnemy=Math.max(d.highestEnemy,d.currentEnemy);const we=Xe(d.currentEnemy);d.enemyHp=we.hp,d.enemyMaxHp=we.hp,d.enemyAttackProgress=0,d.playerAttackProgress=0;continue}if(d.playerHp<1){d.playerHp=0;const Ne=Kt("reviveSpeed",d.combatUpgrades.reviveSpeed),xe=y.BASE_REVIVE_TIME-Ne;if(O>=xe){O-=xe,d.playerHp=d.playerMaxHp,d.playerAttackProgress=0,d.currentEnemy=0;const ae=Xe(0);d.enemyHp=ae.hp,d.enemyMaxHp=ae.hp,d.enemyAttackProgress=0}else d.playerReviveTimer=xe-O,d.playerAttackProgress=0,O=0;continue}const $=Xe(d.currentEnemy),G=(d.playerDamageMin+d.playerDamageMax)/2,J=($.damageMin+$.damageMax)/2,ne=G/d.playerAttackTime,se=Math.max(.001,d.enemyHp/ne),me=Math.max(.001,J/$.attackTime-P.hpRegen),de=Math.max(.001,d.playerHp/me),Te=Math.min(O,se,de);if(Te<=0){O=0;break}P.hpRegen>0&&d.playerHp<d.playerMaxHp&&(d.playerHp=Math.min(d.playerMaxHp,d.playerHp+P.hpRegen*Te));const he=ne*Te,fe=J/$.attackTime*Te;if(d.enemyHp-=he,d.playerHp-=fe,O-=Te,d.enemyHp<=0){const Ne=pr(d.currentEnemy),xe=t().getMasteryEnergyCoreDropBonus()*t().getBonusCoresMultiplier(),ae=Ne*xe;d.energyCores=d.energyCores.add(ae),d.totalEnemiesKilled+=1,d.currentEnemy+=1,d.highestEnemy=Math.max(d.highestEnemy,d.currentEnemy);const we=Xe(d.currentEnemy);d.enemyHp=we.hp,d.enemyMaxHp=we.hp,d.enemyAttackProgress=0,d.playerAttackProgress=0}if(d.playerHp<=0){d.playerHp=0;const Ne=Kt("reviveSpeed",d.combatUpgrades.reviveSpeed),xe=y.BASE_REVIVE_TIME-Ne;if(O>=xe){O-=xe,d.playerHp=d.playerMaxHp,d.playerAttackProgress=0,d.currentEnemy=0;const ae=Xe(0);d.enemyHp=ae.hp,d.enemyMaxHp=ae.hp,d.enemyAttackProgress=0}else d.playerReviveTimer=xe-O,d.playerAttackProgress=0,O=0}}d.playerAttackProgress=0,d.enemyAttackProgress=0}else{for(P.hpRegen>0&&d.playerHp<d.playerMaxHp&&(d.playerHp=Math.min(d.playerMaxHp,d.playerHp+P.hpRegen*c)),d.playerAttackProgress+=c/d.playerAttackTime,d.enemyAttackProgress+=c/V.attackTime;d.playerAttackProgress>=1;){d.playerAttackProgress-=1;const O=d.playerDamageMin+Math.random()*(d.playerDamageMax-d.playerDamageMin);if(d.enemyHp-=O,d.enemyHp<=0){const H=pr(d.currentEnemy),Q=t().getMasteryEnergyCoreDropBonus()*t().getBonusCoresMultiplier(),$=H*Q;d.energyCores=d.energyCores.add($),d.totalEnemiesKilled+=1,d.currentEnemy+=1,d.highestEnemy=Math.max(d.highestEnemy,d.currentEnemy);const G=Xe(d.currentEnemy);d.enemyHp=G.hp,d.enemyMaxHp=G.hp,d.enemyAttackProgress=0}}for(;d.enemyAttackProgress>=1;){d.enemyAttackProgress-=1;const O=V.damageMin+Math.random()*(V.damageMax-V.damageMin);if(d.playerHp-=O,d.playerHp<=0){const H=Kt("reviveSpeed",d.combatUpgrades.reviveSpeed),Q=y.BASE_REVIVE_TIME-H;d.playerAttackProgress=0,d.currentEnemy=0;const $=Xe(0);d.enemyHp=$.hp,d.enemyMaxHp=$.hp,d.enemyAttackProgress=0,d.playerHp=0,d.playerReviveTimer=Q;break}}}(isNaN(d.playerAttackProgress)||!isFinite(d.playerAttackProgress))&&(d.playerAttackProgress=0),(isNaN(d.enemyAttackProgress)||!isFinite(d.enemyAttackProgress))&&(d.enemyAttackProgress=0),(isNaN(d.playerHp)||d.playerHp<0)&&(d.playerHp=0),(isNaN(d.enemyHp)||d.enemyHp<0)&&(d.enemyHp=0)}}const C=t().getEnchantmentStrengthMultiplier(1),T=h[0].count.toNumber()*y.GEM_RECIPES[0].manaPerSec*C;let k=1;for(let _=1;_<y.TIERS;_++){const P=t().getEnchantmentStrengthMultiplier(_+1),V=1+y.GEM_RECIPES[_].multiplier*P*h[_].count.toNumber();k*=V}k*=t().getManaBoostMultiplier();const K=T*k;let I=v.mana.add(K*c);const te=v.singularity.count>=y.AUTOMATION_THRESHOLDS.BREAK_SINGULARITY,Z=new z(y.SINGULARITY_THRESHOLD);te||(I=z.min(I,Z));let w=v.singularity;I.gte(Z)&&!v.singularity.unlocked&&(w={...v.singularity,unlocked:!0});let U=v.merge;I.gte(y.MERGE_UNLOCK_MANA)&&!v.merge.unlocked&&(U={...v.merge,unlocked:!0});let ee=v.ascensionTabUnlocked;I.gte(new z(y.ASCENSION_TAB_UNLOCK))&&!v.ascensionTabUnlocked&&(ee=!0);let q={...v.pulverizers,slots:v.pulverizers.slots.map(_=>({..._})),dust:[...v.pulverizers.dust]},ce={...v.enchanting,tiers:v.enchanting.tiers.map(_=>({..._}))};const R=y.AUTOMATION_THRESHOLDS,B=v.singularity.count>=R.T7_T8?8:v.singularity.count>=R.T5_T6?6:v.singularity.count>=R.T3_T4?4:v.singularity.count>=R.T1_T2?2:0,F=v.upgrades.map(_=>({..._})),ie=(v.singularity.skillLevels["gem-cap"]??0)*2;for(let _=1;_<=B;_++){const P=y.getUpgradeConfig(_,"speed"),V=y.getUpgradeConfig(_,"yield"),O=P.maxLevel+ie,H=V.maxLevel+ie;for(;F[_-1].speed<O;){const Q=P.baseCost*Math.pow(P.costScaling,F[_-1].speed);if(I.gte(Q))F[_-1].speed+=1;else break}for(;F[_-1].yield<H;){const Q=V.baseCost*Math.pow(V.costScaling,F[_-1].yield);if(I.gte(Q))F[_-1].yield+=1;else break}}if(v.singularity.count>=R.COMBAT&&!d.characterUnlocked&&I.gte(y.COMBAT_UNLOCK_COST)&&(I=I.sub(y.COMBAT_UNLOCK_COST),d.unlocked=!0,d.characterUnlocked=!0),v.singularity.count>=R.COMBAT&&d.characterUnlocked){d.combatUpgrades={...d.combatUpgrades};let _=!1;const P=t().getCombatUpgradeCapBonus(),V=["hp","damage","attackSpeed","reviveSpeed"];for(const O of V){let Q=y.COMBAT_UPGRADE_CONFIGS[O].maxLevel+P;for(O==="reviveSpeed"&&(Q=Math.min(Q,15));d.combatUpgrades[O]<Q;){const $=Ls(O,d.combatUpgrades[O],Q);if(I.gte($))d.combatUpgrades[O]+=1,_=!0;else break}}if(_){const O=t().getMasteryArtifactEffectiveness(),H=It(d.combatUpgrades,d.artifacts,O),Q=t().getDustDamageMultiplier(),$=t().getDustAttackSpeedMultiplier();d.playerMaxHp=H.maxHp;const G=d.playerHp/v.combat.playerMaxHp;d.playerHp=Math.min(H.maxHp,H.maxHp*G),d.playerDamageMin=H.damageMin*Q,d.playerDamageMax=H.damageMax*Q,d.playerAttackTime=H.attackTime/$}}if(v.singularity.count>=R.CORE_UPGRADES&&d.characterUnlocked){d.coreUpgrades={...d.coreUpgrades};const _=["craftingSpeed","manaBoost","yield","craftingSlots"];for(const P of _){const V=y.CORE_UPGRADE_CONFIGS[P];for(;d.coreUpgrades[P]<V.maxLevel;){const O=Os(P,d.coreUpgrades[P]);if(d.energyCores.gte(O))d.coreUpgrades[P]+=1,P==="craftingSlots"&&(M=[...M,{tier:0,prismId:null,artifactId:null,progress:0}]);else break}}}if(v.singularity.count>=R.FOUNDRY){const _=G=>G<y.FOUNDRY_COSTS.length?new z(y.FOUNDRY_COSTS[G]):new z(y.FOUNDRY_COSTS[y.FOUNDRY_COSTS.length-1]).mul(z.pow(10,G-y.FOUNDRY_COSTS.length+1)),P=w.skillLevels["extra-slots"]??0,V=d.coreUpgrades.craftingSlots,O=P+V,H=G=>Math.max(0,G-1-O);let Q=H(M.length),$=_(Q);for(;I.gte($)&&I.isFinite();)M=[...M,{tier:0,prismId:null,artifactId:null,progress:0}],Q=H(M.length),$=_(Q)}if(v.singularity.count>=R.MERGE&&U.unlocked){const _=U.grid.length;if(U.grid.some(V=>V.some(O=>O===null))){const O=new z(y.MERGE_BASE_COST).mul(z.pow(y.MERGE_COST_SCALING,U.gemSpawnCount));if(I.gte(O)){const H=[];for(let ae=0;ae<_;ae++)for(let we=0;we<_;we++)U.grid[ae][we]===null&&H.push({row:ae,col:we});const Q=H[Math.floor(Math.random()*H.length)],$=Math.random()*8.5;let G;$<1?G="t1":$<2?G="t2":$<3?G="t3":$<4?G="t4":$<5?G="t5":$<6?G="t6":$<7?G="t7":$<8?G="t8":G="prism";const ne=1+(w.skillLevels["merge-level"]??0);let se=U.grid.map(ae=>[...ae]);se[Q.row][Q.col]={type:G,level:ne};const me=(ae,we,Se)=>{const Ve=ae[we][Se];if(!Ve)return ae;for(let gt=0;gt<ae.length;gt++)for(let Qe=0;Qe<ae[0].length;Qe++){if(gt===we&&Qe===Se)continue;const Oa=ae[gt][Qe];if(Oa&&Oa.type===Ve.type&&Oa.level===Ve.level){const Da=ae.map(lf=>[...lf]);return Da[we][Se]={type:Ve.type,level:Ve.level+1},Da[gt][Qe]=null,me(Da,we,Se)}}return ae},de=me(se,Q.row,Q.col),Te={type:G,level:ne},he=de[Q.row]?de[Q.row][Q.col]:null,fe=he&&he.level>ne;se=hr(de);const xe=[{id:U.gemSpawnCount+1,spawned:Te,merged:fe?he:null,timestamp:Date.now()},...U.log||[]].slice(0,10);U={...U,grid:se,gemSpawnCount:U.gemSpawnCount+1,log:xe}}}}if(y.PULVERIZERS_ENABLED){const _=t().getDustYieldBonus();if(t().hasRainbowDust()){const V=q.rainbowDustPercent/100;if(V>0)for(let O=1;O<=y.TIERS;O++){const H=S[O-1]-E[O-1];if(H>0){const Q=H*V,$=Math.pow(2,O),G=Q/$*_;q.dust[O-1]+=G,h[O-1].count=h[O-1].count.sub(Q)}}}else if(q.slots.length>0)for(let V=0;V<q.slots.length;V++){const O=q.slots[V];if(!O.recipeId)continue;const H=y.PULVERIZER_RECIPES.find(se=>se.id===O.recipeId);if(!H)continue;const Q=H.cost.tier,$=H.cost.amount;if(h[Q-1].count.lt($))continue;const G=Math.pow(2,O.speedLevel),J=c/H.craftTime*m*G;O.progress+=J;const ne=Math.floor(O.progress);if(ne>0){const se=h[Q-1].count.toNumber(),me=Math.floor(se/$),de=Math.min(ne,me);de>0&&(h[Q-1].count=h[Q-1].count.sub($*de),q.dust[H.produces.tier-1]+=H.produces.amount*_*de,O.progress-=de),de<ne&&(O.progress=1)}}}if((w.skillLevels["enchant-automation"]??0)>0&&y.ENCHANTING_ENABLED){const _=["damageMult","attackSpeedMult"];for(const P of _){const V=y.DUST_UPGRADE_CONFIGS;if(!V)break;const O=d.dustUpgrades[P],H=V[P].baseCost.map(({tier:$,amount:G})=>({tier:$,amount:Math.floor(G*Math.pow(V[P].costScaling,O))}));if(H.every(({tier:$,amount:G})=>q.dust[$-1]>=G)){for(const{tier:se,amount:me}of H)q.dust[se-1]-=me;d.dustUpgrades={...d.dustUpgrades,[P]:O+1};const $=Math.pow(V.damageMult.effect,d.dustUpgrades.damageMult),G=Math.pow(V.attackSpeedMult.effect,d.dustUpgrades.attackSpeedMult),J=t().getMasteryArtifactEffectiveness(),ne=It(d.combatUpgrades,d.artifacts,J);d.playerDamageMin=ne.damageMin*$,d.playerDamageMax=ne.damageMax*$,d.playerAttackTime=ne.attackTime/G}}if(ce.automationEnabled)for(let P=1;P<=y.TIERS;P++){const V=P-1,O=ce.automationSettings[V],H=ce.tiers[V],Q=H.speed+H.strength+H.discount,$=Math.floor((Q+1)*O.ratios.speed),G=Math.floor((Q+1)*O.ratios.strength),J=P===1?0:Math.floor((Q+1)*O.ratios.discount),ne=$-H.speed,se=G-H.strength,me=P===1?-999:J-H.discount;let de=null;const Te=Math.max(ne,se,me);if(Te>0?ne===Te?de="speed":se===Te?de="strength":me===Te&&P>1&&(de="discount"):(de=O.overflow,de==="discount"&&P===1&&(de="speed")),!de)continue;const he=y.ENCHANTING_CONFIG,fe=(P-1)*he.GEM_TIER_COST_OFFSET,Ne=Q+fe,xe=he.TIER_ADD_INTERVAL,ae=[];for(let Se=1;Se<=y.TIERS;Se++){const Ve=(Se-1)*xe;if(Ne<Ve)break;const gt=Ne-Ve;let Qe;gt===0?Qe=he.BASE_DUST_AMOUNT:gt===1?Qe=he.BASE_DUST_AMOUNT*he.FIRST_LEVEL_MULT:Qe=he.BASE_DUST_AMOUNT*he.FIRST_LEVEL_MULT*Math.pow(he.COST_MULTIPLIER,gt-1),ae.push({tier:Se,amount:Math.floor(Qe)})}if(h[V].count.gte(1)&&ae.every(({tier:Se,amount:Ve})=>q.dust[Se-1]>=Ve)){for(const{tier:Se,amount:Ve}of ae)q.dust[Se-1]-=Ve;ce.tiers[V]={...ce.tiers[V],[de]:ce.tiers[V][de]+1},ce.unlocked=!0}}}return{mana:I,gems:h,foundries:M,upgrades:F,prisms:g,combat:d,singularity:w,mastery:x,merge:U,pulverizers:q,enchanting:ce,lastTimestamp:Date.now(),ascensionTabUnlocked:ee}})}t().saveGame()},addGems:(n,r)=>{e(s=>{const a=[...s.gems];return a[n-1]={...a[n-1],count:a[n-1].count.add(r),unlocked:!0},{gems:a}}),t().saveGame()},hasAnyUnlocked:()=>t().gems.some(r=>r.unlocked),hardReset:()=>{localStorage.removeItem(Fs),localStorage.removeItem(mi),hi(!0),ju(!1),e({mana:new z(0),gems:Us(),foundries:[{tier:1,prismId:null,artifactId:null,progress:0}],upgrades:Pr(),prisms:Rr(),combat:Lr(),singularity:ha(),mastery:ga(),merge:xa(),pulverizers:Or(),enchanting:Dr(),lastTimestamp:Date.now(),ascensionLevel:0,ascensionTabUnlocked:!1}),t().saveGame(!0)},getSaveData:()=>{const n=t();return Tu({mana:n.mana,gems:n.gems,foundries:n.foundries,upgrades:n.upgrades,prisms:n.prisms,combat:n.combat,singularity:n.singularity,mastery:n.mastery,merge:n.merge,pulverizers:n.pulverizers,enchanting:n.enchanting,lastTimestamp:n.lastTimestamp,ascensionLevel:n.ascensionLevel,ascensionTabUnlocked:n.ascensionTabUnlocked})},loadSaveData:n=>{const r=fl(n);if(r){hi(!0),ju(!1),e(r);const s=r.lastTimestamp,l=Date.now()-s;l>0&&t().gameLoop(l);const o=t();if(o.combat.characterUnlocked&&o.combat.playerReviveTimer<=0&&(isNaN(o.combat.playerHp)||o.combat.playerHp<=0)){const u=t().getMasteryArtifactEffectiveness(),c=It(o.combat.combatUpgrades,o.combat.artifacts,u);e(m=>({combat:{...m.combat,playerHp:c.maxHp,playerAttackProgress:0,enemyAttackProgress:0}}))}if(y.MERGE_CONFIG.costType==="dust"){const u=t().merge.grid;let c=0;for(const f of u)for(const p of f)p&&(c+=Math.pow(2,p.level-1));t().merge.gemSpawnCount!==c&&e(f=>({merge:{...f.merge,gemSpawnCount:c}}))}return t().saveGame(!0),!0}return!1},saveGame:n=>{if(!Gh()){zh()&&console.warn("Saving disabled - previous load failed. Check your save data.");return}const r=Date.now();if(!n&&r-$h()<Yh())return;const s=t();localStorage.setItem(Fs,Tu({mana:s.mana,gems:s.gems,foundries:s.foundries,upgrades:s.upgrades,prisms:s.prisms,combat:s.combat,singularity:s.singularity,mastery:s.mastery,merge:s.merge,pulverizers:s.pulverizers,enchanting:s.enchanting,lastTimestamp:s.lastTimestamp,ascensionLevel:s.ascensionLevel,ascensionTabUnlocked:s.ascensionTabUnlocked})),localStorage.setItem(mi,r.toString()),Hh(r)},getSingularityPoints:()=>{const n=t(),r=n.mana,s=n.singularity.count>=y.AUTOMATION_THRESHOLDS.BREAK_SINGULARITY;let a=y.SP_BASE;if(s&&r.gt(y.SINGULARITY_THRESHOLD)){const f=Math.floor(r.log10().toNumber()-new z(y.SINGULARITY_THRESHOLD).log10().toNumber());a=y.SP_BASE*Math.pow(y.SP_OOM_SCALING,f)}const l=t().getMasterySingularityPointsBonus(),o=n.singularity.count>=y.AUTOMATION_THRESHOLDS.SP_BOOST?1.5:1,u=y.SP_MULTIPLIER,c=n.singularity.skillLevels["bonus-sp"]??0,m=Math.pow(1.2,c);return Math.floor(a*l*o*u*m)},getSingularityTierSpeedBoost:n=>{const r=t(),s=`t${n}-boost`,a=r.singularity.skillLevels[s]??0;return Math.pow(1.2,a)},getSingularityTierYieldBoost:n=>{const r=t(),s=`t${n}-boost`,a=r.singularity.skillLevels[s]??0;return Math.pow(1.05,a)},getCombatUpgradeCapBonus:()=>{const n=t(),r=n.singularity.skillLevels["combat-cap"]??0,s=n.singularity.count>=y.AUTOMATION_THRESHOLDS.COMBAT_VETERAN?5:0;return r+s},getGemUpgradeCapBonus:()=>(t().singularity.skillLevels["gem-cap"]??0)*2,getBonusCoresMultiplier:()=>1+(t().singularity.skillLevels["bonus-cores"]??0)*.5,getPrismPowerBonus:()=>1+(t().singularity.skillLevels["prism-power"]??0)*.1,getMergeGridSizeBonus:()=>{const n=t(),r=n.singularity.skillLevels["merge-grid"]??0,s=n.singularity.count>=y.AUTOMATION_THRESHOLDS.GRID_EXPANSION?1:0;return r+s},getMergeLevelBonus:()=>t().singularity.skillLevels["merge-level"]??0,getDustYieldBonus:()=>1+(t().singularity.skillLevels["dust-yield"]??0)*.2,getEnchantmentPowerBonus:()=>{const r=t().singularity.skillLevels["strong-enchantments"]??0;return Math.pow(1.1,r)},hasAdjacentNode:n=>{const r=y.SINGULARITY_NODES.find(l=>l.id===n);if(!r)return!1;const s=t();return y.SINGULARITY_NODES.filter(l=>Math.abs(l.x-r.x)===1&&l.y===r.y||Math.abs(l.y-r.y)===1&&l.x===r.x).some(l=>(s.singularity.skillLevels[l.id]??0)>0)},getNodeCost:n=>{const r=y.SINGULARITY_NODES.find(a=>a.id===n);if(!r)return 1/0;const s=t().singularity.skillLevels[n]??0;return s>=r.maxLevel?1/0:r.costs?r.costs[s]??1/0:r.baseCost!==void 0&&r.costScaling!==void 0?Math.floor(r.baseCost*Math.pow(r.costScaling,s)):1/0},canBuySkillNode:n=>{const r=t(),s=y.SINGULARITY_NODES.find(o=>o.id===n);if(!s||(r.singularity.skillLevels[n]??0)>=s.maxLevel||n!=="global-speed"&&!t().hasAdjacentNode(n))return!1;const l=t().getNodeCost(n);return r.singularity.points>=l},buySkillNode:n=>{if(!t().canBuySkillNode(n))return;const r=t(),s=r.singularity.skillLevels[n]??0,a=t().getNodeCost(n),l=n==="extra-slots"?[...r.foundries,{tier:0,prismId:null,artifactId:null,progress:0}]:r.foundries;let o=r.merge;if(n==="merge-grid"){const u=r.merge.grid,c=u.length,m=c+1,f=[];for(let p=0;p<m;p++){const N=[];for(let v=0;v<m;v++)p<c&&v<c?N.push(u[p][v]):N.push(null);f.push(N)}o={...r.merge,grid:f}}e({foundries:l,merge:o,singularity:{...r.singularity,points:r.singularity.points-a,skillLevels:{...r.singularity.skillLevels,[n]:s+1}}}),t().saveGame()},performSingularity:()=>{const n=t();if(n.mana.lt(new z(y.SINGULARITY_THRESHOLD)))return;const r=t().getSingularityPoints(),s=n.singularity.count+y.COUNT_INCREMENT,a=n.singularity.skillLevels["keep-prism"]??0,l=n.singularity.skillLevels["keep-artifact"]??0,o=n.singularity.skillLevels["extra-slots"]??0,u=y.PRISM_RECIPES.filter(E=>n.prisms[E.id]?.owned).sort((E,C)=>C.tier-E.tier).slice(0,a),c=Rr();for(const E of u)c[E.id]={chunksCompleted:E.chunks,owned:!0};const m=y.ARTIFACT_RECIPES.filter(E=>n.combat.artifacts[E.id]?.owned).reverse().slice(0,l),f=co();for(const E of m)f[E.id]={cyclesCompleted:E.cycles,owned:!0};const p=1+o,N=[];for(let E=0;E<p;E++)N.push({tier:E===0?1:0,prismId:null,artifactId:null,progress:0});const v=Lr();if(v.unlocked=!0,v.characterUnlocked=!1,v.artifacts=f,m.length>0){const E=t().getMasteryArtifactEffectiveness(),C=It(v.combatUpgrades,f,E),T=t().getDustDamageMultiplier(),k=t().getDustAttackSpeedMultiplier();v.playerMaxHp=C.maxHp,v.playerHp=C.maxHp,v.playerDamageMin=C.damageMin*T,v.playerDamageMax=C.damageMax*T,v.playerAttackTime=C.attackTime/k}const h=n.singularity.count>=1||s>=1?{...n.mastery,unlocked:!0}:n.mastery,M=n.singularity.skillLevels["merge-grid"]??0,g=s>=y.AUTOMATION_THRESHOLDS.GRID_EXPANSION?1:0,d=y.MERGE_GRID_SIZE+M+g,x=n.merge.grid.length;let S=n.merge.grid;x!==d&&(S=hr(n.merge.grid,d)),e({mana:new z(0),gems:Us(),foundries:N,upgrades:Pr(),prisms:c,combat:v,singularity:{...n.singularity,count:s,points:n.singularity.points+r},mastery:h,merge:{...n.merge,grid:S,gemSpawnCount:y.MERGE_CONFIG.resetOnSingularity?0:n.merge.gemSpawnCount},pulverizers:{...Or(),rainbowDustPercent:n.pulverizers.rainbowDustPercent},enchanting:{...Dr(),unlocked:n.enchanting.unlocked,automationEnabled:n.enchanting.automationEnabled,automationSettings:n.enchanting.automationSettings}}),t().saveGame(!0)},loadGame:()=>{const n=localStorage.getItem(Fs),r=localStorage.getItem(mi);if(console.log("[loadGame] Starting...",{hasSavedData:!!n,savedTimestamp:r,savedTimestampDate:r?new Date(parseInt(r,10)).toISOString():null}),n){const s=fl(n);if(s){hi(!0),e(s);const a=t().combat;if(a.unlocked){const f=t().getMasteryArtifactEffectiveness(),p=It(a.combatUpgrades,a.artifacts,f),N=t().getDustDamageMultiplier(),v=t().getDustAttackSpeedMultiplier();e(h=>({combat:{...h.combat,playerMaxHp:p.maxHp,playerDamageMin:p.damageMin*N,playerDamageMax:p.damageMax*N,playerAttackTime:p.attackTime/v,playerHp:Math.min(h.combat.playerHp,p.maxHp)}}))}const l=t().getMergeGridSizeBonus(),o=y.MERGE_GRID_SIZE+l,u=t().merge.grid,c=u.length,m=hr(u,o);if((c!==o||u.some(f=>f.some(p=>p!==null)))&&(console.log("[loadGame] Fixing merge grid:",{currentSize:c,expectedSize:o}),e(f=>({merge:{...f.merge,grid:m}}))),y.MERGE_CONFIG.costType==="dust"){const f=t().merge.grid;let p=0;for(const v of f)for(const h of v)h&&(p+=Math.pow(2,h.level-1));const N=t().merge.gemSpawnCount;N!==p&&(console.log("[loadGame] Fixing merge spawn count:",{currentSpawnCount:N,correctSpawnCount:p}),e(v=>({merge:{...v.merge,gemSpawnCount:p}})))}if(r){const f=parseInt(r,10),p=Date.now(),N=p-f;console.log("[loadGame] Offline processing:",{lastSave:f,lastSaveDate:new Date(f).toISOString(),now:p,nowDate:new Date(p).toISOString(),offlineDeltaMs:N,offlineDeltaSeconds:N/1e3,offlineDeltaMinutes:N/1e3/60,offlineDeltaHours:N/1e3/60/60}),N>0&&t().gameLoop(N)}else console.log("[loadGame] No savedTimestamp in localStorage!")}}},getMasteryTotalShards:n=>{const s=t().mastery.tiers[n-1];return s?(s.level-1)*y.MASTERY_CONFIG.shardsPerLevel+s.shards:0},getMasteryShardSpeedBonus:n=>1+t().getMasteryTotalShards(n)*y.MASTERY_CONFIG.shardSpeedBonus,getMasteryShardYieldBonus:n=>1+t().getMasteryTotalShards(n)*y.MASTERY_CONFIG.shardYieldBonus,getMasteryLevelBonus:n=>{const s=t().mastery.tiers[n-1];return s?s.level-1:0},getMasteryGlobalSpeedBonus:()=>{const n=t(),r=(n.mastery.tiers[0]?.level??1)-1,s=(n.mastery.tiers[5]?.level??1)-1,a=r*y.MASTERY_CONFIG.tierBonuses[0].value,l=s*y.MASTERY_CONFIG.tierBonuses[5].value;return 1+a+l},getMasteryGlobalYieldBonus:()=>{const n=t(),r=(n.mastery.tiers[3]?.level??1)-1,s=(n.mastery.tiers[7]?.level??1)-1,a=r*y.MASTERY_CONFIG.tierBonuses[3].value,l=s*y.MASTERY_CONFIG.tierBonuses[7].value;return 1+a+l},getMasteryPrismEffectiveness:()=>{const s=1+((t().mastery.tiers[1]?.level??1)-1)*y.MASTERY_CONFIG.tierBonuses[1].value,a=t().getMergePrismBonus(),l=t().getPrismPowerBonus();return s*a*l},getPrismEffectiveBonuses:n=>{const r=y.PRISM_RECIPES.find(a=>a.id===n);if(!r)return{speedMult:1,yieldMult:1,tiers:[]};const s=t().getMasteryPrismEffectiveness();return{speedMult:r.bonuses.speedMult*s,yieldMult:r.bonuses.yieldMult*s,tiers:r.bonuses.tiers}},getMasteryEnergyCoreDropBonus:()=>1+((t().mastery.tiers[2]?.level??1)-1)*y.MASTERY_CONFIG.tierBonuses[2].value,getMasterySingularityPointsBonus:()=>1+((t().mastery.tiers[4]?.level??1)-1)*y.MASTERY_CONFIG.tierBonuses[4].value,getMasteryArtifactEffectiveness:()=>1+((t().mastery.tiers[6]?.level??1)-1)*y.MASTERY_CONFIG.tierBonuses[6].value,clearUnviewedShards:()=>{e(n=>({mastery:{...n.mastery,unviewedShards:0}}))},getMergeGemCost:()=>{const n=t(),r=y.MERGE_CONFIG;return r.costType==="mana"&&r.manaCost?new z(r.manaCost.baseCost).mul(z.pow(r.manaCost.scaling,n.merge.gemSpawnCount)):new z(y.MERGE_BASE_COST).mul(z.pow(y.MERGE_COST_SCALING,n.merge.gemSpawnCount))},getMergeDustCosts:()=>{const n=t(),r=y.MERGE_CONFIG;if(r.costType!=="dust"||!r.dustCost)return[];const s=n.merge.gemSpawnCount,{baseCost:a,scaling:l,ignoreBefore:o}=r.dustCost,u={};for(const{tier:m,count:f}of o)u[m]=f;const c=[];for(const{tier:m,amount:f}of a){if(u[m]!==void 0&&s<u[m])continue;const p=f*Math.pow(l,s);c.push({tier:m,amount:p})}return c},canBuyMergeGem:()=>{const n=t();if(!n.mastery.unlocked||!n.merge.grid.some(l=>l.some(o=>o===null)))return!1;if(y.MERGE_CONFIG.costType==="dust"){const l=t().getMergeDustCosts();for(const{tier:o,amount:u}of l)if(n.pulverizers.dust[o-1]<u)return!1;return!0}const a=t().getMergeGemCost();return n.mana.gte(a)},buyMergeGem:()=>{if(!t().canBuyMergeGem())return;const n=t(),r=t().getMergeGemCost(),s=n.merge.grid.length,a=[];for(let E=0;E<s;E++)for(let C=0;C<s;C++)n.merge.grid[E][C]===null&&a.push({row:E,col:C});if(a.length===0)return;const l=a[Math.floor(Math.random()*a.length)],o=Math.random()*8.5;let u;o<1?u="t1":o<2?u="t2":o<3?u="t3":o<4?u="t4":o<5?u="t5":o<6?u="t6":o<7?u="t7":o<8?u="t8":u="prism";const m=1+t().getMergeLevelBonus(),f=n.merge.grid.map(E=>[...E]);f[l.row][l.col]={type:u,level:m};const p=(E,C,T)=>{const k=E[C][T];if(!k)return E;for(let K=0;K<E.length;K++)for(let I=0;I<E[0].length;I++){if(K===C&&I===T)continue;const te=E[K][I];if(te&&te.type===k.type&&te.level===k.level){const Z=E.map(w=>[...w]);return Z[C][T]={type:k.type,level:k.level+1},Z[K][I]=null,p(Z,C,T)}}return E},N=p(f,l.row,l.col),v=hr(N),h={type:u,level:m},M=N[l.row][l.col],g=M&&M.level>m,x=[{id:n.merge.gemSpawnCount+1,spawned:h,merged:g?M:null,timestamp:Date.now()},...n.merge.log].slice(0,10);if(y.MERGE_CONFIG.costType==="dust"){const E=t().getMergeDustCosts(),C=[...n.pulverizers.dust];for(const{tier:T,amount:k}of E)C[T-1]-=k;e({pulverizers:{...n.pulverizers,dust:C},merge:{...n.merge,grid:v,gemSpawnCount:n.merge.gemSpawnCount+1,log:x}})}else e({mana:n.mana.sub(r),merge:{...n.merge,grid:v,gemSpawnCount:n.merge.gemSpawnCount+1,log:x}});t().saveGame()},getMergeSpeedBonus:n=>{const r=t(),s=`t${n}`;let a=0;for(const l of r.merge.grid)for(const o of l)o&&o.type===s&&(a+=.5*Math.pow(2.1,o.level-1));return 1+a},getMergeYieldBonus:n=>{const r=t(),s=`t${n}`;let a=0;for(const l of r.merge.grid)for(const o of l)o&&o.type===s&&(a+=.2*Math.pow(2.1,o.level-1));return 1+a},getMergePrismBonus:()=>{const n=t();let r=0;for(const s of n.merge.grid)for(const a of s)a&&a.type==="prism"&&(r+=.05*Math.pow(2.1,a.level-1));return 1+r},deleteMergeGem:(n,r)=>{const s=t(),a=s.merge.grid;if(n<0||n>=a.length||r<0||r>=a[0].length)return;const l=a[n][r];if(!l)return;const o=a.map(p=>[...p]);o[n][r]=null;const u=hr(o),c=y.MERGE_CONFIG,m=Math.pow(2,l.level-1),f=c.costType==="dust"?Math.max(0,s.merge.gemSpawnCount-m):s.merge.gemSpawnCount;e({merge:{...s.merge,grid:u,gemSpawnCount:f}}),t().saveGame()},canAscend:()=>t().mana.gte(new z(y.ASCENSION_COST)),performAscension:()=>{const n=t();if(!n.mana.gte(new z(y.ASCENSION_COST)))return;const r=n.ascensionLevel+1;e({mana:new z(0),gems:Us(),foundries:[{tier:1,prismId:null,artifactId:null,progress:0}],upgrades:Pr(),prisms:Rr(),combat:Lr(),singularity:ha(),mastery:ga(),merge:xa(),pulverizers:Or(),enchanting:Dr(),lastTimestamp:Date.now(),ascensionLevel:r,ascensionTabUnlocked:!1}),t().saveGame(!0)},getPulverizerSlotCost:()=>{const n=t(),r=y.PULVERIZER_SLOT_COSTS,s=n.pulverizers.slots.length;return s>=r.length?1/0:r[s]},canBuyPulverizerSlot:()=>{if(!y.PULVERIZERS_ENABLED)return!1;const n=t(),r=t().getPulverizerSlotCost();return n.mana.gte(r)},buyPulverizerSlot:()=>{if(!t().canBuyPulverizerSlot())return;const n=t(),r=t().getPulverizerSlotCost();e({mana:n.mana.sub(r),pulverizers:{...n.pulverizers,unlocked:!0,slots:[...n.pulverizers.slots,{recipeId:null,progress:0,speedLevel:0}]}})},setPulverizerRecipe:(n,r)=>{const s=t();if(n<0||n>=s.pulverizers.slots.length)return;const a=[...s.pulverizers.slots];a[n]={...a[n],recipeId:r,progress:0},e({pulverizers:{...s.pulverizers,slots:a}})},canAffordPulverizerRecipe:n=>{const r=t(),s=y.PULVERIZER_RECIPES.find(l=>l.id===n);return s?r.gems[s.cost.tier-1].count.gte(s.cost.amount):!1},getTotalDust:n=>{const r=t();return n<1||n>r.pulverizers.dust.length?0:r.pulverizers.dust[n-1]},getPulverizerSpeedMultiplier:n=>{const s=t().pulverizers.slots[n];return s?Math.pow(2,s.speedLevel):1},getPulverizerSpeedCost:n=>{const s=t().pulverizers.slots[n];if(!s)return 1/0;const a=y.PULVERIZER_CONFIG.SPEED_UPGRADE;if(!a)return 1e6*Math.pow(10,s.speedLevel);let l=a.baseCost;for(let o=0;o<s.speedLevel;o++){let u=a.scaling[0]?.multiplier??10;for(const c of a.scaling)l>=c.threshold&&(u=c.multiplier);l*=u}return l},canBuyPulverizerSpeed:n=>{if(!y.PULVERIZERS_ENABLED)return!1;const r=t();if(!r.pulverizers.slots[n])return!1;const a=t().getPulverizerSpeedCost(n);return r.mana.gte(a)},buyPulverizerSpeed:n=>{if(!t().canBuyPulverizerSpeed(n))return;const r=t(),s=t().getPulverizerSpeedCost(n),a=[...r.pulverizers.slots];a[n]={...a[n],speedLevel:a[n].speedLevel+1},e({mana:r.mana.sub(s),pulverizers:{...r.pulverizers,slots:a}}),t().saveGame()},resetPulverizerSpeed:n=>{const r=t(),s=r.pulverizers.slots[n];if(!s||s.speedLevel<=0)return;const a=[...r.pulverizers.slots];a[n]={...a[n],speedLevel:0},e({pulverizers:{...r.pulverizers,slots:a}}),t().saveGame()},hasRainbowDust:()=>(t().singularity.skillLevels["rainbow-dust"]??0)>0,setRainbowDustPercent:n=>{const r=Math.max(0,Math.min(100,n));e(s=>({pulverizers:{...s.pulverizers,rainbowDustPercent:r}})),t().saveGame()},getTotalEnchantmentLevel:n=>{const s=t().enchanting.tiers[n-1];return s?s.speed+s.strength+s.discount:0},getEnchantmentCost:n=>{if(!y.ENCHANTING_ENABLED)return{dust:[]};const r=y.ENCHANTING_CONFIG,s=t().getTotalEnchantmentLevel(n),a=(n-1)*r.GEM_TIER_COST_OFFSET,l=s+a,o=[],u=r.TIER_ADD_INTERVAL;for(let c=1;c<=y.TIERS;c++){const m=(c-1)*u;if(l<m)break;const f=l-m;let p;f===0?p=r.BASE_DUST_AMOUNT:f===1?p=r.BASE_DUST_AMOUNT*r.FIRST_LEVEL_MULT:p=r.BASE_DUST_AMOUNT*r.FIRST_LEVEL_MULT*Math.pow(r.COST_MULTIPLIER,f-1),o.push({tier:c,amount:Math.floor(p)})}return{dust:o}},canAffordEnchantment:n=>{if(!y.ENCHANTING_ENABLED)return!1;const r=t();if(r.gems[n-1].count.lt(1))return!1;const s=t().getEnchantmentCost(n);for(const a of s.dust)if(r.pulverizers.dust[a.tier-1]<a.amount)return!1;return!0},buyEnchantment:(n,r)=>{if(!t().canAffordEnchantment(n)||r==="discount"&&n===1)return;const s=t(),a=t().getEnchantmentCost(n),l=[...s.pulverizers.dust];for(const u of a.dust)l[u.tier-1]-=u.amount;const o=s.enchanting.tiers.map((u,c)=>c===n-1?{...u,[r]:u[r]+1}:{...u});e({pulverizers:{...s.pulverizers,dust:l},enchanting:{...s.enchanting,unlocked:!0,tiers:o}}),t().saveGame()},resetEnchantments:n=>{const r=t(),s=r.enchanting.tiers[n-1];if(!s||s.speed===0&&s.strength===0&&s.discount===0)return;const a=r.enchanting.tiers.map((l,o)=>o===n-1?{speed:0,strength:0,discount:0}:{...l});e({enchanting:{...r.enchanting,tiers:a}}),t().saveGame()},getEnchantmentSpeedMultiplier:n=>{if(!y.ENCHANTING_ENABLED)return 1;const s=t().enchanting.tiers[n-1]?.speed??0;if(s===0)return 1;const a=y.ENCHANTING_CONFIG,l=t().getEnchantmentPowerBonus();return(1+s*a.SPEED_BASE_BONUS)*Math.pow(a.SPEED_COMPOUND_RATE,s)*l},getEnchantmentStrengthMultiplier:n=>{if(!y.ENCHANTING_ENABLED)return 1;const s=t().enchanting.tiers[n-1]?.strength??0;if(s===0)return 1;const a=y.ENCHANTING_CONFIG,l=t().getEnchantmentPowerBonus();return(1+s*a.STRENGTH_BASE_BONUS)*Math.pow(a.STRENGTH_COMPOUND_RATE,s)*l},getEnchantmentDiscountMultiplier:n=>{if(!y.ENCHANTING_ENABLED||n===1)return 1;const s=t().enchanting.tiers[n-1]?.discount??0;if(s===0)return 1;const a=y.ENCHANTING_CONFIG,l=t().getEnchantmentPowerBonus();return Math.pow(a.DISCOUNT_COMPOUND_RATE,s*l)},hasEnchantAutomation:()=>(t().singularity.skillLevels["enchant-automation"]??0)>0,setEnchantAutomationEnabled:n=>{const r=t();e({enchanting:{...r.enchanting,automationEnabled:n}}),t().saveGame()},setTierAutomationRatios:(n,r)=>{const s=t(),a=n-1;if(a<0||a>=s.enchanting.automationSettings.length)return;const l=s.enchanting.automationSettings.map((o,u)=>u===a?{...o,ratios:r}:o);e({enchanting:{...s.enchanting,automationSettings:l}}),t().saveGame()},setTierAutomationOverflow:(n,r)=>{const s=t(),a=n-1;if(a<0||a>=s.enchanting.automationSettings.length)return;const l=s.enchanting.automationSettings.map((o,u)=>u===a?{...o,overflow:r}:o);e({enchanting:{...s.enchanting,automationSettings:l}}),t().saveGame()},copyAutomationSettings:n=>{const r=t(),s=n-1;if(s<1||s>=r.enchanting.automationSettings.length)return;const a=r.enchanting.automationSettings[s],l=r.enchanting.automationSettings.map((o,u)=>u===0?o:{...a});e({enchanting:{...r.enchanting,automationSettings:l}}),t().saveGame()}}));Xd=b;function Wh(){const e=b(s=>s.gameLoop),t=b(s=>s.loadGame),n=re.useRef(null),r=re.useRef(!1);re.useEffect(()=>{r.current||(t(),r.current=!0);let s,a=null;const l=o=>{n.current===null&&(n.current=o);const u=o-n.current;n.current=o,u>0&&e(u),a!==null&&clearTimeout(a),a=window.setTimeout(()=>{l(performance.now())},100),s=requestAnimationFrame(l)};return s=requestAnimationFrame(l),()=>{cancelAnimationFrame(s),a!==null&&clearTimeout(a)}},[e,t])}const Jd="evercraft-idle-settings",Iu={scientificNotationThreshold:21};let Gn=null;function mo(){if(Gn)return Gn;try{const t=localStorage.getItem(Jd);if(t){const n={...Iu,...JSON.parse(t)};return Gn=n,n}}catch{}const e={...Iu};return Gn=e,e}function Kh(e){Gn={...mo(),...e},localStorage.setItem(Jd,JSON.stringify(Gn))}function Zh(){return mo().scientificNotationThreshold}function Qh(e){Kh({scientificNotationThreshold:e})}const _u=["","k","m","b","t","qa","qi"];function D(e){if(!isFinite(e))return"";if(e<0)return"-"+D(-e);if(e===0)return"0";const t=Math.pow(10,Zh());if(e>=t){const a=Math.floor(Math.log10(e));return(e/Math.pow(10,a)).toFixed(1)+"e"+a}let n=0,r=e;for(;r>=1e3&&n<_u.length-1;)r/=1e3,n++;let s;return r<10?s=r.toFixed(2):r<100?s=r.toFixed(1):s=Math.floor(r).toString(),s+_u[n]}function wr(e){if(e===0)return"+0/s";const t=e<0,n=Math.abs(e),r=t?"-":"+";if(n>=1)return`${r}${D(n)}/s`;const s=n*60;if(s>=1)return`${r}${D(s)}/min`;const a=n*3600;return`${r}${D(a)}/hr`}function gr(){const[e,t]=re.useState(!1),n=re.useCallback(()=>t(!0),[]),r=re.useCallback(()=>t(!1),[]);return{isHovered:e,hoverProps:{onMouseEnter:n,onMouseLeave:r}}}function Xh({activeTab:e,setActiveTab:t}){const n=b(S=>S.mana),r=b(S=>S.combat),s=b(S=>S.singularity),a=b(S=>S.mastery),l=b(S=>S.merge),o=b(S=>S.enchanting),u=b(S=>S.pulverizers),c=b(S=>S.ascensionTabUnlocked),m=b(S=>S.unlockCombat),f=gr(),p=gr(),N=gr(),v=gr(),h=gr(),M=r.unlocked,g=n.gte(Wn),d=M?100:Math.min(n.toNumber()/Wn*100,100),x=()=>{M?t("combat"):g&&(m(),t("combat"))};return i.jsxs("nav",{className:"w-full h-10 bg-dark-surface border-b border-dark-border flex items-center px-2 gap-1",children:[i.jsx("button",{onClick:()=>t("crafting"),className:`px-3 py-1 rounded text-sm text-light-text ${e==="crafting"?"bg-accent-primary":"bg-dark-surface hover:bg-dark-hover"}`,children:"Crafting"}),y.ENCHANTING_ENABLED&&i.jsx("div",{className:"relative",...v.hoverProps,children:(()=>{const S=u.dust[0]>=y.ENCHANTING_UNLOCK_DUST,E=o.unlocked||S;return i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>E&&t("enchanting"),disabled:!E,className:`relative px-4 py-1 rounded text-sm overflow-hidden min-w-[100px] ${E?e==="enchanting"?"bg-gradient-to-b from-[#a78bfa] to-[#7c3aed] text-light-text":"bg-dark-surface hover:bg-dark-hover text-[#a78bfa]":"bg-[#1a1a1a] text-[#666666] cursor-not-allowed"}`,children:[!E&&i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${Math.min(u.dust[0]/y.ENCHANTING_UNLOCK_DUST*100,100)}%`,background:"linear-gradient(to bottom, #7c3aed, #6d28d9)"}}),i.jsx("span",{className:"relative",children:E?"Enchanting":" ???"})]}),!E&&v.isHovered&&i.jsx("div",{className:"absolute z-50 top-full mt-1 left-0 bg-[#1a1a1a] border border-dark-border rounded px-2 py-1 whitespace-nowrap shadow-lg",children:i.jsxs("span",{className:"text-xs text-[#a3a3a3]",children:["Requires ",y.ENCHANTING_UNLOCK_DUST," T1 dust to unlock"]})})]})})()}),i.jsxs("div",{className:"relative",...f.hoverProps,children:[i.jsxs("button",{onClick:x,disabled:!M&&!g,className:`relative px-4 py-1 rounded text-sm overflow-hidden min-w-[80px] ${M?e==="combat"?"bg-accent-primary text-light-text":"bg-dark-surface hover:bg-dark-hover text-light-text":g?"bg-dark-surface hover:bg-dark-hover text-light-text cursor-pointer":"bg-[#1a1a1a] text-[#666666] cursor-not-allowed"}`,children:[!M&&i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${d}%`,background:"linear-gradient(to bottom, #166534, #14532d)"}}),i.jsx("span",{className:"relative",children:M?"Combat":" ???"})]}),!M&&f.isHovered&&i.jsx("div",{className:"absolute z-50 top-full mt-1 left-0 bg-[#1a1a1a] border border-dark-border rounded px-2 py-1 whitespace-nowrap shadow-lg",children:i.jsxs("span",{className:"text-xs text-[#a3a3a3]",children:["Requires ",D(Wn)," mana to unlock"]})})]}),r.unlocked&&i.jsxs("div",{className:"relative",...p.hoverProps,children:[i.jsxs("button",{onClick:()=>s.unlocked&&t("singularity"),disabled:!s.unlocked,className:`relative px-4 py-1 rounded text-sm overflow-hidden min-w-[100px] ${s.unlocked?e==="singularity"?"bg-accent-primary text-light-text":"bg-dark-surface hover:bg-dark-hover text-light-text":"bg-[#1a1a1a] text-[#666666] cursor-not-allowed"}`,children:[!s.unlocked&&i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${Math.min(n.log10().toNumber()/27*100,100)}%`,background:"linear-gradient(to bottom, #6b21a8, #581c87)"}}),i.jsx("span",{className:"relative",children:s.unlocked?"Singularity":" ???"})]}),!s.unlocked&&p.isHovered&&i.jsx("div",{className:"absolute z-50 top-full mt-1 left-0 bg-[#1a1a1a] border border-dark-border rounded px-2 py-1 whitespace-nowrap shadow-lg",children:i.jsxs("span",{className:"text-xs text-[#a3a3a3]",children:["Requires ",D(new z(y.SINGULARITY_THRESHOLD).toNumber())," mana to unlock"]})})]}),a.unlocked&&i.jsxs("button",{onClick:()=>t("mastery"),className:`px-4 py-1 rounded text-sm relative ${e==="mastery"?"bg-accent-primary text-light-text":"bg-dark-surface hover:bg-dark-hover text-light-text"}`,children:["Mastery",a.unviewedShards>0&&e!=="mastery"&&i.jsxs("span",{className:"ml-1 text-[#22c55e]",children:["(",a.unviewedShards,")"]})]}),a.unlocked&&i.jsxs("div",{className:"relative",...N.hoverProps,children:[i.jsxs("button",{onClick:()=>l.unlocked&&t("merge"),disabled:!l.unlocked,className:`relative px-4 py-1 rounded text-sm overflow-hidden min-w-[80px] ${l.unlocked?e==="merge"?"bg-accent-primary text-light-text":"bg-dark-surface hover:bg-dark-hover text-light-text":"bg-[#1a1a1a] text-[#666666] cursor-not-allowed"}`,children:[!l.unlocked&&i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${Math.min(n.log10().toNumber()/45*100,100)}%`,background:"linear-gradient(to bottom, #0d9488, #0f766e)"}}),i.jsx("span",{className:"relative",children:l.unlocked?"Merge":" ???"})]}),!l.unlocked&&N.isHovered&&i.jsx("div",{className:"absolute z-50 top-full mt-1 left-0 bg-[#1a1a1a] border border-dark-border rounded px-2 py-1 whitespace-nowrap shadow-lg",children:i.jsxs("span",{className:"text-xs text-[#a3a3a3]",children:["Requires ",D(Oh)," mana to unlock"]})})]}),l.unlocked&&i.jsxs("div",{className:"relative",...h.hoverProps,children:[i.jsxs("button",{onClick:()=>c&&t("ascension"),disabled:!c,className:`relative px-4 py-1 rounded text-sm overflow-hidden min-w-[90px] ${c?e==="ascension"?"bg-gradient-to-b from-[#fbbf24] to-[#d97706] text-[#000000]":"bg-dark-surface hover:bg-dark-hover text-[#fbbf24]":"bg-[#1a1a1a] text-[#666666] cursor-not-allowed"}`,children:[!c&&i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${Math.min(n.log10().toNumber()/160*100,100)}%`,background:"linear-gradient(to bottom, #d97706, #b45309)"}}),i.jsx("span",{className:"relative",children:c?"Ascension":" ???"})]}),!c&&h.isHovered&&i.jsx("div",{className:"absolute z-50 top-full mt-1 left-0 bg-[#1a1a1a] border border-dark-border rounded px-2 py-1 whitespace-nowrap shadow-lg",children:i.jsxs("span",{className:"text-xs text-[#a3a3a3]",children:["Requires ",D(1e160)," mana to unlock"]})})]}),i.jsx("div",{className:"flex-1"}),i.jsx("button",{onClick:()=>t("settings"),className:`px-3 py-1 rounded text-sm text-light-text ${e==="settings"?"bg-accent-primary":"bg-dark-surface hover:bg-dark-hover"}`,children:"Settings"})]})}const Jh={sm:"h-2",md:"h-4",lg:"h-6"};function Bs({percent:e,height:t="md",color:n="green",paused:r=!1,label:s,showTransition:a=!1}){const l=Math.max(0,Math.min(100,e)),o=r?pa.red:pa[n];return i.jsxs("div",{className:`relative w-full ${Jh[t]} rounded overflow-hidden`,style:{background:"linear-gradient(to bottom, #3a3a3a, #1a1a1a)",boxShadow:"inset 0 1px 2px #000000"},children:[i.jsx("div",{className:`absolute left-0 top-0 h-full ${a?"transition-all duration-100":""}`,style:{width:`${l}%`,background:o.bg,boxShadow:`inset 0 1px 0 ${o.highlight}`}}),s&&i.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-[9px] font-mono text-[#ffffff]",children:s})]})}function ef({current:e,max:t,color:n}){const r=Math.max(0,Math.min(100,e/t*100)),s=pa[n];return i.jsxs("div",{className:"relative w-full h-6 rounded overflow-hidden",style:{background:"linear-gradient(to bottom, #2a2a2a, #1a1a1a)",boxShadow:"inset 0 1px 2px #000000"},children:[i.jsx("div",{className:"absolute left-0 top-0 h-full transition-all duration-100",style:{width:`${r}%`,background:s.bg,boxShadow:`inset 0 1px 0 ${s.highlight}`}}),i.jsxs("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-mono text-[#ffffff]",children:[D(Math.ceil(e))," / ",D(t)]})]})}function tf({progress:e,attackTime:t}){const n=Math.min(e*100,100);return i.jsxs("div",{className:"w-full",children:[i.jsx("div",{className:"relative w-full h-2 rounded overflow-hidden",style:{background:"linear-gradient(to bottom, #2a2a2a, #1a1a1a)"},children:i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${n}%`,background:pa.yellow.bg}})}),i.jsxs("div",{className:"text-[10px] text-[#666666] text-center mt-0.5",children:[t.toFixed(1),"s"]})]})}const eg={bottom:"top-full mt-2 left-0",right:"left-14 top-0",left:"right-14 top-0"},tg={sm:"w-48",md:"w-64",lg:"w-80"};function yn({children:e,position:t="bottom",width:n="md"}){return i.jsx("div",{className:`absolute z-50 bg-[#1a1a1a] border border-dark-border rounded p-3 shadow-lg ${eg[t]} ${tg[n]}`,children:e})}function Nn({children:e,color:t="#ffffff"}){return i.jsx("div",{className:"text-sm font-semibold mb-1",style:{color:t},children:e})}function Gs({children:e}){return i.jsx("div",{className:"text-xs text-[#b0b0b0] mb-2",children:e})}function Re({children:e,showBorder:t=!0}){return i.jsx("div",{className:`${t?"border-t border-dark-border pt-2 mb-2":"mb-2"}`,children:e})}const ng={sm:{icon:"w-4 h-4",text:"text-xs"},md:{icon:"w-5 h-5",text:"text-sm"}};function nf({icon:e,amount:t,current:n,canAfford:r,showCurrent:s=!1,size:a="sm"}){const o=r??(n!==void 0?n>=t:!0)?"text-[#b0b0b0]":"text-[#ef4444]",u=ng[a];return i.jsxs("span",{className:`flex items-center gap-1 ${o}`,children:[i.jsx("img",{src:e,alt:"",className:u.icon}),i.jsxs("span",{className:`font-mono ${u.text}`,children:[D(t),s&&n!==void 0&&` (${D(n)})`]})]})}function zs({tier:e,amount:t,currentGems:n,canAfford:r,showCurrent:s=!1,size:a="sm"}){const l=`./icon-t${e}_gem.png`,o=r??(n!==void 0?n>=t:!0);return i.jsx(nf,{icon:l,amount:t,current:n,canAfford:o,showCurrent:s,size:a})}function rg({amount:e,current:t,canAfford:n,showCurrent:r=!1,size:s="sm"}){const a="./icon-energy_core.png",l=n??(t!==void 0?t>=e:!0);return i.jsx(nf,{icon:a,amount:e,current:t,canAfford:l,showCurrent:r,size:s})}function rf(){const e=b(a=>a.pulverizers),t=b(a=>a.getTotalDust),r=b(a=>a.getPulverizerDustRates)(),s=[];for(let a=0;a<e.dust.length;a++){const l=t(a+1),o=r[a];(l>0||o>0)&&s.push({tier:a+1,amount:l,rate:o})}return s.length===0?null:i.jsxs("div",{className:"bg-[#1a1a1a] border border-[#3d3d3d] rounded p-3 min-w-[120px]",children:[i.jsx("div",{className:"text-xs text-[#888888] uppercase tracking-wide mb-2",children:"Dust"}),i.jsx("div",{className:"flex flex-col gap-1",children:s.map(({tier:a,amount:l,rate:o})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:`./icon-t${a}_dust.png`,alt:`T${a} dust`,className:"w-6 h-6"}),i.jsx("span",{className:"text-sm font-mono min-w-[50px]",style:{color:Fe[a-1]},children:D(l)}),i.jsxs("span",{className:`text-xs font-mono min-w-[60px] ${o>0?"text-[#22c55e]":"invisible"}`,children:["+",D(o),"/s"]})]},a))})]})}function sg(){const e=b(u=>u.mana),t=b(u=>u.getManaPerSec),n=b(u=>u.getManaBoostMultiplier),r=b(u=>u.gems),a=r[0].count.toNumber()*y.GEM_RECIPES[0].manaPerSec,l=n(),o=[];for(let u=1;u<8;u++){const c=r[u].count.toNumber();if(c>0){const m=1+y.GEM_RECIPES[u].multiplier*c;o.push({tier:u+1,mult:m})}}return i.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded px-6 py-4 mb-3 flex gap-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[#a3a3a3] text-xs uppercase mb-2 tracking-wide",children:"Mana"}),i.jsx("span",{className:"text-[#ffffff] text-3xl font-bold font-mono",children:D(e.toNumber())})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[#a3a3a3] text-xs uppercase mb-2 tracking-wide",children:"Generation"}),i.jsxs("div",{className:"flex items-center flex-wrap gap-2 font-mono text-3xl font-bold",children:[i.jsxs("span",{className:"text-[#ffffff]",children:[D(t()),"/s"]}),i.jsx("span",{className:"text-[#ffffff]",children:"="}),i.jsx("span",{style:{color:Fe[0]},children:D(a)}),o.map(({tier:u,mult:c})=>i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-[#ffffff]",children:""}),i.jsx("span",{style:{color:Fe[u-1]},children:D(c)})]},u)),l>1&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-[#ffffff]",children:""}),i.jsx("span",{className:"text-[#ffffff]",children:D(l)})]})]})]})]})}function ag({index:e,onSelect:t,isHovered:n,onHover:r}){const s=b(A=>A.foundries[e]),a=b(A=>A.gems),l=b(A=>A.prisms),o=b(A=>A.combat),u=b(A=>A.upgrades),c=b(A=>A.canAffordTier),m=b(A=>A.canAffordPrismChunk),f=b(A=>A.canAffordArtifactCycle),p=b(A=>A.getSpeedMultiplier),N=b(A=>A.getYieldMultiplier),v=b(A=>A.getPrismSpeedBonus),h=b(A=>A.getPrismYieldBonus),M=b(A=>A.getGlobalSpeedMultiplier),g=b(A=>A.getPrismEffectiveBonuses),d=b(A=>A.getMasteryPrismEffectiveness),x=b(A=>A.setFoundryTier),S=b(A=>A.getDiscountedCraftCost),E=A=>{A.preventDefault(),x(e,0)},C=re.useRef(null),T=()=>{C.current&&clearTimeout(C.current),C.current=window.setTimeout(()=>r(e),100)},k=()=>{C.current&&(clearTimeout(C.current),C.current=null),r(null)};if(!s)return null;if(s.tier===0&&!s.prismId&&!s.artifactId)return i.jsx("button",{onClick:()=>t(e),className:"w-[104px] h-[104px] border border-dashed border-[#444444] rounded bg-[#1a1a1a] hover:bg-[#222222] flex flex-col items-center justify-center p-1",children:i.jsx("span",{className:"text-[#666666] text-xs",children:"Idle"})});if(s.prismId){const A=y.PRISM_RECIPES.find($=>$.id===s.prismId);if(!A)return null;const _e=l[s.prismId]?.chunksCompleted??0,_=A.chunks,P=Math.floor(s.progress*100),O=!m(s.prismId),H=M(),Q=A.chunkTime/H;return i.jsxs("div",{className:"relative",onMouseEnter:T,onMouseLeave:k,children:[i.jsxs("button",{onClick:()=>t(e),onContextMenu:E,className:"w-[104px] h-[104px] border border-dark-border rounded bg-[#1a1a1a] hover:bg-[#222222] flex flex-col items-center justify-center p-1 relative",children:[i.jsx("img",{src:`./icon-t${A.tier}_prism.png`,alt:A.name,className:"w-[52px] h-[52px] mb-1"}),i.jsx("div",{className:"w-full px-1",children:i.jsx(Bs,{percent:P,color:"purple",paused:O,label:`${_e}/${_}`})})]}),n&&i.jsxs(yn,{children:[i.jsx(Nn,{color:"#c084fc",children:A.name}),i.jsx(Gs,{children:A.description}),i.jsx(Re,{children:i.jsxs("div",{className:"text-xs text-[#909090]",children:["Progress: ",_e,"/",_," chunks"]})}),H>1&&i.jsxs(Re,{children:[i.jsxs("div",{className:"text-xs text-[#60a5fa] mb-1",children:["Speed: ",D(H)]}),i.jsxs("div",{className:"text-xs text-[#909090] ml-2",children:[" Global: ",D(H)]})]}),i.jsxs(Re,{children:[i.jsxs("div",{className:"text-xs text-[#b0b0b0]",children:[i.jsx("span",{className:"text-[#909090]",children:"Base time:"})," ",A.chunkTime,"s"]}),i.jsxs("div",{className:"text-xs text-[#ffffff]",children:[i.jsx("span",{className:"text-[#909090]",children:"Effective:"})," ",D(Q),"s"]})]}),i.jsxs(Re,{children:[i.jsx("div",{className:"text-xs text-[#909090] mb-1",children:"Cost per chunk:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:A.chunkCost.map(($,G)=>i.jsx(zs,{tier:$.tier,amount:$.amount,currentGems:a[$.tier-1].count.toNumber(),showCurrent:!0},G))})]}),i.jsxs(Re,{children:[i.jsx("div",{className:"text-xs text-[#909090] mb-1",children:"When complete:"}),(()=>{const $=g(A.id),G=d();return i.jsxs("div",{className:"text-xs text-[#909090] ml-2",children:[i.jsxs("div",{className:"mb-1",children:["Affects: T",$.tiers.join(", T")," gems"]}),i.jsxs("div",{className:"text-[#60a5fa]",children:[" Speed: ",$.speedMult.toFixed(2)]}),i.jsxs("div",{className:"text-[#4ade80]",children:[" Yield: ",$.yieldMult.toFixed(2)]}),G>1&&i.jsxs("div",{className:"text-[#a78bfa] text-[10px] mt-1",children:["T2 Mastery: +",((G-1)*100).toFixed(0),"%"]})]})})()]})]})]})}if(s.artifactId){const A=y.ARTIFACT_RECIPES.find($=>$.id===s.artifactId);if(!A)return null;const _e=o.artifacts[s.artifactId]?.cyclesCompleted??0,_=A.cycles,P=Math.floor(s.progress*100),O=!f(s.artifactId),H=M(),Q=A.cycleTime/H;return i.jsxs("div",{className:"relative",onMouseEnter:T,onMouseLeave:k,children:[i.jsxs("button",{onClick:()=>t(e),onContextMenu:E,className:"w-[104px] h-[104px] border border-dark-border rounded bg-[#1a1a1a] hover:bg-[#222222] flex flex-col items-center justify-center p-1 relative",children:[i.jsx("img",{src:`./icon-${A.icon}`,alt:A.name,className:"w-[52px] h-[52px] mb-1"}),i.jsx("div",{className:"w-full px-1",children:i.jsx(Bs,{percent:P,color:"yellow",paused:O,label:`${_e}/${_}`})})]}),n&&i.jsxs(yn,{children:[i.jsx(Nn,{color:"#fbbf24",children:A.name}),i.jsx(Gs,{children:A.description}),i.jsx(Re,{children:i.jsxs("div",{className:"text-xs text-[#909090]",children:["Progress: ",_e,"/",_," cycles"]})}),H>1&&i.jsxs(Re,{children:[i.jsxs("div",{className:"text-xs text-[#60a5fa] mb-1",children:["Speed: ",D(H)]}),i.jsxs("div",{className:"text-xs text-[#909090] ml-2",children:[" Global: ",D(H)]})]}),i.jsxs(Re,{children:[i.jsxs("div",{className:"text-xs text-[#b0b0b0]",children:[i.jsx("span",{className:"text-[#909090]",children:"Base time:"})," ",A.cycleTime,"s"]}),i.jsxs("div",{className:"text-xs text-[#ffffff]",children:[i.jsx("span",{className:"text-[#909090]",children:"Effective:"})," ",D(Q),"s"]})]}),i.jsxs(Re,{children:[i.jsx("div",{className:"text-xs text-[#909090] mb-1",children:"Cost per cycle:"}),i.jsx("div",{className:"mb-1",children:i.jsx(rg,{amount:A.cycleCost.energyCores,current:o.energyCores.toNumber(),showCurrent:!0})}),i.jsx("div",{className:"flex flex-wrap gap-2",children:A.cycleCost.gems.map(($,G)=>i.jsx(zs,{tier:$.tier,amount:$.amount,currentGems:a[$.tier-1].count.toNumber(),showCurrent:!0},G))})]}),i.jsxs(Re,{children:[i.jsx("div",{className:"text-xs text-[#909090] mb-1",children:"When complete:"}),i.jsxs("div",{className:"text-xs text-[#909090] ml-2",children:[A.effects.hpRegen>0&&i.jsxs("div",{className:"text-[#22c55e]",children:[" +",A.effects.hpRegen," HP/s regen"]}),A.effects.hpMult>1&&i.jsxs("div",{className:"text-[#22c55e]",children:[" ",A.effects.hpMult," max HP"]}),A.effects.attackSpeedMult>1&&i.jsxs("div",{className:"text-[#60a5fa]",children:[" ",A.effects.attackSpeedMult," attack speed"]}),A.effects.damageMult>1&&i.jsxs("div",{className:"text-[#ef4444]",children:[" ",A.effects.damageMult," damage"]})]})]})]})]})}const I=y.GEM_RECIPES[s.tier-1],te=p(s.tier),Z=I.craftTime/te,w=Z<.5?100:Math.floor(s.progress*100),U=c(s.tier),ee=I.cost&&!U,q=N(s.tier),ce=1+u[s.tier-1].speed*.1,R=1+u[s.tier-1].yield*.025,B=v(s.tier),F=h(s.tier);return i.jsxs("div",{className:"relative",onMouseEnter:T,onMouseLeave:k,children:[i.jsxs("button",{onClick:()=>t(e),onContextMenu:E,className:"w-[104px] h-[104px] border border-dark-border rounded bg-[#1a1a1a] hover:bg-[#222222] flex flex-col items-center justify-center p-1 relative",children:[i.jsx("img",{src:`./icon-t${s.tier}_gem.png`,alt:`T${s.tier} gem`,className:"w-[52px] h-[52px] mb-1"}),i.jsx("div",{className:"w-full px-1",children:i.jsx(Bs,{percent:w,color:"green",paused:!!ee,label:`T${s.tier}`})})]}),n&&i.jsxs(yn,{children:[i.jsxs(Nn,{children:["T",s.tier," Gem"]}),i.jsx(Gs,{children:I.description}),I.cost&&i.jsx(Re,{children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-xs text-[#909090]",children:"Cost:"}),i.jsx(zs,{tier:I.cost.tier,amount:S(s.tier)??I.cost.amount,currentGems:a[I.cost.tier-1].count.toNumber(),showCurrent:!0})]})}),i.jsxs(Re,{children:[i.jsxs("div",{className:"text-xs text-[#60a5fa] mb-1",children:["Speed: ",D(te)]}),i.jsxs("div",{className:"text-xs text-[#909090] ml-2",children:[ce>1&&i.jsxs("div",{children:[" Upgrades: ",D(ce)]}),B>1&&i.jsxs("div",{children:[" Prisms: ",D(B)]}),ce===1&&B===1&&i.jsx("div",{children:" No bonuses"})]})]}),i.jsxs(Re,{children:[i.jsxs("div",{className:"text-xs text-[#4ade80] mb-1",children:["Yield: ",D(q)]}),i.jsxs("div",{className:"text-xs text-[#909090] ml-2",children:[R>1&&i.jsxs("div",{children:[" Upgrades: ",D(R)]}),F>1&&i.jsxs("div",{children:[" Prisms: ",D(F)]}),R===1&&F===1&&i.jsx("div",{children:" No bonuses"})]})]}),i.jsxs(Re,{children:[i.jsxs("div",{className:"text-xs text-[#b0b0b0]",children:[i.jsx("span",{className:"text-[#909090]",children:"Base time:"})," ",I.craftTime,"s"]}),i.jsxs("div",{className:"text-xs text-[#ffffff]",children:[i.jsx("span",{className:"text-[#909090]",children:"Effective:"})," ",Z<.01?`${D(1/Z)}/s`:`${D(Z)}s`]})]})]})]})}function ig({foundryIndex:e,onClose:t}){const n=b(w=>w.gems),r=b(w=>w.prisms),s=b(w=>w.combat),a=b(w=>w.foundries),l=b(w=>w.isTierUnlocked),o=b(w=>w.canAffordTier),u=b(w=>w.setFoundryTier),c=b(w=>w.setFoundryPrism),m=b(w=>w.setFoundryArtifact),f=b(w=>w.getSpeedMultiplier),p=b(w=>w.getYieldMultiplier),N=b(w=>w.getGlobalSpeedMultiplier),v=b(w=>w.getDiscountedCraftCost),h=a.map((w,U)=>w.tier===0&&w.prismId===null&&w.artifactId===null?U:-1).filter(w=>w!==-1),[M,g]=re.useState("gems"),[d,x]=re.useState(()=>{const w=localStorage.getItem("hideCrafted");return w!==null?w==="true":!0}),S=w=>{x(w),localStorage.setItem("hideCrafted",String(w))},E=w=>{u(e,w),t()},C=w=>{w===null?u(e,0):c(e,w),t()},T=w=>{m(e,w),t()},k=(w,U)=>{U.preventDefault();for(const ee of h)u(ee,w);t()},K=(w,U)=>{U.preventDefault();for(const ee of h)c(ee,w);t()},I=(w,U)=>{U.preventDefault();for(const ee of h)m(ee,w);t()},te=[];let Z=null;for(let w=1;w<=8;w++)if(l(w))te.push(w);else if(Z===null){Z=w;break}return i.jsx("div",{className:"fixed inset-0 bg-[#000000cc] flex items-center justify-center z-50",onClick:t,children:i.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded p-5 w-[900px] max-h-[80vh] flex flex-col",onClick:w=>w.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#ffffff]",children:"Select Recipe"}),i.jsx("button",{onClick:()=>E(0),className:"text-sm text-[#ef4444] hover:text-[#f87171]",children:"Stop Production"})]}),i.jsx("button",{onClick:t,className:"text-[#a3a3a3] hover:text-[#ffffff] text-xl leading-none px-2",children:""})]}),i.jsxs("div",{className:"flex gap-1 mb-4",children:[i.jsx("button",{onClick:()=>g("gems"),className:`px-4 py-2 rounded-t text-sm font-medium transition-colors ${M==="gems"?"bg-[#252525] text-[#ffffff] border-b-2 border-[#60a5fa]":"bg-[#1a1a1a] text-[#888888] hover:text-[#ffffff]"}`,children:"Gems"}),i.jsx("button",{onClick:()=>g("prisms"),className:`px-4 py-2 rounded-t text-sm font-medium transition-colors ${M==="prisms"?"bg-[#252525] text-[#ffffff] border-b-2 border-[#22c55e]":"bg-[#1a1a1a] text-[#888888] hover:text-[#ffffff]"}`,children:"Prisms"}),s.unlocked&&i.jsx("button",{onClick:()=>g("artifacts"),className:`px-4 py-2 rounded-t text-sm font-medium transition-colors ${M==="artifacts"?"bg-[#252525] text-[#ffffff] border-b-2 border-[#fbbf24]":"bg-[#1a1a1a] text-[#888888] hover:text-[#ffffff]"}`,children:"Combat Artifacts"})]}),i.jsxs("div",{className:"h-[420px] overflow-y-auto",children:[M==="gems"&&i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[te.map(w=>{const U=y.GEM_RECIPES[w-1],ee=o(w),q=f(w),ce=p(w),R=U.craftTime/q;return i.jsxs("button",{onClick:()=>E(w),onContextMenu:B=>k(w,B),className:"flex items-center gap-3 p-3 rounded bg-[#252525] hover:bg-[#2a2a2a] text-left",children:[i.jsx("img",{src:`./icon-t${w}_gem.png`,alt:`T${w} gem`,className:"w-10 h-10"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("span",{className:"text-sm font-medium text-[#ffffff]",children:["T",w," Gem"]}),i.jsx("span",{className:"text-sm font-mono text-[#ffffff]",children:R<.01?`${D(1/R)}/s`:`${D(R)}s`})]}),i.jsx("div",{className:"text-xs text-[#a3a3a3] mb-1 truncate",children:U.description}),i.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:"text-[#60a5fa]",children:["",D(q)]}),i.jsxs("span",{className:"text-[#4ade80]",children:["",D(ce)]}),U.cost&&i.jsxs("span",{className:`flex items-center gap-0.5 ${ee?"text-[#a3a3a3]":"text-[#ef4444]"}`,children:[i.jsx("img",{src:`./icon-t${U.cost.tier}_gem.png`,alt:"",className:"w-4 h-4"}),v(w)??U.cost.amount]})]})]})]},w)}),Z&&i.jsxs("div",{className:"flex items-center gap-3 p-3 rounded bg-[#252525] opacity-50",children:[i.jsx("img",{src:`./icon-t${Z}_gem.png`,alt:`T${Z} gem`,className:"w-10 h-10"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("span",{className:"text-sm font-medium text-[#ffffff]",children:["T",Z," Gem"]}),i.jsxs("span",{className:"text-sm font-mono text-[#666666]",children:[y.GEM_RECIPES[Z-1].craftTime,"s"]})]}),i.jsx("div",{className:"text-xs text-[#a3a3a3] truncate",children:y.GEM_RECIPES[Z-1].description}),y.GEM_RECIPES[Z-1].unlockAtCrafted&&(()=>{const w=y.GEM_RECIPES[Z-1].unlockAtCrafted,U=Math.floor(n[w.tier-1].totalCrafted),ee=Math.min(U/w.amount*100,100);return i.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[i.jsx("img",{src:`./icon-t${w.tier}_gem.png`,alt:"",className:"w-4 h-4"}),i.jsx("div",{className:"flex-1 h-1.5 rounded overflow-hidden bg-[#1a1a1a]",children:i.jsx("div",{className:"h-full bg-[#6b7280]",style:{width:`${ee}%`}})}),i.jsxs("span",{className:"text-xs font-mono text-[#888888]",children:[U,"/",w.amount]})]})})()]})]})]}),M==="prisms"&&i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm text-[#a3a3a3] cursor-pointer select-none mb-2",children:[i.jsx("input",{type:"checkbox",checked:d,onChange:w=>S(w.target.checked),className:"w-4 h-4 rounded border-dark-border bg-[#1a1a1a] text-[#22c55e] focus:ring-0 focus:ring-offset-0 cursor-pointer"}),"Hide crafted"]}),y.PRISM_RECIPES.filter(w=>d&&r[w.id]?.owned?!1:w.chunkCost.every(ee=>n[ee.tier-1].count.gt(0))).map(w=>{const U=r[w.id],ee=U?.owned??!1,q=U?.chunksCompleted??0,ce=q/w.chunks*100,R=N(),B=w.chunkTime/R;return ee?i.jsxs("div",{className:"flex items-center gap-3 p-2 rounded bg-[#1a2a1a] border border-[#22c55e33]",children:[i.jsx("img",{src:`./icon-t${w.tier}_prism.png`,alt:w.name,className:"w-10 h-10"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"text-sm font-medium text-[#22c55e]",children:[w.name," "]}),i.jsx("div",{className:"text-xs text-[#a3a3a3]",children:w.description})]})]},w.id):i.jsxs("button",{onClick:()=>C(w.id),onContextMenu:F=>K(w.id,F),className:"flex items-center gap-3 p-2 rounded bg-[#252525] hover:bg-[#2a2a2a] text-left",children:[i.jsx("img",{src:`./icon-t${w.tier}_prism.png`,alt:w.name,className:"w-10 h-10"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-[#ffffff]",children:w.name}),i.jsxs("span",{className:"text-xs text-[#a3a3a3]",children:[" ",w.description]})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("div",{className:"w-24 h-1.5 rounded overflow-hidden bg-[#1a1a1a]",children:i.jsx("div",{className:"h-full bg-[#22c55e]",style:{width:`${ce}%`}})}),i.jsxs("span",{className:"text-xs font-mono text-[#a3a3a3]",children:[q,"/",w.chunks]}),R>1&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs text-[#666666]",children:"|"}),i.jsxs("span",{className:"text-xs text-[#60a5fa]",children:["",R.toFixed(1)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap max-h-12 overflow-hidden",children:[i.jsx("span",{className:"text-xs text-[#888888]",children:"Cost:"}),w.chunkCost.map((F,A)=>{const ie=n[F.tier-1].count.gte(F.amount);return i.jsxs("span",{className:`flex items-center gap-1 text-sm ${ie?"text-[#a3a3a3]":"text-[#ef4444]"}`,children:[i.jsx("img",{src:`./icon-t${F.tier}_gem.png`,alt:"",className:"w-5 h-5"}),D(F.amount)]},A)})]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("div",{className:"text-sm font-mono text-[#ffffff]",children:[B.toFixed(1),"s"]})})]},w.id)})]}),M==="artifacts"&&s.unlocked&&i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm text-[#a3a3a3] cursor-pointer select-none mb-2",children:[i.jsx("input",{type:"checkbox",checked:d,onChange:w=>S(w.target.checked),className:"w-4 h-4 rounded border-dark-border bg-[#1a1a1a] text-[#fbbf24] focus:ring-0 focus:ring-offset-0 cursor-pointer"}),"Hide crafted"]}),y.ARTIFACT_RECIPES.filter(w=>!d||!s.artifacts[w.id]?.owned).map(w=>{const U=s.artifacts[w.id],ee=U?.owned??!1,q=U?.cyclesCompleted??0,ce=q/w.cycles*100,R=N(),B=w.cycleTime/R;return ee?i.jsxs("div",{className:"flex items-center gap-3 p-2 rounded bg-[#2a2a1a] border border-[#fbbf2433]",children:[i.jsx("img",{src:`./icon-${w.icon}`,alt:w.name,className:"w-10 h-10"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"text-sm font-medium text-[#fbbf24]",children:[w.name," "]}),i.jsx("div",{className:"text-xs text-[#a3a3a3]",children:w.description})]})]},w.id):i.jsxs("button",{onClick:()=>T(w.id),onContextMenu:F=>I(w.id,F),className:"flex items-center gap-3 p-2 rounded bg-[#252525] hover:bg-[#2a2a2a] text-left",children:[i.jsx("img",{src:`./icon-${w.icon}`,alt:w.name,className:"w-10 h-10"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-[#ffffff]",children:w.name}),i.jsxs("span",{className:"text-xs text-[#a3a3a3]",children:[" ",w.description]})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("div",{className:"w-24 h-1.5 rounded overflow-hidden bg-[#1a1a1a]",children:i.jsx("div",{className:"h-full bg-[#fbbf24]",style:{width:`${ce}%`}})}),i.jsxs("span",{className:"text-xs font-mono text-[#a3a3a3]",children:[q,"/",w.cycles]}),R>1&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-xs text-[#666666]",children:"|"}),i.jsxs("span",{className:"text-xs text-[#60a5fa]",children:["",R.toFixed(1)]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-wrap max-h-12 overflow-hidden",children:[i.jsx("span",{className:"text-xs text-[#888888]",children:"Cost:"}),i.jsxs("span",{className:`flex items-center gap-1 text-sm ${s.energyCores.gte(w.cycleCost.energyCores)?"text-[#a3a3a3]":"text-[#ef4444]"}`,children:[i.jsx("img",{src:"./icon-energy_core.png",alt:"",className:"w-5 h-5"}),D(w.cycleCost.energyCores)]}),w.cycleCost.gems.map((F,A)=>{const ie=n[F.tier-1].count.gte(F.amount);return i.jsxs("span",{className:`flex items-center gap-1 text-sm ${ie?"text-[#a3a3a3]":"text-[#ef4444]"}`,children:[i.jsx("img",{src:`./icon-t${F.tier}_gem.png`,alt:"",className:"w-5 h-5"}),D(F.amount)]},A)})]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("div",{className:"text-sm font-mono text-[#ffffff]",children:[B.toFixed(1),"s"]})})]},w.id)})]})]}),i.jsx("div",{className:"mt-3 text-xs text-[#ffffff] text-center",children:"Tip: right click to set recipe for all slots. Right clicking on a crafting slot clears it."})]})})}function lg(){const e=b(o=>o.canBuyFoundry),t=b(o=>o.buyFoundry),n=b(o=>o.getFoundryCost),r=b(o=>o.mana),s=n(),a=e(),l=Math.min(r.div(s).toNumber()*100,100);return i.jsxs("button",{onClick:()=>a&&t(),title:` ${D(s.toNumber())} `,className:"w-[104px] h-[104px] border border-dashed border-[#444444] rounded flex flex-col items-center justify-center relative bg-[#1a1a1a] hover:bg-[#222222] overflow-hidden",children:[i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${l}%`,background:"linear-gradient(to bottom, #166534, #14532d)"}}),i.jsx("span",{className:`text-3xl leading-none relative ${a?"text-[#4ade80]":"text-[#a3a3a3]"}`,children:"+"}),i.jsx("span",{className:`text-xs font-mono mt-1 relative ${a?"text-[#4ade80]":"text-[#a3a3a3]"}`,children:D(s.toNumber())})]})}function La({title:e,defaultOpen:t=!0,children:n,headerAction:r}){const[s,a]=re.useState(t);return i.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded p-3 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>a(!s),className:"flex items-center gap-2 text-left",children:[i.jsx("span",{className:`text-[#666666] text-xs transition-transform ${s?"rotate-90":""}`,children:""}),i.jsx("h3",{className:"text-xs font-semibold text-[#a3a3a3] uppercase tracking-wide",children:e})]}),r]}),s&&i.jsx("div",{className:"mt-2",children:n})]})}function og(){const e=b(f=>f.prisms),t=b(f=>f.combat),n=b(f=>f.getPrismEffectiveBonuses),r=b(f=>f.getMasteryPrismEffectiveness),[s,a]=re.useState(null),l=re.useRef(null),o=f=>{l.current&&clearTimeout(l.current),l.current=window.setTimeout(()=>a(f),100)},u=()=>{l.current&&(clearTimeout(l.current),l.current=null),a(null)},c=y.PRISM_RECIPES.filter(f=>e[f.id]?.owned),m=t.unlocked?y.ARTIFACT_RECIPES.filter(f=>t.artifacts[f.id]?.owned):[];return c.length===0&&m.length===0?null:i.jsx(La,{title:"Artifacts",defaultOpen:!0,children:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.map(f=>i.jsxs("div",{className:"relative",onMouseEnter:()=>o(`prism-${f.id}`),onMouseLeave:u,children:[i.jsx("div",{className:"w-12 h-12 bg-[#1a2a1a] border border-[#22c55e33] rounded p-1 flex items-center justify-center",children:i.jsx("img",{src:`./icon-t${f.tier}_prism.png`,alt:f.name,className:"w-10 h-10"})}),s===`prism-${f.id}`&&i.jsxs(yn,{position:"right",children:[i.jsx(Nn,{color:"#22c55e",children:f.name}),i.jsx("div",{className:"text-[10px] text-[#a3a3a3] mb-2",children:f.description}),(()=>{const p=n(f.id),N=r();return i.jsxs("div",{className:"text-[10px] text-[#888888]",children:[i.jsxs("div",{className:"mb-1",children:["Affects: T",p.tiers.join(", T")," gems"]}),i.jsxs("div",{className:"text-[#60a5fa]",children:[" Speed: ",p.speedMult.toFixed(2)]}),i.jsxs("div",{className:"text-[#4ade80]",children:[" Yield: ",p.yieldMult.toFixed(2)]}),N>1&&i.jsxs("div",{className:"text-[#a78bfa] mt-1",children:["T2 Mastery: +",((N-1)*100).toFixed(0),"%"]})]})})()]})]},`prism-${f.id}`)),m.map(f=>i.jsxs("div",{className:"relative",onMouseEnter:()=>o(`artifact-${f.id}`),onMouseLeave:u,children:[i.jsx("div",{className:"w-12 h-12 bg-[#2a2a1a] border border-[#fbbf2433] rounded p-1 flex items-center justify-center",children:i.jsx("img",{src:`./icon-${f.icon}`,alt:f.name,className:"w-10 h-10"})}),s===`artifact-${f.id}`&&i.jsxs(yn,{position:"right",children:[i.jsx(Nn,{color:"#fbbf24",children:f.name}),i.jsx("div",{className:"text-[10px] text-[#a3a3a3] mb-2",children:f.description}),i.jsxs("div",{className:"text-[10px] text-[#888888]",children:[i.jsx("div",{className:"mb-1",children:"Combat bonuses:"}),f.effects.hpRegen>0&&i.jsxs("div",{className:"text-[#22c55e]",children:[" +",f.effects.hpRegen," HP/s regen"]}),f.effects.hpMult>1&&i.jsxs("div",{className:"text-[#22c55e]",children:[" ",f.effects.hpMult," max HP"]}),f.effects.attackSpeedMult>1&&i.jsxs("div",{className:"text-[#60a5fa]",children:[" ",f.effects.attackSpeedMult," attack speed"]}),f.effects.damageMult>1&&i.jsxs("div",{className:"text-[#ef4444]",children:[" ",f.effects.damageMult," damage"]})]})]})]},`artifact-${f.id}`))]})})}function ug({index:e,onSelect:t,isHovered:n,onHover:r}){const s=b(q=>q.pulverizers),a=b(q=>q.gems),l=b(q=>q.mana),o=b(q=>q.canAffordPulverizerRecipe),u=b(q=>q.getGlobalSpeedMultiplier),c=b(q=>q.setPulverizerRecipe),m=b(q=>q.getPulverizerSpeedCost),f=b(q=>q.canBuyPulverizerSpeed),p=b(q=>q.buyPulverizerSpeed),N=b(q=>q.resetPulverizerSpeed),v=s.slots[e];if(!v)return null;const h=re.useRef(null),M=()=>{h.current&&clearTimeout(h.current),h.current=window.setTimeout(()=>r(e),100)},g=()=>{h.current&&(clearTimeout(h.current),h.current=null),r(null)},d=q=>{q.preventDefault(),c(e,null)},x=u(),S=Math.pow(2,v.speedLevel),E=m(e),C=f(e),T=Math.min(l.toNumber()/E*100,100),k=!v.recipeId,K=i.jsxs("div",{className:"w-[104px] mt-1",children:[i.jsxs("button",{onClick:()=>p(e),disabled:!C,className:`relative w-full px-2 py-1.5 rounded text-xs overflow-hidden ${C?"bg-[#1a2a1a] hover:bg-[#1f3020] border border-[#22c55e50] cursor-pointer":"bg-[#1a1a1a] border border-[#333333] cursor-not-allowed"}`,children:[!C&&i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${T}%`,background:"linear-gradient(to bottom, #14532d40, #0f3d2240)"}}),i.jsxs("div",{className:"relative flex flex-col items-center",children:[i.jsx("div",{className:`font-medium ${C?"text-[#22c55e]":"text-[#888888]"}`,children:"Speed"}),i.jsxs("div",{className:`font-medium font-mono text-[10px] ${C?"text-[#22c55e]":"text-[#888888]"}`,children:["x",D(S),"  x",D(S*2)]}),i.jsxs("div",{className:`text-[10px] ${C?"text-[#22c55e]":"text-[#666666]"}`,children:[D(E)," mana"]})]})]}),v.speedLevel>0&&i.jsx("button",{onClick:()=>N(e),className:"w-full text-[10px] text-[#666666] hover:text-[#f87171] mt-0.5",children:"Reset"})]});if(k)return i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("button",{onClick:()=>t(e),className:"w-[104px] h-[104px] border border-dashed border-[#444444] rounded bg-[#1a1a1a] hover:bg-[#222222] flex flex-col items-center justify-center p-1",children:i.jsx("span",{className:"text-[#666666] text-xs",children:"Idle"})}),K]});const I=y.PULVERIZER_RECIPES.find(q=>q.id===v.recipeId);if(!I)return null;const Z=!o(v.recipeId),w=x*S,U=I.craftTime/w,ee=U<.5?100:Math.floor(v.progress*100);return i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"relative",onMouseEnter:M,onMouseLeave:g,children:[i.jsxs("button",{onClick:()=>t(e),onContextMenu:d,className:"w-[104px] h-[104px] border border-dark-border rounded bg-[#1a1a1a] hover:bg-[#222222] flex flex-col items-center justify-center p-1 relative",children:[i.jsx("img",{src:`./icon-t${I.produces.tier}_dust.png`,alt:I.name,className:"w-[52px] h-[52px] mb-1"}),i.jsx("div",{className:"w-full px-1",children:i.jsx(Bs,{percent:ee,color:"yellow",paused:Z,label:`T${I.produces.tier}`})})]}),n&&i.jsxs(yn,{children:[i.jsx(Nn,{color:"#f59e0b",children:I.name}),i.jsx(Gs,{children:I.description}),w>1&&i.jsx(Re,{children:i.jsxs("div",{className:"text-xs text-[#60a5fa] mb-1",children:["Speed: ",D(w),S>1&&i.jsxs("span",{className:"text-[#22c55e]",children:[" (slot: ",S,")"]})]})}),i.jsxs(Re,{children:[i.jsxs("div",{className:"text-xs text-[#b0b0b0]",children:[i.jsx("span",{className:"text-[#909090]",children:"Base time:"})," ",I.craftTime,"s"]}),i.jsxs("div",{className:"text-xs text-[#ffffff]",children:[i.jsx("span",{className:"text-[#909090]",children:"Effective:"})," ",D(U),"s"]})]}),i.jsxs(Re,{children:[i.jsx("div",{className:"text-xs text-[#909090] mb-1",children:"Cost per craft:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:i.jsx(zs,{tier:I.cost.tier,amount:I.cost.amount,currentGems:a[I.cost.tier-1].count.toNumber(),showCurrent:!0})})]}),i.jsxs(Re,{children:[i.jsx("div",{className:"text-xs text-[#909090] mb-1",children:"Produces:"}),i.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[i.jsx("img",{src:`./icon-t${I.produces.tier}_dust.png`,alt:"",className:"w-4 h-4"}),i.jsxs("span",{className:"text-[#f59e0b]",children:[I.produces.amount," T",I.produces.tier," Dust"]})]})]})]})]}),K]})}function cg(){const e=b(u=>u.canBuyPulverizerSlot),t=b(u=>u.buyPulverizerSlot),n=b(u=>u.getPulverizerSlotCost),r=b(u=>u.mana),s=n();if(s===1/0)return null;const a=e(),l=new z(s),o=Math.min(r.div(l).toNumber()*100,100);return i.jsxs("button",{onClick:()=>a&&t(),title:` ${D(l.toNumber())} `,className:"w-[104px] h-[104px] border border-dashed border-[#444444] rounded flex flex-col items-center justify-center relative bg-[#1a1a1a] hover:bg-[#222222] overflow-hidden",children:[i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${o}%`,background:"linear-gradient(to bottom, #92400e, #78350f)"}}),i.jsx("span",{className:`text-3xl leading-none relative ${a?"text-[#f59e0b]":"text-[#a3a3a3]"}`,children:"+"}),i.jsx("span",{className:`text-xs font-mono mt-1 relative ${a?"text-[#f59e0b]":"text-[#a3a3a3]"}`,children:D(l.toNumber())})]})}function dg({pulverizerIndex:e,onClose:t}){const n=b(c=>c.gems),r=b(c=>c.pulverizers),s=b(c=>c.setPulverizerRecipe),a=b(c=>c.getGlobalSpeedMultiplier),l=r.slots.map((c,m)=>c.recipeId===null?m:-1).filter(c=>c!==-1),o=c=>{c===null?s(e,null):s(e,c),t()},u=(c,m)=>{m.preventDefault();for(const f of l)s(f,c);t()};return i.jsx("div",{className:"fixed inset-0 bg-[#000000cc] flex items-center justify-center z-50",onClick:t,children:i.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded p-5 w-[600px] max-h-[80vh] flex flex-col",onClick:c=>c.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#ffffff]",children:"Select Pulverizer Recipe"}),i.jsx("button",{onClick:()=>o(null),className:"text-sm text-[#ef4444] hover:text-[#f87171]",children:"Stop Production"})]}),i.jsx("button",{onClick:t,className:"text-[#a3a3a3] hover:text-[#ffffff] text-xl leading-none px-2",children:""})]}),i.jsx("div",{className:"overflow-y-auto",children:i.jsx("div",{className:"grid grid-cols-2 gap-2",children:y.PULVERIZER_RECIPES.filter(c=>n[c.cost.tier-1].count.gt(0)).map(c=>{const m=n[c.cost.tier-1].count.gte(c.cost.amount),f=a(),p=c.craftTime/f;return i.jsxs("button",{onClick:()=>o(c.id),onContextMenu:N=>u(c.id,N),className:"flex items-center gap-3 p-3 rounded bg-[#252525] hover:bg-[#2a2a2a] text-left",children:[i.jsx("img",{src:`./icon-t${c.produces.tier}_dust.png`,alt:c.name,className:"w-10 h-10"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-[#ffffff]",children:c.name}),i.jsx("span",{className:"text-sm font-mono text-[#ffffff]",children:p<.01?`${D(1/p)}/s`:`${D(p)}s`})]}),i.jsx("div",{className:"text-xs text-[#a3a3a3] mb-1 truncate",children:c.description}),i.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[i.jsxs("span",{className:`flex items-center gap-0.5 ${m?"text-[#a3a3a3]":"text-[#ef4444]"}`,children:[i.jsx("img",{src:`./icon-t${c.cost.tier}_gem.png`,alt:"",className:"w-4 h-4"}),c.cost.amount]}),i.jsx("span",{className:"text-[#666666]",children:""}),i.jsxs("span",{className:"flex items-center gap-0.5 text-[#f59e0b]",children:[i.jsx("img",{src:`./icon-t${c.produces.tier}_dust.png`,alt:"",className:"w-4 h-4"}),c.produces.amount]})]})]})]},c.id)})})})]})})}function fg(){const e=b(s=>s.pulverizers),t=b(s=>s.setRainbowDustPercent),r=b(s=>s.getDustYieldBonus)();return i.jsx(La,{title:"Rainbow Dust",defaultOpen:!0,children:i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("div",{className:"text-xs text-[#a3a3a3]",children:"Instantly converts a percentage of your gem income to dust."}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-sm text-[#888888] w-24",children:"Conversion:"}),i.jsx("input",{type:"range",min:"0",max:"100",value:e.rainbowDustPercent,onChange:s=>t(Number(s.target.value)),className:"flex-1 h-2 bg-[#333333] rounded-lg appearance-none cursor-pointer accent-[#f59e0b]"}),i.jsxs("span",{className:"text-sm font-mono text-[#f59e0b] w-12 text-right",children:[e.rainbowDustPercent,"%"]})]}),i.jsxs("div",{className:"text-xs text-[#666666]",children:["Each tier converts at its own ratio: T1 = 2:1, T2 = 4:1, T3 = 8:1, etc.",r>1&&i.jsxs("span",{className:"text-[#22c55e]",children:[" Dust yield: ",r.toFixed(2)]})]})]})})}function mg(){const e=b(u=>u.pulverizers),t=b(u=>u.hasRainbowDust),n=b(u=>u.sortPulverizers),r=b(u=>u.clearPulverizers),[s,a]=re.useState(null),[l,o]=re.useState(null);return y.PULVERIZERS_ENABLED?t()?i.jsx(fg,{}):i.jsxs(La,{title:"Pulverizers",defaultOpen:!0,headerAction:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:u=>{u.stopPropagation(),n()},className:"text-xs text-[#60a5fa] hover:text-[#93c5fd] px-2 py-0.5",children:"Sort"}),i.jsx("button",{onClick:u=>{u.stopPropagation(),r()},className:"text-xs text-[#f87171] hover:text-[#fca5a5] px-2 py-0.5",children:"Clear"})]}),children:[i.jsxs("div",{className:"flex flex-wrap gap-2 items-start",children:[e.slots.map((u,c)=>i.jsx(ug,{index:c,onSelect:a,isHovered:l===c,onHover:o},c)),i.jsx(cg,{})]}),s!==null&&i.jsx(dg,{pulverizerIndex:s,onClose:()=>a(null)})]}):null}function pg(){const e=b(c=>c.foundries),t=b(c=>c.sortFoundries),n=b(c=>c.clearFoundries),r=b(c=>c.pulverizers),[s,a]=re.useState(null),[l,o]=re.useState(null),u=y.PULVERIZERS_ENABLED&&r.dust.some(c=>c>0);return i.jsxs("div",{className:"flex gap-3 h-full",children:[i.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto",children:[i.jsx(sg,{}),i.jsx(La,{title:"Foundries",defaultOpen:!0,headerAction:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:c=>{c.stopPropagation(),t()},className:"text-xs text-[#60a5fa] hover:text-[#93c5fd] px-2 py-0.5",children:"Sort"}),i.jsx("button",{onClick:c=>{c.stopPropagation(),n()},className:"text-xs text-[#f87171] hover:text-[#fca5a5] px-2 py-0.5",children:"Clear"})]}),children:i.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.map((c,m)=>i.jsx(ag,{index:m,onSelect:a,isHovered:l===m,onHover:o},m)),i.jsx(lg,{})]})}),i.jsx(mg,{}),i.jsx(og,{}),s!==null&&i.jsx(ig,{foundryIndex:s,onClose:()=>a(null)})]}),u&&i.jsx(rf,{})]})}function Au({tier:e,type:t,gemRates:n}){const[r,s]=re.useState(!1),[a,l]=re.useState({top:0,left:0}),o=re.useRef(null),u=b(_=>_.upgrades[e-1]),c=b(_=>_.mana),m=b(_=>_.canBuyUpgrade),f=b(_=>_.buyUpgrade),p=b(_=>_.getUpgradeCost),N=b(_=>_.getSpeedMultiplier),v=b(_=>_.getYieldMultiplier),h=b(_=>_.foundries),M=b(_=>_.getGemUpgradeCapBonus()),g=u[t],d=y.getUpgradeConfig(e,t),x=d.maxLevel+M,S=p(e,t),E=m(e,t),C=g>=x,T=1+g*d.boost,k=1+(g+1)*d.boost,K=t==="speed"?"Speed":"Yield",I=C?100:Math.min(c.toNumber()/S*100,100),te=y.GEM_RECIPES[e-1],Z=N(e),w=v(e),U=h.filter(_=>_.tier===e).length,ee=te.craftTime/Z,q=U*w/ee,ce=te.cost?U*te.cost.amount/ee:0;let R=Z,B=w;t==="speed"?R=Z*(k/T):B=w*(k/T);const F=te.craftTime/R,A=U*B/F,ie=te.cost?U*te.cost.amount/F:0,_e=()=>{if(o.current){const _=o.current.getBoundingClientRect();l({top:_.top+_.height/2,left:_.right+8})}s(!0)};return i.jsxs("div",{className:"relative",onMouseEnter:_e,onMouseLeave:()=>s(!1),children:[i.jsxs("button",{ref:o,onClick:()=>E&&f(e,t),disabled:C,className:`relative flex items-center px-3 py-1.5 rounded text-left overflow-hidden w-full ${C?"bg-[#1a1a1a] cursor-default":E?"bg-[#252525] hover:bg-[#2a2a2a] border border-[#22c55e]":"bg-[#252525] hover:bg-[#2a2a2a] border border-transparent"}`,children:[!C&&i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${I}%`,background:"linear-gradient(to bottom, #166534, #14532d)"}}),i.jsx("span",{className:`relative text-sm font-medium w-12 ${C?"text-[#22c55e]":"text-[#ffffff]"}`,children:K}),i.jsxs("span",{className:`relative text-xs font-mono w-16 ${C?"text-[#22c55e]":"text-[#aaaaaa]"}`,children:["(",g,"/",x,")"]}),i.jsxs("span",{className:`relative text-xs font-mono w-14 ${C?"text-[#22c55e]":"text-[#aaaaaa]"}`,children:["",T.toFixed(2)]}),i.jsx("span",{className:`relative text-sm font-mono w-14 text-right ${C?"text-[#22c55e]":"text-[#ffffff]"}`,children:C?"":D(S)})]}),r&&!C&&i.jsxs("div",{className:"fixed z-[100] bg-[#1a1a1a] border border-dark-border rounded p-3 shadow-lg w-64 pointer-events-none",style:{top:a.top,left:a.left,transform:"translateY(-50%)"},children:[i.jsxs("div",{className:"text-sm font-semibold mb-2",style:{color:Fe[e-1]},children:["T",e," ",K," Upgrade"]}),i.jsxs("div",{className:"text-xs mb-2",children:[i.jsxs("span",{className:"text-[#888888]",children:[K,":"]})," ",i.jsxs("span",{className:"text-[#aaaaaa]",children:["",T.toFixed(2)]}),i.jsx("span",{className:"text-[#666666]",children:"  "}),i.jsxs("span",{className:"text-[#22c55e]",children:["",k.toFixed(2)]})]}),U>0&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"border-t border-dark-border pt-2 mt-2",children:[i.jsxs("div",{className:"text-[10px] text-[#666666] mb-1",children:["Impact (",U," ",U>1?"foundries":"foundry"," crafting T",e,")"]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs mb-1",children:[i.jsx("img",{src:`./icon-t${e}_gem.png`,alt:`T${e}`,className:"w-4 h-4"}),i.jsx("span",{className:"text-[#22c55e]",children:wr(q)}),i.jsx("span",{className:"text-[#666666]",children:""}),i.jsx("span",{className:"text-[#22c55e]",children:wr(A)})]}),te.cost&&t==="speed"&&(()=>{const _=te.cost.tier,P=n[_-1],V=ie-ce,O=P-V,H=P>=0&&O<0,Q=P<0&&O<P;return i.jsxs("div",{className:"mt-1",children:[i.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[i.jsx("img",{src:`./icon-t${_}_gem.png`,alt:`T${_}`,className:"w-4 h-4"}),i.jsx("span",{className:P>=0?"text-[#22c55e]":"text-[#ef4444]",children:wr(P)}),i.jsx("span",{className:"text-[#666666]",children:""}),i.jsx("span",{className:O>=0?"text-[#22c55e]":"text-[#ef4444]",children:wr(O)})]}),H&&i.jsxs("div",{className:"text-[10px] text-[#f87171] mt-1",children:[" T",_," will go negative!"]}),Q&&i.jsxs("div",{className:"text-[10px] text-[#fbbf24] mt-1",children:[" T",_," deficit will increase"]})]})})()]})}),U===0&&i.jsxs("div",{className:"text-[10px] text-[#666666] italic",children:["No foundries crafting T",e]})]})]})}function hg({tier:e,rate:t,compactFinished:n,gemRates:r}){const s=b(N=>N.gems[e-1]),a=b(N=>N.upgrades[e-1]),l=b(N=>N.getGemUpgradeCapBonus());if(!s.unlocked)return null;const o=y.getUpgradeConfig(e,"speed"),u=y.getUpgradeConfig(e,"yield"),c=o.maxLevel+l,m=u.maxLevel+l,f=a.speed>=c&&a.yield>=m,p=n&&f;return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-2",children:[i.jsxs("div",{className:`flex items-center gap-3 ${p?"":"mb-1.5"}`,children:[i.jsx("img",{src:`./icon-t${e}_gem.png`,alt:`T${e} gem`,className:"w-10 h-10"}),i.jsx("span",{className:"text-lg font-mono text-[#ffffff] w-[72px]",children:D(s.count.toNumber())}),t!==0&&i.jsx("span",{className:`text-sm font-mono ${t>0?"text-[#22c55e]":"text-[#ef4444]"}`,children:wr(t)})]}),!p&&i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx(Au,{tier:e,type:"speed",gemRates:r}),i.jsx(Au,{tier:e,type:"yield",gemRates:r})]})]})}function gg(){const e=b(l=>l.gems),t=b(l=>l.getAggregatedGemRates),[n,r]=re.useState(!0);if(!e.some(l=>l.unlocked))return null;const a=t();return i.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded p-4 h-full w-[280px] overflow-y-auto",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm text-[#a3a3a3] cursor-pointer select-none mb-3",children:[i.jsx("input",{type:"checkbox",checked:n,onChange:l=>r(l.target.checked),className:"w-4 h-4 rounded border-dark-border bg-[#1a1a1a] text-[#22c55e] focus:ring-0 focus:ring-offset-0 cursor-pointer"}),"Compact fully upgraded"]}),i.jsx("div",{className:"flex flex-col gap-2",children:[1,2,3,4,5,6,7,8].map(l=>i.jsx(hg,{tier:l,rate:a[l-1],compactFinished:n,gemRates:a},l))})]})}function xg(){return i.jsxs("div",{className:"flex gap-3 h-full p-3",children:[i.jsx(gg,{}),i.jsx("div",{className:"flex-1",children:i.jsx(pg,{})})]})}async function vg(e){try{return await navigator.clipboard.writeText(e),!0}catch{return!1}}async function yg(){try{return await navigator.clipboard.readText()}catch{return null}}function Ng(e,t){const n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}function Sg(){return new Promise(e=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=n=>{const r=n.target.files?.[0];if(!r){e(null);return}const s=new FileReader;s.onload=a=>{e(a.target?.result)},s.onerror=()=>{e(null)},s.readAsText(r)},t.click()})}function bg(){const{hardReset:e,getSaveData:t,loadSaveData:n}=b(),[r,s]=re.useState(null),[a,l]=re.useState(mo().scientificNotationThreshold),[o,u]=re.useState(!1),c=h=>{s(h),setTimeout(()=>s(null),3e3)},m=()=>{window.confirm("Are you sure you want to reset all progress? This cannot be undone.")&&(e(),c("Game reset successfully"))},f=async()=>{const h=t(),M=await vg(h);c(M?"Exported to clipboard":"Failed to export to clipboard")},p=async()=>{const h=await yg();if(h){const M=n(h);c(M?"Imported from clipboard":"Invalid save data")}else c("Failed to read from clipboard")},N=()=>{const h=t(),M=new Date().toISOString().replace(/[:.]/g,"-");Ng(h,`evercraft-idle-${M}.json`),c("Exported to file")},v=async()=>{const h=await Sg();if(h){const M=n(h);c(M?"Imported from file":"Invalid save data")}};return i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-light-text mb-6",children:"Settings"}),r&&i.jsx("div",{className:"mb-4 p-3 bg-dark-surface border border-dark-border rounded text-light-text",children:r}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h3",{className:"text-lg font-semibold text-light-text mb-4",children:"Community"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("a",{href:"https://discord.gg/fCp7jCDqgg",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-[#5865F2] hover:bg-[#4752C4] text-white rounded",children:[i.jsx("svg",{width:"20",height:"20",viewBox:"0 -28.5 256 256",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",children:i.jsx("path",{d:"M216.856 16.597A208.502 208.502 0 0 0 164.042 0c-2.275 4.113-4.933 9.645-6.766 14.046-19.692-2.961-39.203-2.961-58.533 0-1.832-4.4-4.55-9.933-6.846-14.046a207.809 207.809 0 0 0-52.855 16.638C5.618 67.147-3.443 116.4 1.087 164.956c22.169 16.555 43.653 26.612 64.775 33.193A161.094 161.094 0 0 0 79.735 175.3a136.413 136.413 0 0 1-21.846-10.632 108.636 108.636 0 0 0 5.356-4.237c42.122 19.702 87.89 19.702 129.51 0a131.66 131.66 0 0 0 5.355 4.237 136.07 136.07 0 0 1-21.886 10.653c4.006 8.02 8.638 15.67 13.873 22.848 21.142-6.58 42.646-16.637 64.815-33.213 5.316-56.288-9.08-105.09-38.056-148.36ZM85.474 135.095c-12.645 0-23.015-11.805-23.015-26.18s10.149-26.2 23.015-26.2c12.867 0 23.236 11.804 23.015 26.2.02 14.375-10.148 26.18-23.015 26.18Zm85.051 0c-12.645 0-23.014-11.805-23.014-26.18s10.148-26.2 23.014-26.2c12.867 0 23.236 11.804 23.015 26.2 0 14.375-10.148 26.18-23.015 26.18Z",fill:"currentColor"})}),"Join Discord"]}),i.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-dark-surface hover:bg-dark-border border border-dark-border text-light-text rounded",children:"Changelog"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h3",{className:"text-lg font-semibold text-light-text mb-4",children:"Export Save"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:f,className:"px-4 py-2 bg-accent-primary hover:bg-accent-hover text-light-text rounded",children:"Copy to Clipboard"}),i.jsx("button",{onClick:N,className:"px-4 py-2 bg-accent-primary hover:bg-accent-hover text-light-text rounded",children:"Download File"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h3",{className:"text-lg font-semibold text-light-text mb-4",children:"Import Save"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:p,className:"px-4 py-2 bg-accent-primary hover:bg-accent-hover text-light-text rounded",children:"Paste from Clipboard"}),i.jsx("button",{onClick:v,className:"px-4 py-2 bg-accent-primary hover:bg-accent-hover text-light-text rounded",children:"Load File"})]})]}),i.jsxs("section",{className:"mb-8",children:[i.jsx("h3",{className:"text-lg font-semibold text-light-text mb-4",children:"Display Settings"}),i.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded p-4",children:[i.jsx("label",{className:"block text-light-text mb-2",children:"Scientific Notation Threshold"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("input",{type:"range",min:"3",max:"21",step:"3",value:a,onChange:h=>{const M=parseInt(h.target.value);l(M),Qh(M)},className:"w-48 h-2 bg-dark-border rounded-lg appearance-none cursor-pointer accent-accent-primary"}),i.jsxs("span",{className:"text-light-text font-mono w-20",children:["1e",a]})]}),i.jsx("p",{className:"mt-2 text-light-muted text-sm",children:"Numbers above this value will display in scientific notation."}),i.jsxs("p",{className:"mt-1 text-light-muted text-xs",children:["Preview: ",D(Math.pow(10,a)*.99),"  ",D(Math.pow(10,a))]})]})]}),i.jsxs("section",{children:[i.jsx("h3",{className:"text-lg font-semibold text-light-text mb-4",children:"Danger Zone"}),i.jsx("button",{onClick:m,className:"px-4 py-2 bg-[#dc2626] hover:bg-[#ef4444] text-light-text rounded",children:"Hard Reset"}),i.jsx("p",{className:"mt-2 text-light-muted text-sm",children:"This will permanently delete all progress."})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>u(!1),children:i.jsxs("div",{className:"bg-dark-bg border border-dark-border rounded-lg p-6 max-w-lg w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:h=>h.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-light-text",children:"Changelog"}),i.jsx("button",{onClick:()=>u(!1),className:"text-light-muted hover:text-light-text text-2xl leading-none",children:""})]}),i.jsx("div",{className:"space-y-6",children:[{version:"1.07",date:"2025-12-29T07:56:00Z",changes:["Added Rainbow Dust SP upgrade (1000 SP) - instantly converts a % of gem income to dust.","Added Enchant Automation SP upgrade (2000 SP) - auto-buys enchantments based on ratios and dust combat upgrades.","Fixed discount enchantment calculation (compounding discount can no longer reach 100%).","Discount now displays as cost % of original (e.g., 30% means you pay 30% of the cost).","Rainbow dust percentage is now preserved through singularity.","Fixed singularity threshold bug where Ascension 1 players saw 1e27 instead of 1e21.","Fixed save code causing game loop stutter on Firefox."]},{version:"1.06",date:"2025-12-28T20:00:00Z",changes:["Added Bonus SP skill node to Ascension 1 skill tree (1.2x SP per level, max 10).","Added Sort and Clear buttons to Foundries and Pulverizers sections."]},{version:"1.05",date:"2025-12-28T11:30:00Z",changes:["Fixed merge gem deletion cost calculation (T2 now reduces cost by 2, T3 by 4, etc.).","Fixed existing saves with incorrect merge spawn count.","Ascension tab now unlocks at 1e45 mana (same as merge).","Ascension progress bar is now logarithmic."]},{version:"1.04",changes:["Combat numbers now use proper formatting (health, damage).","Added SP calculation tooltip showing multiplier breakdown.","Merge panel now shows dust costs for Ascension 1."]},{version:"1.03",changes:["Pulverizer speed upgrades are now per-slot instead of global.","Fixed long processing time when returning from offline (pulverizer batch processing)."]},{version:"1.02",changes:["Added spawn log to merge tab showing recent gems and merges.","Adjusted rate display threshold for /min and /hr units."]},{version:"1.01",changes:["Fixed a floating point error that made shards easier to get.","Adjusted padding in crafting tab to be consistent."]},{version:"1.0",changes:["Initial release"]}].map(h=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-baseline gap-3 mb-2",children:[i.jsxs("h3",{className:"text-lg font-semibold text-accent-primary",children:["Version ",h.version]}),h.date&&i.jsx("span",{className:"text-light-muted text-xs",children:new Date(h.date).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),i.jsx("ul",{className:"list-disc list-inside text-light-text space-y-1 text-sm",children:h.changes.map((M,g)=>i.jsx("li",{children:M},g))})]},h.version))})]})})]})}function wg(){const e=b(u=>u.combat),t=e.playerHp>0,[n,r]=re.useState(null),s=b(u=>u.getMasteryArtifactEffectiveness),a=y.ARTIFACT_RECIPES.filter(u=>e.artifacts[u.id]?.owned),l=s(),o=uo(e.artifacts,l);return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-4 w-full",children:[i.jsx("div",{className:"text-sm font-semibold text-[#4ade80] mb-3",children:"You"}),t?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-[#a3a3a3] mb-1",children:[i.jsx("span",{children:"Health"}),o.hpRegen>0&&i.jsxs("span",{className:"text-[#22c55e]",children:["+",D(o.hpRegen)," HP/s"]})]}),i.jsx(ef,{current:e.playerHp,max:e.playerMaxHp,color:"playerHealth"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"text-xs text-[#a3a3a3] mb-1",children:"Attack"}),i.jsx(tf,{progress:e.playerAttackProgress,attackTime:e.playerAttackTime})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-[#666666]",children:"Damage:"}),i.jsxs("span",{className:"text-[#ffffff] ml-1",children:[D(e.playerDamageMin),"-",D(e.playerDamageMax)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[#666666]",children:"Speed:"}),i.jsxs("span",{className:"text-[#ffffff] ml-1",children:[e.playerAttackTime.toFixed(2),"s"]})]})]}),a.length>0&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-dark-border",children:[i.jsx("div",{className:"text-xs text-[#a3a3a3] mb-2",children:"Artifacts"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:a.map(u=>i.jsxs("div",{className:"relative",onMouseEnter:()=>r(u.id),onMouseLeave:()=>r(null),children:[i.jsx("div",{className:"w-10 h-10 bg-[#2a2a1a] border border-[#fbbf2433] rounded p-0.5 flex items-center justify-center",children:i.jsx("img",{src:`./icon-${u.icon}`,alt:u.name,className:"w-8 h-8"})}),n===u.id&&i.jsxs(yn,{position:"right",width:"sm",children:[i.jsx(Nn,{color:"#fbbf24",children:u.name}),i.jsxs("div",{className:"text-[10px] text-[#888888]",children:[u.effects.hpRegen>0&&i.jsxs("div",{className:"text-[#22c55e]",children:[" +",D(u.effects.hpRegen*l)," HP/s"]}),u.effects.hpMult>1&&i.jsxs("div",{className:"text-[#22c55e]",children:[" ",(u.effects.hpMult*l).toFixed(2)," HP"]}),u.effects.attackSpeedMult>1&&i.jsxs("div",{className:"text-[#60a5fa]",children:[" ",(u.effects.attackSpeedMult*l).toFixed(2)," speed"]}),u.effects.damageMult>1&&i.jsxs("div",{className:"text-[#ef4444]",children:[" ",(u.effects.damageMult*l).toFixed(2)," damage"]})]})]})]},u.id))})]})]}):i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-[#ef4444] text-lg font-bold mb-2",children:"DEFEATED"}),i.jsx("div",{className:"text-[#a3a3a3] text-sm",children:"Reviving in..."}),i.jsxs("div",{className:"text-[#fbbf24] text-2xl font-mono",children:[Math.ceil(e.playerReviveTimer),"s"]})]})]})}function Eg(){const e=b(l=>l.combat),t=b(l=>l.getEnemyDropWithBonus),n=Xe(e.currentEnemy),r=Lh(e.currentEnemy),s=t(e.currentEnemy),a=e.playerHp>0;return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-4 w-full",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"text-sm font-semibold text-[#ef4444]",children:["Enemy #",e.currentEnemy+1]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:"./icon-energy_core.png",alt:"Energy Core",className:"w-12 h-12"}),i.jsx("span",{className:"text-lg text-[#fbbf24] font-mono font-bold",children:D(s)})]})]}),i.jsx("div",{className:"flex justify-center mb-3",children:i.jsx("img",{src:`./icon-t${r}_enemy.png`,alt:`T${r} enemy`,className:"w-16 h-24"})}),i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"text-xs text-[#a3a3a3] mb-1",children:"Health"}),i.jsx(ef,{current:e.enemyHp,max:e.enemyMaxHp,color:"enemyHealth"})]}),a&&i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"text-xs text-[#a3a3a3] mb-1",children:"Attack"}),i.jsx(tf,{progress:e.enemyAttackProgress,attackTime:n.attackTime})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-[#666666]",children:"Damage:"}),i.jsxs("span",{className:"text-[#ffffff] ml-1",children:[D(n.damageMin),"-",D(n.damageMax)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[#666666]",children:"Speed:"}),i.jsxs("span",{className:"text-[#ffffff] ml-1",children:[n.attackTime.toFixed(2),"s"]})]})]})]})}function kg(){const e=b(n=>n.combat),t=b(n=>n.mana);return i.jsx("div",{className:"bg-dark-surface border border-dark-border rounded p-4 mb-4",children:i.jsxs("div",{className:"flex gap-6 items-end",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[#a3a3a3] text-xs uppercase tracking-wide mb-1",children:"Energy Cores"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:"./icon-energy_core.png",alt:"Energy Core",className:"w-10 h-10"}),i.jsx("span",{className:"text-[#fbbf24] text-xl font-bold font-mono",children:D(e.energyCores.toNumber())})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-[#a3a3a3] text-xs uppercase tracking-wide mb-1",children:"Mana"}),i.jsx("div",{className:"text-[#ffffff] text-xl font-bold font-mono h-10 flex items-center",children:D(t.toNumber())})]}),i.jsxs("div",{className:"ml-auto text-right",children:[i.jsx("div",{className:"text-[#a3a3a3] text-xs uppercase tracking-wide mb-1",children:"Highest Enemy"}),i.jsx("div",{className:"text-[#ffffff] text-xl font-bold font-mono h-10 flex items-center justify-end",children:e.highestEnemy})]})]})})}function sf({label:e,level:t,cost:n,costType:r,effect:s,current:a,onClick:l,levelDisplay:o}){const u=n===1/0,c=u?100:Math.min(a/n*100,100),m=!u&&a>=n;return i.jsxs("button",{onClick:l,disabled:!m,className:`relative p-3 rounded border text-left overflow-hidden bg-[#1a1a1a] ${m?"hover:bg-[#252525] cursor-pointer border-[#22c55e]":"cursor-not-allowed border-dark-border"}`,children:[i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${c}%`,background:u?"linear-gradient(to bottom, #fbbf24, #d97706)":"linear-gradient(to bottom, #14532d, #0f3d22)"}}),i.jsxs("div",{className:"relative flex items-center justify-between mb-1",children:[i.jsx("span",{className:`text-sm font-semibold ${u?"text-[#1a1a1a]":"text-[#ffffff]"}`,children:e}),i.jsx("span",{className:`text-xs ${u?"text-[#1a1a1a]":"text-[#cccccc]"}`,children:o??`Lv.${t}`})]}),i.jsx("div",{className:`relative text-xs mb-1 ${u?"text-[#3a3a3a]":"text-[#e0e0e0]"}`,children:s}),i.jsx("div",{className:`relative text-xs font-mono ${u?"text-[#1a1a1a]":m?"text-[#86efac]":"text-[#f87171]"}`,children:u?"MAX":`${D(n)} ${r==="mana"?"mana":"cores"}`})]})}function Cg(){const e=b(a=>a.combat),t=b(a=>a.mana),n=b(a=>a.buyCombatUpgrade),r=b(a=>a.getCombatUpgradeCapBonus()),s=[{type:"hp",label:"HP",effectLabel:"1.1 HP",baseMaxLevel:40},{type:"damage",label:"Damage",effectLabel:"1.1 Damage",baseMaxLevel:40},{type:"attackSpeed",label:"Attack Speed",effectLabel:"1.05 Speed",baseMaxLevel:20},{type:"reviveSpeed",label:"Faster Revive",effectLabel:"-2s revive",baseMaxLevel:10}];return i.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded p-4",children:[i.jsx("div",{className:"text-sm font-semibold text-[#a855f7] mb-1",children:"Combat Upgrades"}),i.jsx("div",{className:"text-xs text-[#a0a0a0] mb-3",children:"Cost: Mana"}),i.jsx("div",{className:"flex flex-col gap-2",children:s.map(({type:a,label:l,effectLabel:o,baseMaxLevel:u})=>{const c=e.combatUpgrades[a],m=a==="reviveSpeed"?Math.min(u+r,15):u+r,f=Ls(a,c,m),p=Kt(a,c),N=a==="reviveSpeed"?`${o} (${(y.BASE_REVIVE_TIME-p).toFixed(0)}s)`:`${o} (${p.toFixed(2)}x)`,v=m?`${c}/${m}`:void 0;return i.jsx(sf,{label:l,level:c,cost:f,costType:"mana",effect:N,current:t.toNumber(),onClick:()=>n(a),levelDisplay:v},a)})})]})}function Mg(){const e=b(r=>r.combat),t=b(r=>r.buyCoreUpgrade),n=[{type:"craftingSpeed",label:"Craft Speed",effectLabel:"1.2 global"},{type:"manaBoost",label:"Mana Boost",effectLabel:"1.2 mana"},{type:"yield",label:"Yield",effectLabel:"1.1 global"},{type:"craftingSlots",label:"Crafting Slot",effectLabel:"+1 slot",maxLevel:3}];return i.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded p-4",children:[i.jsx("div",{className:"text-sm font-semibold text-[#fbbf24] mb-1",children:"Core Upgrades"}),i.jsx("div",{className:"text-xs text-[#a0a0a0] mb-3",children:"Cost: Energy Cores"}),i.jsx("div",{className:"flex flex-col gap-2",children:n.map(({type:r,label:s,effectLabel:a,maxLevel:l})=>{const o=e.coreUpgrades[r],u=Os(r,o),c=Ds(r,o),m=r==="craftingSlots"?`${a} (+${c.toFixed(0)} total)`:`${a} (${c.toFixed(2)}x)`,f=l?`${o}/${l}`:void 0;return i.jsx(sf,{label:s,level:o,cost:u,costType:"cores",effect:m,current:e.energyCores.toNumber(),onClick:()=>t(r),levelDisplay:f},r)})})]})}function Tg({label:e,level:t,cost:n,effect:r,canAfford:s,onClick:a,dust:l}){return i.jsxs("button",{onClick:a,disabled:!s,className:`relative p-3 rounded border text-left overflow-hidden bg-[#1a1a1a] ${s?"hover:bg-[#252525] cursor-pointer border-[#22c55e]":"cursor-not-allowed border-dark-border"}`,children:[i.jsxs("div",{className:"relative flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-semibold text-[#ffffff]",children:e}),i.jsxs("span",{className:"text-xs text-[#cccccc]",children:["Lv.",t]})]}),i.jsx("div",{className:"relative text-xs mb-2 text-[#e0e0e0]",children:r}),i.jsx("div",{className:"relative flex flex-wrap gap-x-3 gap-y-1",children:n.map(({tier:o,amount:u})=>{const c=l[o-1]>=u;return i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("img",{src:`./icon-t${o}_dust.png`,alt:`T${o} dust`,className:"w-4 h-4"}),i.jsx("span",{className:`text-xs font-mono ${c?"text-[#86efac]":"text-[#f87171]"}`,children:D(u)})]},o)})})]})}function jg(){const e=y.DUST_UPGRADE_CONFIGS,t=b(c=>c.combat),n=b(c=>c.pulverizers.dust),r=b(c=>c.getDustUpgradeCost),s=b(c=>c.canBuyDustUpgrade),a=b(c=>c.buyDustUpgrade),l=b(c=>c.getDustDamageMultiplier),o=b(c=>c.getDustAttackSpeedMultiplier);if(!e)return null;const u=[{type:"damageMult",label:"Dust Damage",effectLabel:`${e.damageMult.effect} damage`},{type:"attackSpeedMult",label:"Dust Speed",effectLabel:`${e.attackSpeedMult.effect} attack speed`}];return i.jsxs("div",{className:"bg-dark-surface border border-dark-border rounded p-4 mt-4",children:[i.jsx("div",{className:"text-sm font-semibold text-[#c084fc] mb-1",children:"Dust Upgrades"}),i.jsx("div",{className:"text-xs text-[#a0a0a0] mb-3",children:"Cost: Dust"}),i.jsx("div",{className:"flex flex-col gap-2",children:u.map(({type:c,label:m,effectLabel:f})=>{const p=t.dustUpgrades[c],N=r(c)??[],v=s(c),h=c==="damageMult"?l():o();return i.jsx(Tg,{label:m,level:p,cost:N,effect:`${f} (${h.toFixed(2)}x)`,canAfford:v,onClick:()=>a(c),dust:n},c)})})]})}function Ig(){const e=b(s=>s.mana),t=b(s=>s.unlockCombat),n=e.gte(Wn),r=Math.min(e.toNumber()/Wn*100,100);return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-4 w-full",children:[i.jsx("div",{className:"text-sm font-semibold text-[#666666] mb-3",children:"You"}),i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-[#a3a3a3] text-lg mb-4",children:"Character Locked"}),i.jsxs("button",{onClick:t,disabled:!n,className:`relative px-6 py-3 rounded-lg font-bold overflow-hidden ${n?"bg-[#14532d] hover:bg-[#166534] text-[#4ade80] cursor-pointer":"bg-[#252525] text-[#666666] cursor-not-allowed"}`,children:[i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${r}%`,background:"linear-gradient(to bottom, #166534, #14532d)"}}),i.jsx("span",{className:"relative",children:"Unlock Combat"}),i.jsxs("div",{className:"relative text-sm font-normal mt-1",children:[D(Wn)," mana"]})]})]})]})}function _g(){const e=b(t=>t.combat);return i.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[i.jsx(Eg,{}),i.jsx("div",{className:"text-2xl text-[#666666] text-center",children:"VS"}),e.characterUnlocked?i.jsx(wg,{}):i.jsx(Ig,{})]})}function Ag(){return b(t=>t.combat).unlocked?i.jsx("div",{className:"p-4 h-full overflow-y-auto",children:i.jsxs("div",{className:"flex justify-center gap-6",children:[i.jsx("div",{className:"w-64 flex-shrink-0",children:i.jsx(Cg,{})}),i.jsxs("div",{className:"w-96 flex-shrink-0",children:[i.jsx(kg,{}),i.jsx(_g,{})]}),i.jsxs("div",{className:"w-64 flex-shrink-0",children:[i.jsx(Mg,{}),i.jsx(jg,{})]})]})}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"text-[#666666] text-lg",children:"Combat not unlocked"})})}const af={"prism-power":{perLevel:.1,base:1,type:"additive",format:e=>`${e.toFixed(1)}x`},"bonus-cores":{perLevel:.5,base:1,type:"additive",format:e=>`${e.toFixed(1)}x`},"dust-yield":{perLevel:.2,base:1,type:"additive",format:e=>`${e.toFixed(1)}x`},"strong-enchantments":{perLevel:1.1,base:1,type:"multiplicative",format:e=>`${e.toFixed(2)}x`},"gem-cap":{perLevel:2,base:0,type:"additive",format:e=>`+${e}`},"combat-cap":{perLevel:1,base:0,type:"additive",format:e=>`+${e}`},"extra-slots":{perLevel:1,base:0,type:"additive",format:e=>`+${e}`},"merge-grid":{perLevel:1,base:0,type:"additive",format:e=>`+${e}`},"merge-level":{perLevel:1,base:0,type:"additive",format:e=>`+${e}`},"keep-prism":{perLevel:1,base:0,type:"additive",format:e=>`${e} tiers`},"keep-artifact":{perLevel:1,base:0,type:"additive",format:e=>`${e} tiers`}};function gi(e,t){const n=af[e];if(!n||t===0)return null;const r=n.type==="multiplicative"?Math.pow(n.perLevel,t):n.base+n.perLevel*t;return n.format(r)}function xr(e,t,n){if(t>=n)return null;const r=af[e];if(!r)return null;const s=t+1,a=r.type==="multiplicative"?Math.pow(r.perLevel,s):r.base+r.perLevel*s;return r.format(a)}function Pg({nodeId:e,isDragging:t}){const[n,r]=re.useState(!1),s=y.SINGULARITY_NODES.find(g=>g.id===e),a=b(g=>g.singularity.skillLevels),l=b(g=>g.singularity.points),o=b(g=>g.hasAdjacentNode),u=b(g=>g.getNodeCost),c=b(g=>g.canBuySkillNode),m=b(g=>g.buySkillNode);if(!s)return null;const f=a[e]??0,p=f>=s.maxLevel,N=u(e),v=c(e),h=e==="global-speed"||o(e),M=f>0;return i.jsxs("div",{className:"relative",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[i.jsxs("button",{onClick:()=>v&&m(e),disabled:p||!h,className:`
          w-24 h-24 rounded-lg border-2 flex flex-col items-center justify-center p-2 text-center
          transition-all duration-200
          ${p?"border-[#22c55e] bg-[#14532d]/30":M?"border-[#a78bfa] bg-[#581c87]/30":h?v?"border-[#a78bfa] bg-[#1a1a1a] hover:bg-[#252525] cursor-pointer":"border-[#666666] bg-[#1a1a1a]":"border-[#333333] bg-[#0a0a0a] opacity-50"}
        `,children:[i.jsx("span",{className:`text-xs font-bold ${p?"text-[#22c55e]":M?"text-[#a78bfa]":"text-[#ffffff]"}`,children:s.name}),i.jsxs("span",{className:`text-[10px] mt-1 ${p?"text-[#22c55e]":"text-[#aaaaaa]"}`,children:[f,"/",s.maxLevel]}),!p&&h&&i.jsxs("span",{className:`text-[10px] mt-1 ${v?"text-[#86efac]":"text-[#f87171]"}`,children:[D(N)," SP"]})]}),n&&!t&&i.jsxs("div",{className:"absolute z-50 left-1/2 -translate-x-1/2 bottom-full mb-2 bg-[#1a1a1a] border border-dark-border rounded-lg p-3 shadow-lg min-w-[200px] pointer-events-none",children:[i.jsx("div",{className:"text-sm font-bold text-[#a78bfa] mb-1",children:s.name}),i.jsx("div",{className:"text-xs text-[#aaaaaa] mb-2",children:s.description}),i.jsxs("div",{className:"text-xs text-[#888888]",children:["Level: ",i.jsxs("span",{className:"text-[#ffffff]",children:[f,"/",s.maxLevel]})]}),gi(e,f)&&i.jsxs("div",{className:"text-xs text-[#888888] mt-1",children:["Current: ",i.jsx("span",{className:"text-[#86efac]",children:gi(e,f)}),xr(e,f,s.maxLevel)&&i.jsx("span",{className:"text-[#666666]",children:"  "}),xr(e,f,s.maxLevel)&&i.jsx("span",{className:"text-[#a78bfa]",children:xr(e,f,s.maxLevel)})]}),!gi(e,f)&&xr(e,f,s.maxLevel)&&i.jsxs("div",{className:"text-xs text-[#888888] mt-1",children:["Next: ",i.jsx("span",{className:"text-[#a78bfa]",children:xr(e,f,s.maxLevel)})]}),!p&&i.jsxs("div",{className:"text-xs text-[#888888] mt-1",children:["Cost: ",i.jsxs("span",{className:l>=N?"text-[#86efac]":"text-[#f87171]",children:[D(N)," SP"]}),i.jsxs("span",{className:"text-[#666666]",children:[" (You have ",D(l),")"]})]}),p&&i.jsx("div",{className:"text-xs text-[#22c55e] mt-1",children:" Maxed"})]})]})}function Rg(){const e=b(k=>k.singularity.skillLevels),[t,n]=re.useState({x:0,y:0}),[r,s]=re.useState(!1),a=re.useRef({x:0,y:0}),l=re.useRef({x:0,y:0}),u=re.useCallback(()=>{const k=new Set(Object.entries(e).filter(([,Z])=>Z>0).map(([Z])=>Z));if(k.size===0)return y.SINGULARITY_NODES.filter(Z=>Z.id==="global-speed");const K=Z=>{const w=y.SINGULARITY_NODES.find(U=>U.id===Z);return w?y.SINGULARITY_NODES.filter(U=>Math.abs(U.x-w.x)===1&&U.y===w.y||Math.abs(U.y-w.y)===1&&U.x===w.x):[]},I=new Set(k),te=new Set;for(const Z of k)for(const w of K(Z))I.add(w.id),k.has(w.id)||te.add(w.id);for(const Z of te)for(const w of K(Z))I.has(w.id)||I.add(w.id);return y.SINGULARITY_NODES.filter(Z=>I.has(Z.id))},[e])(),c=Math.min(...u.map(k=>k.x)),m=Math.max(...u.map(k=>k.x)),f=Math.min(...u.map(k=>k.y)),p=Math.max(...u.map(k=>k.y)),N=m-c+1,v=p-f+1,h=Array(v).fill(null).map(()=>Array(N).fill(null));for(const k of u){const K=k.x-c,I=k.y-f;h[I][K]=k.id}const M=k=>{s(!0),a.current={x:k.clientX,y:k.clientY},l.current={...t}},g=k=>{if(!r)return;const K=k.clientX-a.current.x,I=k.clientY-a.current.y;n({x:l.current.x+K,y:l.current.y+I})},d=()=>{s(!1)},x=()=>{s(!1)},S=.3,E=32,C=2;return i.jsxs("div",{className:"overflow-hidden p-4 h-full cursor-grab active:cursor-grabbing select-none relative",onMouseDown:M,onMouseMove:g,onMouseUp:d,onMouseLeave:x,children:[i.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundImage:`radial-gradient(circle, rgba(255, 255, 255, 0.15) ${C/2}px, transparent ${C/2}px)`,backgroundSize:`${E}px ${E}px`,backgroundPosition:`${t.x*S}px ${t.y*S}px`}}),i.jsx("div",{className:"flex flex-col gap-2 items-center transition-transform duration-75 relative",style:{transform:`translate(${t.x}px, ${t.y}px)`},children:h.map((k,K)=>i.jsx("div",{className:"flex gap-2",children:k.map((I,te)=>i.jsx("div",{className:"w-24 h-24 flex items-center justify-center",children:I?i.jsx(Pg,{nodeId:I,isDragging:r}):null},`${te}-${K}`))},K))})]})}function Lg({milestone:e,achieved:t}){const[n,r]=re.useState(!1);return i.jsxs("div",{className:`relative flex items-center ${t?"text-[#22c55e]":"text-[#666666]"}`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[i.jsx("span",{className:"w-6 text-center flex-shrink-0",children:t?"":""}),i.jsx("span",{className:"text-sm font-mono w-8 flex-shrink-0",children:e.count}),i.jsx("span",{className:"text-sm font-medium w-32 flex-shrink-0",children:e.name}),i.jsx("span",{className:"text-xs text-[#888888] flex-1",children:e.description}),n&&e.tooltip&&i.jsx("div",{className:"absolute z-50 left-0 bottom-full mb-2 bg-[#1a1a1a] border border-dark-border rounded-lg p-3 shadow-lg max-w-[350px] pointer-events-none",children:i.jsx("div",{className:"text-xs text-[#aaaaaa]",children:e.tooltip})})]})}const Pu="evercraft-hide-completed-milestones";function Og(){const e=b(a=>a.singularity.count),[t,n]=re.useState(()=>{const a=localStorage.getItem(Pu);return a===null?!0:a==="true"}),r=()=>{const a=!t;n(a),localStorage.setItem(Pu,String(a))},s=y.SINGULARITY_MILESTONES.filter((a,l)=>{const o=e>=a.count;if(t&&o)return!1;const u=y.SINGULARITY_MILESTONES.findIndex(c=>e<c.count);return u===-1?!t:!(l>u+3)});return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-sm font-bold text-[#a78bfa]",children:"Milestones"}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:t,onChange:r,className:"w-3.5 h-3.5 accent-[#a78bfa] cursor-pointer"}),i.jsx("span",{className:"text-xs text-[#888888]",children:"Hide completed"})]})]}),i.jsx("div",{className:"flex flex-col gap-2",children:s.length>0?s.map(a=>{const l=e>=a.count;return i.jsx(Lg,{milestone:a,achieved:l},a.count)}):i.jsx("div",{className:"text-xs text-[#666666] text-center py-2",children:"All milestones completed!"})})]})}function Dg(){const e=b(T=>T.mana),t=b(T=>T.singularity),n=b(T=>T.mastery),r=b(T=>T.getSingularityPoints),s=b(T=>T.getMasterySingularityPointsBonus),a=b(T=>T.performSingularity),[l,o]=re.useState(!1),u=new z(y.SINGULARITY_THRESHOLD),c=e.gte(u),m=r(),f=t.count>=y.AUTOMATION_THRESHOLDS.BREAK_SINGULARITY,p=t.count>=y.AUTOMATION_THRESHOLDS.SP_BOOST,N=t.count>=1,v=y.SP_BASE,h=f&&e.gt(y.SINGULARITY_THRESHOLD)?Math.floor(e.log10().toNumber()-new z(y.SINGULARITY_THRESHOLD).log10().toNumber()):0,M=h>0?Math.pow(y.SP_OOM_SCALING,h):1,g=s(),d=p?1.5:1,x=y.SP_MULTIPLIER,S=t.skillLevels["bonus-sp"]??0,E=Math.pow(1.2,S),C=y.SINGULARITY_MILESTONES.find(T=>t.count<T.count);return i.jsxs("div",{className:"flex flex-col h-full p-4 gap-4",children:[i.jsx("div",{className:"bg-dark-surface border border-dark-border rounded p-4",children:i.jsxs("div",{className:"flex items-center gap-8",children:[i.jsxs("div",{className:"relative",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[i.jsx("button",{onClick:a,disabled:!c,className:`
                px-6 py-3 rounded-lg font-bold text-lg
                ${c?"bg-[#7c3aed] hover:bg-[#6d28d9] text-white":"bg-[#1a1a1a] text-[#666666] cursor-not-allowed"}
              `,children:c?i.jsxs(i.Fragment,{children:["Perform Singularity",i.jsxs("span",{className:"block text-sm font-normal",children:["+",D(m)," SP"]})]}):i.jsxs(i.Fragment,{children:["Singularity",i.jsxs("span",{className:"block text-sm font-normal",children:["Requires ",D(u.toNumber())," mana"]})]})}),l&&c&&i.jsxs("div",{className:"absolute z-50 left-0 top-full mt-2 bg-[#1a1a1a] border border-dark-border rounded-lg p-4 shadow-lg min-w-[280px] pointer-events-none",children:[i.jsx("div",{className:"text-sm font-bold text-[#a78bfa] mb-3",children:"SP Calculation"}),i.jsxs("div",{className:"text-xs space-y-1.5",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-[#888888]",children:"Base SP"}),i.jsx("span",{className:"text-[#ffffff] font-mono",children:v})]}),h>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-[#888888]",children:["Mana Bonus (",y.SP_OOM_SCALING,"^",h,")"]}),i.jsxs("span",{className:"text-[#60a5fa] font-mono",children:["",M.toFixed(2)]})]}),g>1&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-[#888888]",children:["T5 Mastery (Lv",n.tiers[4]?.level??1,")"]}),i.jsxs("span",{className:"text-[#fbbf24] font-mono",children:["",g.toFixed(2)]})]}),d>1&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-[#888888]",children:"SP Boost Milestone"}),i.jsxs("span",{className:"text-[#22c55e] font-mono",children:["",d.toFixed(1)]})]}),x>1&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-[#888888]",children:"Ascension Bonus"}),i.jsxs("span",{className:"text-[#c084fc] font-mono",children:["",x]})]}),S>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-[#888888]",children:["Bonus SP (Lv",S,")"]}),i.jsxs("span",{className:"text-[#a78bfa] font-mono",children:["",E.toFixed(2)]})]}),i.jsxs("div",{className:"border-t border-dark-border mt-2 pt-2 flex justify-between",children:[i.jsx("span",{className:"text-[#ffffff] font-semibold",children:"Total"}),i.jsxs("span",{className:"text-[#a78bfa] font-mono font-bold",children:[D(m)," SP"]})]})]})]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-[#a3a3a3]",children:"Singularity Points"}),i.jsxs("div",{className:"text-2xl font-bold text-[#a78bfa]",children:[D(t.points)," SP"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-[#a3a3a3]",children:"Singularities"}),i.jsx("div",{className:"text-2xl font-bold text-[#ffffff]",children:t.count})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-[#a3a3a3]",children:"Current Mana"}),i.jsxs("div",{className:`text-2xl font-bold ${c?"text-[#22c55e]":"text-[#ffffff]"}`,children:[D(e.toNumber()),!f&&e.gte(u)&&" (CAPPED)"]})]}),C&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm text-[#a3a3a3]",children:"Next Milestone"}),i.jsxs("div",{className:"text-lg text-[#fbbf24]",children:[C.count-t.count," more for ",C.name]})]})]})}),i.jsxs("div",{className:"flex-1 flex gap-4 min-h-0",children:[i.jsxs("div",{className:"w-[420px] flex flex-col gap-4",children:[i.jsx(Og,{}),i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-4",children:[i.jsx("h3",{className:"text-sm font-bold text-[#a78bfa] mb-3",children:"What Resets"}),i.jsxs("ul",{className:"text-xs text-[#aaaaaa] space-y-1",children:[i.jsx("li",{children:" Mana and all gems"}),i.jsx("li",{children:" All gem upgrades (Speed/Yield)"}),i.jsx("li",{children:" Foundry count (resets to 1 + extra slots)"}),i.jsx("li",{children:" Prisms (except kept by Prism Memory)"}),i.jsx("li",{children:" Combat progress and upgrades"}),i.jsx("li",{children:" Artifacts (except kept by Artifact Memory)"})]}),i.jsx("h3",{className:"text-sm font-bold text-[#22c55e] mt-4 mb-3",children:"What Persists"}),i.jsxs("ul",{className:"text-xs text-[#aaaaaa] space-y-1",children:[i.jsx("li",{children:" Singularity Points (SP)"}),i.jsx("li",{children:" All skill tree purchases"}),i.jsx("li",{children:" Milestone unlocks"}),i.jsx("li",{children:" Mastery (shards and levels)"}),i.jsx("li",{children:" Tab unlocks"})]})]})]}),i.jsxs("div",{className:"flex-1 bg-dark-surface border border-dark-border rounded overflow-hidden",children:[i.jsxs("div",{className:"p-4 border-b border-dark-border",children:[i.jsx("h3",{className:"text-sm font-bold text-[#a78bfa]",children:"Skill Tree"}),i.jsx("p",{className:"text-xs text-[#888888] mt-1",children:N?"Click nodes adjacent to owned nodes to purchase. Drag to pan. All bonuses persist through resets.":"Perform your first singularity to unlock the skill tree."})]}),N?i.jsx(Rg,{}):i.jsx("div",{className:"flex items-center justify-center h-64 text-[#666666]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("div",{children:"Perform your first singularity to unlock"})]})})]})]})]})}const Ug={globalSpeed:"global speed",prismEffectiveness:"prism effectiveness",energyCoreDrops:"energy core drops",globalYield:"global yield",singularityPoints:"singularity points",artifactEffectiveness:"artifact effectiveness"};function Fg(e){const t=y.MASTERY_CONFIG.tierBonuses[e];if(!t)return"";const n=Ug[t.type]??t.type;return`+${Math.round(t.value*100)}% ${n} per level`}function Bg({tier:e}){const t=b(p=>p.mastery),n=b(p=>p.getMasteryTotalShards),r=b(p=>p.getMasteryShardSpeedBonus),s=b(p=>p.getMasteryShardYieldBonus),a=e-1,l=t.tiers[a],o=n(e),u=r(e),c=s(e),m=Zd(l.level),f=()=>`1:${D(m)}`;return i.jsxs("div",{className:"bg-[#1a1a1a] border rounded-lg p-4",style:{borderColor:Fe[a]},children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("img",{src:`./icon-t${e}_gem.png`,alt:`T${e} gem`,className:"w-10 h-10"}),i.jsxs("div",{className:"font-bold",style:{color:Fe[a]},children:["T",e]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"text-center text-sm text-[#ffffff] mb-2",children:["Level ",l.level]}),i.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[i.jsx("span",{className:"text-[#aaaaaa]",children:"Shards"}),i.jsxs("span",{className:"text-[#ffffff]",children:[l.shards," / ",y.MASTERY_CONFIG.shardsPerLevel]})]}),i.jsx("div",{className:"h-2 bg-[#333333] rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full rounded-full transition-all duration-200",style:{width:`${l.shards/y.MASTERY_CONFIG.shardsPerLevel*100}%`,backgroundColor:Fe[a]}})}),i.jsxs("div",{className:"text-[10px] text-[#666666] mt-1",children:["Total: ",o," | Rolls: ",D(l.rollsSinceLastShard)," | Chance: ",f()]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3 text-xs",children:[i.jsxs("div",{className:"bg-[#0a0a0a] rounded p-2",children:[i.jsx("div",{className:"text-[#888888]",children:"Speed Bonus"}),i.jsxs("div",{className:"text-[#22c55e] font-mono",children:["+",((u-1)*100).toFixed(1),"%"]})]}),i.jsxs("div",{className:"bg-[#0a0a0a] rounded p-2",children:[i.jsx("div",{className:"text-[#888888]",children:"Yield Bonus"}),i.jsxs("div",{className:"text-[#22c55e] font-mono",children:["+",((c-1)*100).toFixed(1),"%"]})]})]}),i.jsxs("div",{className:"bg-[#0a0a0a] rounded p-2 text-xs",children:[i.jsx("div",{className:"text-[#888888]",children:"Level Bonus"}),i.jsx("div",{style:{color:Fe[a]},children:Fg(a)}),i.jsxs("div",{className:"text-[#22c55e] font-mono mt-1",children:["Current: +",((l.level-1)*y.MASTERY_CONFIG.tierBonuses[a].value*100).toFixed(0),"%"]})]})]})}function Gg(){const e=b(n=>n.mastery.shardLog);if(e.length===0)return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded-lg p-4",children:[i.jsx("h3",{className:"text-sm font-bold text-[#a78bfa] mb-3",children:"Shard Log"}),i.jsx("div",{className:"text-xs text-[#666666] italic",children:"No shards found yet..."})]});const t=n=>D(n);return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded-lg p-4",children:[i.jsx("h3",{className:"text-sm font-bold text-[#a78bfa] mb-3",children:"Shard Log"}),i.jsx("div",{className:"flex flex-col gap-1 text-xs max-h-48 overflow-y-auto custom-scrollbar",children:e.map((n,r)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:`./icon-t${n.tier}_gem.png`,alt:`T${n.tier}`,className:"w-4 h-4"}),i.jsxs("span",{className:"text-[#aaaaaa]",children:[i.jsxs("span",{style:{color:Fe[n.tier-1]},children:["T",n.tier]})," after"," ",i.jsx("span",{className:"text-[#ffffff]",children:D(n.rolls)})," rolls"," ",i.jsxs("span",{className:"text-[#666666]",children:["(1/",t(n.chance)," chance)"]})]})]},r))})]})}function zg(){const e=b(o=>o.getMasteryGlobalSpeedBonus),t=b(o=>o.getMasteryGlobalYieldBonus),n=b(o=>o.getMasteryPrismEffectiveness),r=b(o=>o.getMasteryEnergyCoreDropBonus),s=b(o=>o.getMasterySingularityPointsBonus),a=b(o=>o.getMasteryArtifactEffectiveness),l=[{label:"Global Speed",value:e(),sources:"T1, T6"},{label:"Global Yield",value:t(),sources:"T4, T8"},{label:"Prism Effectiveness",value:n(),sources:"T2"},{label:"Energy Core Drops",value:r(),sources:"T3"},{label:"Singularity Points",value:s(),sources:"T5"},{label:"Artifact Effectiveness",value:a(),sources:"T7"}];return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded-lg p-4",children:[i.jsx("h3",{className:"text-sm font-bold text-[#a78bfa] mb-3",children:"Mastery Bonuses"}),i.jsx("div",{className:"grid grid-cols-6 gap-3",children:l.map(o=>i.jsxs("div",{className:"bg-[#0a0a0a] rounded p-2",children:[i.jsx("div",{className:"text-xs text-[#888888]",children:o.label}),i.jsxs("div",{className:"text-lg font-mono text-[#22c55e]",children:[o.value.toFixed(2),"x"]}),i.jsxs("div",{className:"text-[10px] text-[#666666]",children:["From ",o.sources]})]},o.label))})]})}function $g(){const e=b(n=>n.mastery),t=b(n=>n.clearUnviewedShards);return re.useEffect(()=>{e.unviewedShards>0&&t()},[e.unviewedShards,t]),e.unlocked?i.jsxs("div",{className:"flex flex-col h-full p-4 gap-4",children:[i.jsx(zg,{}),i.jsxs("div",{className:"flex-1 flex gap-4 min-h-0",children:[i.jsxs("div",{className:"w-80 flex flex-col gap-4 overflow-auto",children:[i.jsx(Gg,{}),i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-4",children:[i.jsx("h3",{className:"text-sm font-bold text-[#a78bfa] mb-3",children:"How It Works"}),i.jsxs("ul",{className:"text-xs text-[#aaaaaa] space-y-2",children:[i.jsx("li",{children:" Each gem craft has a chance to drop a shard"}),i.jsxs("li",{children:[" Base drop rate: 1:",D(y.MASTERY_CONFIG.shardDropDivisors[0])," per craft"]}),i.jsxs("li",{children:[" Each shard: +",Math.round(y.MASTERY_CONFIG.shardSpeedBonus*100),"% speed, +",Math.round(y.MASTERY_CONFIG.shardYieldBonus*100),"% yield"]}),i.jsxs("li",{children:[" ",y.MASTERY_CONFIG.shardsPerLevel," shards = level up"]}),i.jsx("li",{children:" Drop rate scales with level (see tier cards)"}),i.jsx("li",{children:" Each tier has a unique level bonus"}),i.jsx("li",{children:" Mastery persists through resets"})]})]})]}),i.jsx("div",{className:"flex-1 overflow-auto",children:i.jsx("div",{className:"grid grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(n=>i.jsx(Bg,{tier:n},n))})})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center text-[#666666]",children:[i.jsx("div",{className:"text-2xl mb-2",children:"Mastery Locked"}),i.jsx("div",{children:"Complete your first Singularity to unlock Mastery"})]})})}function Hg({gem:e,row:t,col:n,deleteState:r,onCellClick:s}){const a=r.mode==="selecting",l=r.mode==="confirming"&&r.row===t&&r.col===n;if(!e)return i.jsx("div",{className:"w-16 h-16 bg-[#1a1a1a] border border-dark-border rounded flex items-center justify-center",children:i.jsx("span",{className:"text-[#333333] text-2xl",children:"+"})});const o=e.type==="prism",u=o?0:parseInt(e.type.slice(1)),c=o?"#ffffff":Fe[u-1],m=o?"./icon-t7_prism.png":`./icon-t${u}_gem.png`;return i.jsxs("div",{onClick:()=>a&&s(t,n),className:`w-16 h-16 bg-[#252525] border-2 rounded flex flex-col items-center justify-center relative transition-all ${a?"cursor-pointer hover:brightness-125":""} ${l?"ring-2 ring-red-500 ring-offset-1 ring-offset-[#1a1a1a]":""}`,style:{borderColor:c},children:[i.jsx("img",{src:m,alt:e.type,className:"w-10 h-10"}),i.jsx("span",{className:"absolute bottom-0.5 right-1 text-xs font-bold font-mono",style:{color:c},children:e.level})]})}function Yg({deleteState:e,onCellClick:t}){const n=b(s=>s.merge.grid),r=n.length;return i.jsx("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-4 min-w-[450px] min-h-[450px] flex items-center justify-center",children:i.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${r}, auto)`},children:n.map((s,a)=>s.map((l,o)=>i.jsx(Hg,{gem:l,row:a,col:o,deleteState:e,onCellClick:t},`${a}-${o}`)))})})}function Vg(){const e=b(f=>f.mana),t=b(f=>f.pulverizers.dust),n=b(f=>f.getMergeGemCost),r=b(f=>f.getMergeDustCosts),s=b(f=>f.canBuyMergeGem),a=b(f=>f.buyMergeGem),o=y.MERGE_CONFIG.costType==="dust",u=s();if(o){const f=r();let p=100;for(const{tier:N,amount:v}of f)if(v>0){const h=Math.min(t[N-1]/v*100,100);p=Math.min(p,h)}return i.jsxs("button",{onClick:()=>u&&a(),className:`relative w-full py-3 px-4 rounded text-left overflow-hidden ${u?"bg-[#252525] hover:bg-[#2a2a2a] border border-[#22c55e]":"bg-[#252525] hover:bg-[#2a2a2a] border border-transparent"}`,children:[i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${p}%`,background:"linear-gradient(to bottom, #92400e, #78350f)"}}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-lg font-semibold text-[#ffffff]",children:"Buy Random Gem"}),i.jsx("span",{className:"text-sm text-[#f59e0b]",children:"Dust Cost"})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(({tier:N,amount:v})=>{const h=t[N-1]>=v;return i.jsxs("span",{className:`flex items-center gap-1 text-sm ${h?"text-[#a3a3a3]":"text-[#ef4444]"}`,children:[i.jsx("img",{src:`./icon-t${N}_dust.png`,alt:`T${N} dust`,className:"w-4 h-4"}),i.jsx("span",{className:"font-mono",children:D(v)})]},N)})})]})]})}const c=n(),m=Math.min(e.toNumber()/c.toNumber()*100,100);return i.jsxs("button",{onClick:()=>u&&a(),className:`relative w-full py-3 px-4 rounded text-left overflow-hidden ${u?"bg-[#252525] hover:bg-[#2a2a2a] border border-[#22c55e]":"bg-[#252525] hover:bg-[#2a2a2a] border border-transparent"}`,children:[i.jsx("div",{className:"absolute left-0 top-0 h-full",style:{width:`${m}%`,background:"linear-gradient(to bottom, #166534, #14532d)"}}),i.jsxs("div",{className:"relative flex items-center justify-between",children:[i.jsx("span",{className:"text-lg font-semibold text-[#ffffff]",children:"Buy Random Gem"}),i.jsxs("span",{className:"text-lg font-mono text-[#ffffff]",children:[D(c.toNumber())," Mana"]})]})]})}function qg({deleteState:e,setDeleteState:t,onConfirmDelete:n}){const r=b(l=>l.merge.grid);if(e.mode==="idle")return i.jsx("button",{onClick:()=>t({mode:"selecting"}),className:"w-full py-2 px-4 rounded bg-[#252525] hover:bg-[#2a2a2a] border border-[#ef4444] text-[#ef4444] text-sm",children:"Delete Gem"});if(e.mode==="selecting")return i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:"flex-1 py-2 px-4 rounded bg-[#252525] border border-[#fbbf24] text-[#fbbf24] text-sm text-center",children:"Click a gem to delete"}),i.jsx("button",{onClick:()=>t({mode:"idle"}),className:"py-2 px-4 rounded bg-[#252525] hover:bg-[#2a2a2a] border border-[#666666] text-[#888888] text-sm",children:"Cancel"})]});const s=r[e.row]?.[e.col],a=s?s.type==="prism"?`Prism Lv${s.level}`:`T${s.type.slice(1)} Lv${s.level}`:"";return i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:n,className:"flex-1 py-2 px-4 rounded bg-[#ef4444] hover:bg-[#dc2626] text-white text-sm font-semibold",children:["Confirm Delete ",a]}),i.jsx("button",{onClick:()=>t({mode:"idle"}),className:"py-2 px-4 rounded bg-[#252525] hover:bg-[#2a2a2a] border border-[#666666] text-[#888888] text-sm",children:"Cancel"})]})}function Wg(){b(s=>s.merge.grid);const e=b(s=>s.getMergeSpeedBonus),t=b(s=>s.getMergeYieldBonus),r=b(s=>s.getMergePrismBonus)();return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-5 h-fit",children:[i.jsx("div",{className:"text-base text-[#a3a3a3] uppercase tracking-wide mb-4",children:"Merge Bonuses"}),i.jsxs("div",{className:"flex flex-col gap-2.5",children:[[1,2,3,4,5,6,7,8].map(s=>{const a=e(s),l=t(s),o=a>1||l>1;return i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:`./icon-t${s}_gem.png`,alt:`T${s}`,className:"w-7 h-7"}),i.jsxs("span",{className:"text-sm font-mono w-8",style:{color:o?Fe[s-1]:"#444444"},children:["T",s]}),i.jsxs("span",{className:`text-sm font-mono w-16 ${o?"text-[#22c55e]":"text-[#444444]"}`,children:[a.toFixed(2),"x"]}),i.jsxs("span",{className:`text-sm font-mono w-16 ${o?"text-[#3b82f6]":"text-[#444444]"}`,children:[l.toFixed(2),"x"]})]},s)}),i.jsx("div",{className:"border-t border-dark-border my-2"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:"./icon-t7_prism.png",alt:"Prism",className:"w-7 h-7"}),i.jsx("span",{className:`text-sm font-mono ${r>1?"text-[#ffffff]":"text-[#444444]"}`,children:"Prism"}),i.jsxs("span",{className:`text-sm font-mono ml-auto ${r>1?"text-[#a855f7]":"text-[#444444]"}`,children:[r.toFixed(2),"x"]})]})]}),i.jsx("div",{className:"border-t border-dark-border mt-4 pt-4",children:i.jsxs("div",{className:"text-xs text-[#666666] space-y-1.5",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Speed"}),i.jsx("span",{className:"text-[#22c55e]",children:"+50% base"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Yield"}),i.jsx("span",{className:"text-[#3b82f6]",children:"+20% base"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Prism"}),i.jsx("span",{className:"text-[#a855f7]",children:"+5% base"})]}),i.jsx("div",{className:"text-[#888888] mt-2",children:"All scale 2.1x per level"})]})})]})}function Kg(){return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-4",children:[i.jsx("div",{className:"text-sm text-[#a3a3a3] uppercase tracking-wide mb-3",children:"How It Works"}),i.jsxs("div",{className:"text-xs text-[#888888] space-y-2",children:[i.jsx("p",{children:"Buy random gems to fill the grid. Identical gems auto-merge into higher levels."}),i.jsx("p",{className:"text-[#fbbf24]",children:"Grid persists through Singularity. Gem cost resets."})]})]})}function Zg(e){return e.type==="prism"?"./icon-t7_prism.png":`./icon-t${parseInt(e.type.slice(1))}_gem.png`}function Qg(e){const t=Math.floor((Date.now()-e)/1e3);if(t<60)return`${t}s`;const n=Math.floor(t/60);if(n<60)return`${n}m`;const r=Math.floor(n/60);return r<24?`${r}h`:`${Math.floor(r/24)}d`}function Xg(){const e=b(n=>n.merge.log),t=(n,r)=>{const s=[];for(let a=n;a<r;a++)s.push(a);return s};return i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded p-5 w-fit h-fit",children:[i.jsx("div",{className:"text-sm text-[#888888] uppercase tracking-wide mb-4",children:"Spawn Log"}),e.length===0?i.jsx("div",{className:"text-sm text-[#666666] italic",children:"No gems spawned yet"}):i.jsx("div",{className:"flex flex-col",children:e.map((n,r)=>{const s=n.merged?t(n.spawned.level,n.merged.level):[];return i.jsxs("div",{children:[r>0&&i.jsx("div",{className:"border-t border-[#444444] my-2.5"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:Zg(n.spawned),alt:"",className:"w-7 h-7"}),i.jsxs("span",{className:"text-sm font-mono text-white",children:["Lv",n.spawned.level]}),i.jsx("span",{className:"text-xs text-[#666666] ml-auto",children:Qg(n.timestamp)})]}),s.map(a=>i.jsxs("div",{className:"flex items-center gap-2 ml-5 mt-1",children:[i.jsx("span",{className:"text-[#22c55e] text-sm",children:"+"}),i.jsxs("span",{className:"text-sm font-mono text-white",children:["Lv",a]}),i.jsx("span",{className:"text-[#666666] text-sm",children:""}),i.jsxs("span",{className:"text-sm font-mono font-semibold text-[#22c55e]",children:["Lv",a+1]})]},a))]},n.id)})})]})}function Jg(){const[e,t]=re.useState({mode:"idle"}),n=b(a=>a.deleteMergeGem),r=(a,l)=>{e.mode==="selecting"&&t({mode:"confirming",row:a,col:l})},s=()=>{e.mode==="confirming"&&(n(e.row,e.col),t({mode:"idle"}))};return i.jsx("div",{className:"flex justify-center p-4",children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx(Xg,{}),i.jsxs("div",{className:"flex flex-col gap-4 w-fit",children:[i.jsx(Vg,{}),i.jsx(Yg,{deleteState:e,onCellClick:r}),i.jsx(qg,{deleteState:e,setDeleteState:t,onConfirmDelete:s}),i.jsx(Kg,{})]}),i.jsx(Wg,{})]})})}const kt={speed:"#fbbf24",strength:"#a78bfa",discount:"#4ade80"};function e1({tier:e,type:t,canAfford:n}){const r=b(S=>S.buyEnchantment),s=b(S=>S.enchanting),a=b(S=>S.getEnchantmentSpeedMultiplier),l=b(S=>S.getEnchantmentStrengthMultiplier),o=b(S=>S.getEnchantmentDiscountMultiplier),u=b(S=>S.getEnchantmentPowerBonus),m=s.tiers[e-1][t],f=u(),p=()=>{switch(t){case"speed":return a(e);case"strength":return l(e);case"discount":return o(e)}},N=()=>{const S=y.ENCHANTING_CONFIG,E=m+1;switch(t){case"speed":return(1+E*S.SPEED_BASE_BONUS)*Math.pow(S.SPEED_COMPOUND_RATE,E)*f;case"strength":return(1+E*S.STRENGTH_BASE_BONUS)*Math.pow(S.STRENGTH_COMPOUND_RATE,E)*f;case"discount":return Math.pow(S.DISCOUNT_COMPOUND_RATE,E*f)}},v=S=>t==="discount"?`${(S*100).toFixed(0)}%`:`${S.toFixed(2)}x`,h={speed:"Increases crafting speed for this gem tier.",strength:"Increases the mana bonus provided by this gem tier.",discount:"Reduces the gem cost to craft this tier. Shows cost as % of original."},M={speed:"Speed",strength:"Strength",discount:"Discount"},g=p(),d=N(),x=kt[t];return i.jsxs("div",{className:"bg-[#1e1e24] rounded-lg border overflow-hidden",style:{borderColor:`${x}40`},children:[i.jsx("div",{className:"px-4 py-2 border-b",style:{background:`linear-gradient(to bottom, ${x}20, ${x}10)`,borderColor:`${x}30`},children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-semibold",style:{color:x},children:M[t]}),i.jsxs("span",{className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:`${x}25`,color:x},children:["Lv ",m]})]})}),i.jsxs("div",{className:"p-4",children:[i.jsx("p",{className:"text-xs text-[#a0a0a0] mb-4",children:h[t]}),i.jsxs("div",{className:"flex items-center justify-between mb-4 bg-[#15151a] rounded-lg p-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-[#909090] mb-1",children:"Current"}),i.jsx("div",{className:"font-mono text-sm text-[#d0d0d0]",children:v(g)})]}),i.jsx("div",{className:"text-[#606060] text-lg",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-[#909090] mb-1",children:"Next"}),i.jsx("div",{className:"font-mono text-sm font-semibold",style:{color:n?"#88ff88":"#c0c0c0"},children:v(d)})]})]}),i.jsx("button",{onClick:()=>r(e,t),disabled:!n,className:`w-full py-2 rounded-md text-sm font-medium transition-all ${n?"hover:brightness-110":"opacity-50 cursor-not-allowed"}`,style:{background:n?`linear-gradient(to bottom, ${x}90, ${x}70)`:"#2a2a2a",color:n?"#000":"#666",border:n?`1px solid ${x}`:"1px solid #333"},children:"Enchant"})]})]})}function t1({tier:e}){const[t,n]=re.useState(!1),r=b(h=>h.getEnchantmentCost),s=b(h=>h.canAffordEnchantment),a=b(h=>h.resetEnchantments),l=b(h=>h.getTotalEnchantmentLevel),o=b(h=>h.pulverizers),u=r(e),c=s(e),m=l(e),f=m>0,p=Fe[e-1],N=e===1?["speed","strength"]:["speed","strength","discount"],v=()=>{t?(a(e),n(!1)):n(!0)};return i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:`./icon-t${e}_gem.png`,alt:`T${e} gem`,className:"w-10 h-10"}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-bold text-lg",style:{color:p},children:["Tier ",e," Enchanting"]}),i.jsxs("div",{className:"text-sm text-[#a0a0a0]",children:[m," enchantment",m!==1?"s":""," applied"]})]})]}),f&&i.jsxs("div",{className:"flex items-center gap-2",children:[t&&i.jsx("button",{onClick:()=>n(!1),className:"px-3 py-1.5 bg-[#2a2a2a] hover:bg-[#3a3a3a] border border-[#444444] rounded text-sm text-[#b0b0b0]",children:"Cancel"}),i.jsx("button",{onClick:v,className:`px-3 py-1.5 rounded text-sm font-medium ${t?"bg-[#5a1a1a] hover:bg-[#6a2a2a] border border-[#882222] text-[#ff6666]":"bg-[#3a1a1a] hover:bg-[#4a2a2a] border border-[#552222] text-[#ff8888]"}`,children:t?"Confirm Reset":"Reset"})]})]}),i.jsxs("div",{className:"rounded-lg p-3 mb-4 border",style:{backgroundColor:`${p}10`,borderColor:`${p}30`},children:[i.jsx("div",{className:"text-xs text-[#b0b0b0] mb-2",children:"Enchanting cost:"}),i.jsx("div",{className:"flex flex-wrap items-center gap-4",children:u.dust.length===0?i.jsx("span",{className:"text-[#88ff88] text-sm font-medium",children:"Free"}):u.dust.map(h=>{const M=o.dust[h.tier-1]>=h.amount;return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("img",{src:`./icon-t${h.tier}_dust.png`,alt:`T${h.tier} dust`,className:"w-6 h-6",onError:g=>{g.currentTarget.src=`./icon-t${h.tier}_gem.png`,g.currentTarget.style.opacity="0.6"}}),i.jsx("span",{className:`font-mono text-sm font-semibold ${M?"text-[#22c55e]":"text-[#ff6666]"}`,children:D(h.amount)})]},h.tier)})})]}),i.jsx("div",{className:`grid gap-4 ${e===1?"grid-cols-2":"grid-cols-3"}`,children:N.map(h=>i.jsx(e1,{tier:e,type:h,canAfford:c},h))})]})}function n1({tier:e}){const t=b(N=>N.enchanting),n=b(N=>N.setTierAutomationRatios),r=b(N=>N.setTierAutomationOverflow),s=b(N=>N.copyAutomationSettings),a=e-1,l=t.automationSettings[a],o=t.tiers[a],u=o.speed+o.strength+o.discount,c=Fe[a],m=e>1,f=(N,v)=>{const h={...l.ratios,[N]:v},M=h.speed+h.strength+h.discount;M>0&&(h.speed=h.speed/M,h.strength=h.strength/M,h.discount=h.discount/M),n(e,h)},p=N=>{r(e,N)};return i.jsxs("div",{className:"p-3 rounded-lg border",style:{backgroundColor:`${c}08`,borderColor:`${c}30`},children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("img",{src:`./icon-t${e}_gem.png`,alt:`T${e} gem`,className:"w-8 h-8"}),i.jsxs("div",{children:[i.jsxs("span",{className:"font-semibold",style:{color:c},children:["Tier ",e]}),i.jsxs("span",{className:"text-xs text-[#808080] ml-2",children:["(",u," enchants)"]})]}),e>1&&i.jsx("button",{onClick:()=>s(e),className:"ml-auto px-2 py-1 text-xs bg-[#2a2a30] hover:bg-[#3a3a40] border border-[#444450] rounded text-[#a0a0a0]",children:"Copy to All"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-xs",style:{color:kt.speed},children:"Speed"}),i.jsxs("span",{className:"text-xs font-mono text-[#a0a0a0]",children:[(l.ratios.speed*100).toFixed(0),"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:l.ratios.speed*100,onChange:N=>f("speed",Number(N.target.value)/100),className:"w-full h-1.5 bg-[#333333] rounded-lg appearance-none cursor-pointer",style:{accentColor:kt.speed}}),i.jsxs("label",{className:"flex items-center gap-1 mt-1 cursor-pointer",children:[i.jsx("input",{type:"radio",name:`overflow-${e}`,checked:l.overflow==="speed",onChange:()=>p("speed"),className:"w-3 h-3",style:{accentColor:kt.speed}}),i.jsx("span",{className:"text-xs text-[#808080]",children:"Overflow"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-xs",style:{color:kt.strength},children:"Strength"}),i.jsxs("span",{className:"text-xs font-mono text-[#a0a0a0]",children:[(l.ratios.strength*100).toFixed(0),"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:l.ratios.strength*100,onChange:N=>f("strength",Number(N.target.value)/100),className:"w-full h-1.5 bg-[#333333] rounded-lg appearance-none cursor-pointer",style:{accentColor:kt.strength}}),i.jsxs("label",{className:"flex items-center gap-1 mt-1 cursor-pointer",children:[i.jsx("input",{type:"radio",name:`overflow-${e}`,checked:l.overflow==="strength",onChange:()=>p("strength"),className:"w-3 h-3",style:{accentColor:kt.strength}}),i.jsx("span",{className:"text-xs text-[#808080]",children:"Overflow"})]})]}),m?i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-xs",style:{color:kt.discount},children:"Discount"}),i.jsxs("span",{className:"text-xs font-mono text-[#a0a0a0]",children:[(l.ratios.discount*100).toFixed(0),"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"100",value:l.ratios.discount*100,onChange:N=>f("discount",Number(N.target.value)/100),className:"w-full h-1.5 bg-[#333333] rounded-lg appearance-none cursor-pointer",style:{accentColor:kt.discount}}),i.jsxs("label",{className:"flex items-center gap-1 mt-1 cursor-pointer",children:[i.jsx("input",{type:"radio",name:`overflow-${e}`,checked:l.overflow==="discount",onChange:()=>p("discount"),className:"w-3 h-3",style:{accentColor:kt.discount}}),i.jsx("span",{className:"text-xs text-[#808080]",children:"Overflow"})]})]}):i.jsx("div",{className:"flex items-center justify-center text-xs text-[#505050]",children:"No discount for T1"})]})]})}function r1(){const e=b(s=>s.enchanting),t=b(s=>s.setEnchantAutomationEnabled),r=b(s=>s.gems).map((s,a)=>({tier:a+1,hasGem:s.count.gte(1)})).filter(({hasGem:s})=>s).map(({tier:s})=>s);return i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"mb-6 p-4 bg-[#1a1a20] rounded-lg border border-[#333340]",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#a78bfa]",children:"Enchant Automation"}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("span",{className:"text-sm text-[#a0a0a0]",children:e.automationEnabled?"Enabled":"Disabled"}),i.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors ${e.automationEnabled?"bg-[#a78bfa]":"bg-[#404040]"}`,onClick:()=>t(!e.automationEnabled),children:i.jsx("div",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-all ${e.automationEnabled?"left-5":"left-0.5"}`})})]})]}),i.jsx("p",{className:"text-sm text-[#909090]",children:"Automatically purchase enchantments based on the ratios you set for each tier. The overflow option determines which enchantment gets the extra level when ratios don't divide evenly."}),i.jsx("p",{className:"text-sm text-[#707070] mt-2",children:"Also auto-buys dust combat upgrades (Damage and Attack Speed) when you can afford them."})]}),r.length===0?i.jsxs("div",{className:"text-center p-6 bg-[#1a1a20] rounded-lg border border-[#333340]",children:[i.jsx("div",{className:"text-[#a0a0a0]",children:"No gems available"}),i.jsx("div",{className:"text-sm text-[#808080]",children:"Craft some gems to configure automation!"})]}):i.jsx("div",{className:"space-y-3",children:r.map(s=>i.jsx(n1,{tier:s},s))})]})})}function s1(){const[e,t]=re.useState(1),[n,r]=re.useState("enchanting"),s=b(M=>M.enchanting),a=b(M=>M.pulverizers),l=b(M=>M.gems),o=b(M=>M.getEnchantmentPowerBonus),u=b(M=>M.hasEnchantAutomation),c=o(),m=u(),f=a.dust[0]>=y.ENCHANTING_UNLOCK_DUST,p=s.unlocked||f;if(!y.ENCHANTING_ENABLED)return i.jsx("div",{className:"p-4 text-center text-[#a0a0a0]",children:"Enchanting is not available at this ascension level."});if(!p)return i.jsx("div",{className:"p-4",children:i.jsxs("div",{className:"text-center p-8 bg-[#1a1a20] rounded-lg border border-[#a78bfa40]",children:[i.jsx("div",{className:"text-[#a78bfa] mb-2 font-semibold",children:"Enchanting Locked"}),i.jsxs("div",{className:"text-sm text-[#a0a0a0]",children:["Collect ",y.ENCHANTING_UNLOCK_DUST," T1 dust to unlock enchanting."]}),i.jsxs("div",{className:"text-sm text-[#a78bfa] mt-2",children:["Current: ",a.dust[0]," / ",y.ENCHANTING_UNLOCK_DUST]})]})});const N=l.map((M,g)=>({tier:g+1,hasGem:M.count.gte(1)})).filter(({hasGem:M})=>M).map(({tier:M})=>M),v=N.includes(e)?e:N[0]||1,h=a.dust.some(M=>M>0);return i.jsxs("div",{className:"flex flex-col h-full",children:[m&&i.jsxs("div",{className:"flex justify-center border-b border-[#333340] px-4",children:[i.jsx("button",{onClick:()=>r("enchanting"),className:`px-4 py-2 text-sm font-medium transition-colors ${n==="enchanting"?"text-[#a78bfa] border-b-2 border-[#a78bfa]":"text-[#808080] hover:text-[#a0a0a0]"}`,children:"Enchanting"}),i.jsxs("button",{onClick:()=>r("automation"),className:`px-4 py-2 text-sm font-medium transition-colors flex items-center gap-1 ${n==="automation"?"text-[#a78bfa] border-b-2 border-[#a78bfa]":"text-[#808080] hover:text-[#a0a0a0]"}`,children:["Automation",s.automationEnabled&&i.jsx("span",{className:"w-2 h-2 rounded-full bg-[#22c55e]",title:"Enabled"})]})]}),n==="automation"&&m?i.jsx(r1,{}):i.jsx("div",{className:"flex justify-center p-4 flex-1 overflow-y-auto",children:i.jsxs("div",{className:"flex gap-4",children:[h&&i.jsx("div",{className:"flex-shrink-0",children:i.jsx(rf,{})}),i.jsxs("div",{className:"w-[672px]",children:[c>1&&i.jsxs("div",{className:"mb-3 px-3 py-2 bg-[#a78bfa20] border border-[#a78bfa40] rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"text-[#a78bfa] text-sm",children:" Strong Enchantments:"}),i.jsxs("span",{className:"text-[#a78bfa] font-mono font-semibold",children:[c.toFixed(2),"x"]}),i.jsx("span",{className:"text-[#808080] text-xs",children:"enchantment power"})]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("h2",{className:"text-sm text-[#b0b0b0] mb-3",children:"Select gem tier to enchant"}),N.length===0?i.jsxs("div",{className:"text-center p-6 bg-[#1a1a20] rounded-lg border border-[#333340]",children:[i.jsx("div",{className:"text-[#a0a0a0]",children:"No gems available"}),i.jsx("div",{className:"text-sm text-[#808080]",children:"Craft some gems to start enchanting!"})]}):i.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(M=>{const g=M-1,d=s.tiers[g],x=d.speed+d.strength+d.discount,S=M===v;return i.jsxs("button",{onClick:()=>t(M),className:"relative group transition-transform hover:scale-105",children:[i.jsx("div",{className:`w-14 h-14 rounded-lg border-2 flex items-center justify-center transition-all ${S?"ring-2 ring-offset-2 ring-offset-[#0a0a0a]":""}`,style:{borderColor:S?Fe[g]:"#505050",backgroundColor:S?`${Fe[g]}25`:"#252530","--tw-ring-color":S?Fe[g]:void 0},children:i.jsx("img",{src:`./icon-t${M}_gem.png`,alt:`T${M} gem`,className:`w-10 h-10 transition-opacity ${S?"":"opacity-80 group-hover:opacity-100"}`})}),x>0&&i.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:Fe[g],color:"#000"},children:x})]},M)})})]}),N.length>0&&i.jsx(t1,{tier:v})]})]})})]})}function a1({setActiveTab:e}){const[t,n]=re.useState(!1),r=b(N=>N.mana),s=b(N=>N.ascensionLevel),a=b(N=>N.canAscend),l=b(N=>N.performAscension),o=new z(y.ASCENSION_COST),u=a(),c=s+2,f=(()=>{if(r.lte(0))return 0;if(r.gte(o))return 100;const N=r.log10().toNumber(),v=o.log10().toNumber(),h=new z(y.ASCENSION_TAB_UNLOCK).log10().toNumber();return N<h?0:Math.min(100,(N-h)/(v-h)*100)})(),p=()=>{if(u){if(!t){n(!0);return}l(),n(!1),e("crafting")}};return i.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[i.jsx("style",{children:`
        @keyframes shimmer {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
        }
        @keyframes pulse-glow {
          0%, 100% { box-shadow: 0 0 20px rgba(251, 191, 36, 0.4), 0 0 40px rgba(251, 191, 36, 0.2), inset 0 0 20px rgba(251, 191, 36, 0.1); }
          50% { box-shadow: 0 0 30px rgba(251, 191, 36, 0.6), 0 0 60px rgba(251, 191, 36, 0.3), inset 0 0 30px rgba(251, 191, 36, 0.2); }
        }
        @keyframes border-glow {
          0%, 100% { border-color: rgba(251, 191, 36, 0.5); }
          50% { border-color: rgba(251, 191, 36, 1); }
        }
        .ascension-ready {
          animation: pulse-glow 2s ease-in-out infinite, border-glow 2s ease-in-out infinite;
        }
        .shimmer-effect {
          background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
          background-size: 200% 100%;
          animation: shimmer 2s infinite;
        }
      `}),i.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-[#fbbf24]",children:"Ascension"}),i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded-lg p-6 mb-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsxs("p",{className:"text-lg text-[#aaaaaa] mb-4",children:["You have reached the pinnacle of Universe ",s+1,"."]}),i.jsxs("p",{className:"text-[#ffffff] mb-4",children:["You may ",i.jsx("span",{className:"text-[#fbbf24] font-bold",children:"Ascend"})," to Universe ",c,", discovering new challenges and features beyond this reality."]}),i.jsx("p",{className:"text-[#f87171] text-sm",children:"Warning: Ascending will reset ALL progress. Your gems, foundries, upgrades, prisms, combat, singularity, mastery, and merge progress will be lost."})]}),i.jsxs("div",{className:"border-t border-dark-border pt-6",children:[i.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[i.jsx("span",{className:"text-[#aaaaaa]",children:"Current Mana:"}),i.jsx("span",{className:"text-[#fbbf24] font-bold",children:D(r.toNumber())})]}),i.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[i.jsx("span",{className:"text-[#aaaaaa]",children:"Required:"}),i.jsx("span",{className:u?"text-[#22c55e] font-bold":"text-[#f87171] font-bold",children:D(o.toNumber())})]}),t?i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-center text-[#f87171] font-bold",children:"Are you sure? This cannot be undone!"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:()=>n(!1),className:"flex-1 py-3 rounded-lg font-bold bg-[#333333] text-[#ffffff] hover:bg-[#444444] transition-all",children:"Cancel"}),i.jsx("button",{onClick:p,className:"flex-1 py-3 rounded-lg font-bold bg-gradient-to-b from-[#ef4444] to-[#b91c1c] text-[#ffffff] hover:from-[#f87171] hover:to-[#dc2626] transition-all",children:"Confirm Ascension"})]})]}):u?i.jsxs("button",{onClick:p,className:`ascension-ready w-full py-4 rounded-lg font-bold text-lg transition-all\r
                  bg-gradient-to-b from-[#fbbf24] to-[#d97706] text-[#000000]\r
                  hover:from-[#fcd34d] hover:to-[#f59e0b] cursor-pointer\r
                  border-2 border-[#fbbf24] relative overflow-hidden`,children:[i.jsxs("span",{className:"relative z-10",children:["Ascend to Universe ",c]}),i.jsx("div",{className:"shimmer-effect absolute inset-0 z-0"})]}):i.jsxs("button",{disabled:!0,className:"relative w-full h-14 rounded-lg overflow-hidden border-2 border-[#4a3d1a] bg-[#1a1510] cursor-not-allowed",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 transition-all duration-500 ease-out",style:{width:`${f}%`,background:"linear-gradient(90deg, #92400e 0%, #d97706 50%, #fbbf24 100%)",boxShadow:f>0?"0 0 20px rgba(251, 191, 36, 0.5), inset 0 0 10px rgba(255,255,255,0.2)":"none"},children:f>0&&i.jsx("div",{className:"shimmer-effect absolute inset-0"})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("span",{className:"font-bold text-lg text-[#fbbf24] drop-shadow-[0_2px_4px_rgba(0,0,0,0.8)]",children:f>0?`${f.toFixed(1)}% to Ascension`:"Gather More Mana"})}),f>0&&f<100&&i.jsx("div",{className:"absolute top-0 bottom-0 w-2 blur-sm",style:{left:`${f}%`,background:"linear-gradient(90deg, #fbbf24, transparent)",transform:"translateX(-50%)"}})]})]})]}),i.jsxs("div",{className:"bg-[#1a1a1a] border border-dark-border rounded-lg p-4 text-center text-[#666666] text-sm",children:[i.jsxs("p",{children:["Universe ",c," features are coming soon..."]}),i.jsx("p",{className:"mt-2",children:"Ascending now will prepare your save for future content."})]})]})}function i1(){Wh();const[e,t]=re.useState("crafting");return i.jsxs("div",{className:"flex flex-col w-full h-screen",children:[i.jsx(Xh,{activeTab:e,setActiveTab:t}),i.jsxs("main",{className:"flex-1 bg-dark-bg overflow-auto",children:[e==="crafting"&&i.jsx(xg,{}),e==="combat"&&i.jsx(Ag,{}),e==="singularity"&&i.jsx(Dg,{}),e==="mastery"&&i.jsx($g,{}),e==="merge"&&i.jsx(Jg,{}),e==="enchanting"&&i.jsx(s1,{}),e==="ascension"&&i.jsx(a1,{setActiveTab:t}),e==="settings"&&i.jsx(bg,{})]})]})}xi.createRoot(document.getElementById("root")).render(i.jsx(vr.StrictMode,{children:i.jsx(i1,{})}));
